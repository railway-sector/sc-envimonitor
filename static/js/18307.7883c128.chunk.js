"use strict";(self.webpackChunksc_envimonitor=self.webpackChunksc_envimonitor||[]).push([[18307],{15359:(e,n,t)=>{t.d(n,{A:()=>c});var i,a=t(6326),l=t(42553),r=t(53084),o=t(46053),s=t(40565),u=t(87990);let c=i=class extends l.o{constructor(e){super(e),this.variableName=null,this.dimensionName=null,this.values=[],this.isSlice=!1}clone(){return new i({variableName:this.variableName,dimensionName:this.dimensionName,values:(0,r.o8)(this.values),isSlice:this.isSlice})}};(0,a.Cg)([(0,o.MZ)({type:String,json:{write:!0}})],c.prototype,"variableName",void 0),(0,a.Cg)([(0,o.MZ)({type:String,json:{write:!0}})],c.prototype,"dimensionName",void 0),(0,a.Cg)([(0,o.MZ)({type:s.gK.array(s.gK.oneOf([s.gK.native(Number),s.gK.array(s.gK.native(Number))])),json:{write:!0}})],c.prototype,"values",void 0),(0,a.Cg)([(0,o.MZ)({type:Boolean,json:{write:!0}})],c.prototype,"isSlice",void 0),c=i=(0,a.Cg)([(0,u.$)("esri.layers.support.DimensionalDefinition")],c)},17775:(e,n,t)=>{function i(e){return"Function"===(null===e||void 0===e?void 0:e.datasetFormat)}function a(e){return i(e)?e.primaryRasters.rasters:[e]}function l(e,n,t,i){const{x:a,y:l}=n,{x:r,y:o}=t,{xmin:s,xmax:u,ymin:c,ymax:d}=e,{width:m,height:v}=e,f=m/r,h=v/o,g=Math.min(f,h),b=g<=1?0:Math.min(.1,g/100),y=Math.floor((s-a)/r+b),w=Math.floor((l-d)/o+b),p=Math.floor((u-a)/r-b),N=Math.floor((l-c)/o-b);return{ul:{x:y,y:w},width:i>0&&f<.1?0:p-y+1,height:i>0&&h<.1?0:N-w+1}}t.d(n,{$g:()=>l,pb:()=>a,qg:()=>i})},51939:(e,n,t)=>{t.d(n,{AL:()=>y,DV:()=>h,ER:()=>a,F_:()=>o,Nd:()=>v,Oo:()=>l,dy:()=>m,eS:()=>x,h4:()=>M,jC:()=>b,nq:()=>f,rZ:()=>d,y6:()=>g});var i=t(44135);const a="Raster.",l="Raster.Dim.",r=".Max",o={servicePixelValue:"Raster.ServicePixelValue",rawServicePixelValue:"Raster.ServicePixelValue.Raw",itemPixelValue:"Raster.ItemPixelValue",magnitude:"Raster.Magnitude",direction:"Raster.Direction",variable:"Raster.Variable"},s=new Map([["quarters","Quarter"],["months","Month"],["weeks","Week of the year"],["days","Day of the year"]]);function u(e,n){return new i.A({name:e,alias:n,domain:null,editable:!1,length:50,type:"string"})}function c(e,n){return new i.A({name:e,alias:n,domain:null,editable:!1,type:"double"})}function d(e){return u(o.servicePixelValue,null!==e&&void 0!==e?e:"Service Pixel Value")}function m(e){return u(o.rawServicePixelValue,null!==e&&void 0!==e?e:"Raw Service Pixel Value")}function v(){return u(o.itemPixelValue,"Item Pixel Value")}function f(e){return u("".concat(o.servicePixelValue,".").concat(e),e)}function h(e){return c("".concat(o.magnitude),"Magnitude"+(e?" (".concat(e,")"):""))}function g(){return c("".concat(o.direction),"Direction (\xb0)")}function b(e){return e.fields.filter(e=>"oid"!==e.type&&"value"!==e.name.toLowerCase()).map(e=>{const n=e.clone();return n.name="".concat(a).concat(e.name),n})}function y(e){const n=new Set,t=new Set,a=new Map;return e.variables.forEach(e=>{let{dimensions:i}=e;i.forEach(e=>{if(e.recurring)a.set(e.name,e.unit);else{var i,l;const a="ISO8601"===(null===(i=e.unit)||void 0===i?void 0:i.trim())||"stdtime"===(null===(l=e.name)||void 0===l||null===(l=l.trim())||void 0===l?void 0:l.toLowerCase())?n:t;a.add(e.name),e.hasRanges&&a.add("".concat(e.name).concat(r))}})}),[u(o.variable,"Variable"),...[...n].map(e=>function(e,n){return new i.A({name:e,alias:n,domain:null,editable:!1,type:"date"})}("".concat(l).concat(e),p(e))),...[...t].map(e=>c("".concat(l).concat(e),p(e))),...[...a].map(e=>{let[n,t]=e;return c("".concat(l).concat(n),w(n,t))})]}function w(e,n){var t;return(n=null===(t=n)||void 0===t?void 0:t.toLowerCase())&&s.has(n)?s.get(n):p(e)}function p(e){const n=e.endsWith(r),t=n?e.slice(0,-4):e,i="StdTime"===t?"Standard Time":"StdZ"===t?"Standard Z":t;return n?"".concat(i," Max"):i}function N(e,n){return n?new Date(e):e}function x(e,n,t){(null===t||void 0===t?void 0:t.length)&&(n[o.variable]=t[0].variableName,t.forEach(t=>{let{dimensionName:i,values:a}=t;if(i&&null!==a&&void 0!==a&&a.length){const t="".concat(l).concat(i),o=e.find(e=>{let{name:n}=e;return n===t});if(!o)return;const s="date"===o.type,u=a[0];if(Array.isArray(u)){if(n["".concat(l).concat(i)]=N(u[0],s),null!=u[1]){const t="".concat(l).concat(i).concat(r);if(e.some(e=>{let{name:n}=e;return n===t})){const e=N(u[1],s);n[t]=e}}}else n["".concat(l).concat(i)]=N(u,s)}}))}function M(e,n){if(n.pixelType.startsWith("f")&&e.forEach(e=>{let{format:n,fieldName:t}=e;n&&t&&/^raster\.(item|service)pixelvalue/i.test(t)&&(n.places=2)}),n.multidimensionalInfo){const t=n.multidimensionalInfo.variables.flatMap(e=>{let{dimensions:n}=e;return n});e.forEach(e=>{let{format:n,fieldName:i}=e;if(n&&null!==i&&void 0!==i&&i.startsWith(l)){var a;const e=i.slice(l.length),o="".concat(e).concat(r),s=t.find(n=>{let{name:t}=n;return t===e||t===o});(null===s||void 0===s||null===(a=s.values)||void 0===a?void 0:a.every(e=>Number.isInteger(e)))&&(n.places=0)}})}}},68347:(e,n,t)=>{t.d(n,{$E:()=>A,DY:()=>p,NG:()=>S,QW:()=>u,Rp:()=>g,XU:()=>b,Xg:()=>D,ct:()=>y,fy:()=>w,sx:()=>h,xx:()=>c,z2:()=>N});var i=t(89379),a=t(18690),l=t(19247),r=t(205),o=t(15359);function s(e,n,t){const i=n.shift();if(0===t.length){const e=[];t.push({sliceId:-1,multidimensionalDefinition:e})}const a=t.length;for(let r=0;r<a;r++){var l;const n=t.shift().multidimensionalDefinition;null===(l=i.values)||void 0===l||l.forEach(a=>{t.push({sliceId:-1,multidimensionalDefinition:[...n,{variableName:e,dimensionName:i.name,values:[a]}]})})}n.length&&s(e,n,t)}function u(e,n){const t=[];let a=0;return(n?e.variables.filter(e=>e.name.toLowerCase()===n.toLowerCase()):[...e.variables].sort((e,n)=>e.name>n.name?1:-1)).forEach(e=>{const n=[],l=[...e.dimensions].sort((e,n)=>e.name>n.name?-1:1);s(e.name,l,n),n.forEach(e=>{t.push((0,i.A)((0,i.A)({},e),{},{sliceId:a++}))})}),t}function c(e,n,t){let i=e;if(n&&(n=[...n].sort((e,n)=>e.dimensionName<n.dimensionName?-1:1)).forEach(e=>{let{dimensionName:n,values:t,isSlice:a}=e;t.length&&(i=i.filter(e=>{const i=e.multidimensionalDefinition.find(e=>e.dimensionName===n);if(null==i)return!1;const l=i.values[0];return"number"==typeof l?"number"==typeof t[0]?t.includes(l):t.some(e=>e[0]<=l&&e[1]>=l):"number"==typeof t[0]?t.some(e=>l[0]<=e&&l[1]>=e):a?t.some(e=>e[0]===l[0]&&e[0]===l[1]):t.some(e=>e[0]>=l[0]&&e[0]<=l[1]||e[1]>=l[0]&&e[1]<=l[1]||e[0]<l[0]&&e[1]>l[1])}))}),i.length&&null!=(null===t||void 0===t?void 0:t.start)&&null!=t.end){const e=t.start.getTime(),n=t.end.getTime(),a=i[0].multidimensionalDefinition.findIndex(e=>"StdTime"===e.dimensionName);a>-1&&(i=i.filter(t=>{const i=t.multidimensionalDefinition[a].values[0];return e<=i&&n>=i}))}return i.map(e=>e.sliceId)}function d(e,n){return Array.isArray(e)?n[0]===n[1]?e[0]===n[0]||e[1]===n[0]:e[0]>=n[0]&&e[0]<=n[1]&&e[1]>=n[0]&&e[1]<=n[1]:e>=n[0]&&e<=n[1]}function m(e,n){return e[0]<=n[0]&&e[1]>=n[0]||e[0]<=n[1]&&e[1]>=n[1]||e[0]>=n[0]&&e[1]<=n[1]}function v(e){return 1===e.length?[e[0],e[0]]:[e[0],e[e.length-1]]}function f(e,n,t){var a;if(null===n||void 0===n||null===(a=n.subsetDefinitions)||void 0===a||!a.length)return e;let l;if(t){var r;const{variables:i}=n;if(i.length&&!i.includes(t))return null;const a=n.subsetDefinitions.find(n=>n.dimensionName===e.name&&n.variableName===t);if(null===a||void 0===a||null===(r=a.values)||void 0===r||!r.length)return e;l=v(a.values)}else{const t=n.dimensions.find(n=>{let{name:t}=n;return t===e.name});l=null===t||void 0===t?void 0:t.extent}const o=l;if(null===o||void 0===o||!o.length)return e;const s=e.values.filter(e=>d(e,o));return(0,i.A)((0,i.A)({},e),{},{extent:[...o],values:s})}function h(e,n,t){var i;if(null===n||void 0===n||null===(i=n.subsetDefinitions)||void 0===i||!i.length)return!1;const{variables:a}=n;if(a.length&&e.some(e=>{let{variableName:n}=e;return n&&!a.includes(n)}))return!0;for(let l=0;l<e.length;l++){const i=e[l],a=n.subsetDefinitions.find(e=>(""===i.variableName||e.variableName===i.variableName)&&e.dimensionName===i.dimensionName);if(null!==a&&void 0!==a&&a.values.length){const e=v(a.values);if(i.isSlice||2!==i.values.length||Array.isArray(i.values[0])||i.values[0]===i.values[1]||!t){if(i.values.some(n=>!d(n,e)))return!0}else if(!m(i.values,e))return!0}}return!1}function g(e,n){if(null==e)return{isOutside:!1};const{geometry:t,timeExtent:i,multidimensionalDefinition:a}=n;let s=null;if(null!=i&&(s=function(e,n){var t,i;const a=e.dimensions.find(e=>{let{name:n}=e;return"StdTime"===n});if(null==a||null==n.start&&null==n.end)return n;n=n.clone();const{start:l,end:r}=n.toJSON(),s=l===r?[l]:null!=l&&null!=r?[l,r]:[null!==l&&void 0!==l?l:r];return 2===s.length&&null!==a&&void 0!==a&&a.extent.length&&(s[0]=Math.max(s[0],a.extent[0]),s[1]=Math.min(s[1],null!==(t=a.extent[1])&&void 0!==t?t:a.extent[0]),s[1]<s[0])||h([new o.A({variableName:"",dimensionName:"StdTime",isSlice:1===s.length,values:s})],e,!0)?null:(n.start=new Date(s[0]),n.end=new Date(null!==(i=s[1])&&void 0!==i?i:s[0]),n)}(e,i),null==s))return{isOutside:!0};const{areaOfInterest:u}=e;if(u&&t){const e=function(e){switch(e.type){case"point":return e;case"extent":return e.center;case"polygon":{const n=(0,r.Ve)(e);return n?l.A.fromJSON(n):null}}return null}(t);if(e&&!u.contains(e))return{isOutside:!0}}return null!=a&&a.length&&h(a,e,!0)?{isOutside:!0}:{isOutside:!1,intersection:{geometry:t,timeExtent:s,multidimensionalDefinition:a}}}function b(e){var n,t;const{rasterInfo:i,multidimensionalSubset:a}=e,{multidimensionalInfo:l}=i;if(null==l)return null;let r=null!==(n=e.multidimensionalDefinition)&&void 0!==n&&n.length?e.multidimensionalDefinition:w(i,{multidimensionalSubset:a});if(null===(t=r)||void 0===t||!t.length)return null;if(r.some(e=>!e.dimensionName)){const{variableName:e}=r[0],n=w(i,{multidimensionalSubset:a,variableName:e});null!==n&&void 0!==n&&n.forEach(e=>{var n,t;const i=null===(n=r)||void 0===n?void 0:n.find(n=>{let{dimensionName:t}=n;return t===e.dimensionName});(null===i||void 0===i||null===(t=i.values)||void 0===t?void 0:t.length)&&(e.values=i.values,e.isSlice=i.isSlice)}),r=n}const{timeExtent:o}=e;if(null!=r&&null!=o&&(null!=o.start||null!=o.end)){var s;r=r.map(e=>e.clone());const e=null===(s=l.variables.find(e=>{let{name:n}=e;return n===r[0].variableName}))||void 0===s||null===(s=s.dimensions)||void 0===s?void 0:s.find(e=>{let{name:n}=e;return"StdTime"===n}),n=r.find(e=>{let{dimensionName:n}=e;return"StdTime"===n});if(!e||!n)return null;const{start:t,end:i}=o,a=null==t?null:t.getTime(),u=null==i?null:i.getTime(),c=null!==a&&void 0!==a?a:u,d=null!==u&&void 0!==u?u:a;if(null!=e.values){const t=e.values.filter(e=>{if(Array.isArray(e)){if(c===d)return e[0]<=c&&e[1]>=c;const n=e[0]<=c&&e[1]>c||e[0]<d&&e[1]>=d,t=e[0]>=c&&e[1]<=d||e[0]<c&&e[1]>d;return n||t}return c===d?e===c:e>=c&&e<=d});if(t.length){const e=t.sort((e,n)=>{const t=Array.isArray(e)?e[0]:e,i=Array.isArray(e)?e[1]:e,a=Array.isArray(n)?n[0]:n,l=Array.isArray(n)?n[1]:n;return c===d?t-a:Math.abs(i-d)-Math.abs(l-d)})[0];n.values=[e]}else r=null}else if(e.hasRegularIntervals&&e.extent){const[t,i]=e.extent;c>i||d<t?r=null:n.values=c===d?[c]:[Math.max(t,c),Math.min(i,d)]}}return null!=r&&h(r,a)?null:r}function y(e){var n,t,i;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{multidimensionalInfo:l,keyProperties:r}=e;if(null==l)return null;const{variableName:o,multidimensionalSubset:s,multidimensionalDefinition:u}=a,c=null!=u?null===(n=u[0])||void 0===n?void 0:n.variableName:null,d=o||c||(null===r||void 0===r?void 0:r.DefaultVariable);let{variables:m}=l;return(null===s||void 0===s||null===(t=s.variables)||void 0===t?void 0:t.length)&&(m=m.filter(e=>{let{name:n}=e;return s.variables.includes(n)})),d&&null!==(i=m.find(e=>{let{name:n}=e;return n===d}))&&void 0!==i?i:m[0]}function w(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const t=y(e,n);if(!t)return null;const i=[],{dimensions:a,name:l}=t;if(0===a.length)return[new o.A({variableName:l,dimensionName:"",values:[],isSlice:!0})];for(let s=0;s<a.length;s++){var r;const e=f(a[s],n.multidimensionalSubset,l);if(!e)return null;const{values:t,extent:u}=e;let c=null!==(r=null===t||void 0===t?void 0:t[0])&&void 0!==r?r:null===u||void 0===u?void 0:u[0];"stdz"===e.name.toLowerCase()&&!e.hasRanges&&u&&Math.abs(u[1])<=Math.abs(u[0])&&(c=null!==t&&void 0!==t&&t.length?t[t.length-1]:u[1]),i.push(new o.A({variableName:l,dimensionName:e.name,values:[c],isSlice:!n.useRangeForRangedDimensionInfo||!!e.hasRanges}))}return i}function p(e){return!(null===e||void 0===e||!e.length)&&e.some(e=>{if(null==e.values)return!0;const n=e.values.length;return 0===n||n>1||!e.isSlice&&Array.isArray(e.values[0])})}function N(e,n){var t;if(null==n||null==e)return null;let l=n.variables.map(e=>(0,i.A)({},e));return null!==e&&void 0!==e&&null!==(t=e.variables)&&void 0!==t&&t.length&&(l=l.filter(n=>{let{name:t}=n;return e.variables.includes(t)}),l.forEach(n=>{n.dimensions=n.dimensions.map(t=>f(t,e,n.name)).filter(a.Ru)})),l}function x(e,n){var t;const{values:i}=n;if(null!==i&&void 0!==i&&i.length){const n=Array.isArray(i[0]),t=Array.isArray(e);return n!==t?-1:n&&t?i.findIndex(n=>n[0]===e[0]&&n[1]===e[1]):i.indexOf(e)}const{extent:a}=n;if(Array.isArray(e)||!a||e<a[0]||e>a[1])return-1;const l=n.interval||1;if("ISO8601"!==n.unit)return Math.round((e-a[0])/l);const r=a[0];let o=-1;switch((null===(t=n.intervalUnit)||void 0===t?void 0:t.toLowerCase())||"days"){case"seconds":o=Math.round((e-r)/1e3/l);break;case"minutes":o=Math.round((e-r)/6e4/l);break;case"hours":o=Math.round((e-r)/36e5/l);break;case"days":o=Math.round((e-r)/864e5/l);break;case"months":{const n=new Date(e).getUTCFullYear()-new Date(r).getUTCFullYear(),t=new Date(r).getUTCMonth(),i=new Date(e).getUTCMonth();o=0===n?i-t:i+11-t+12*(n-1)}break;case"years":o=Math.round((new Date(e).getUTCFullYear()-new Date(r).getUTCFullYear())/l);break;case"decades":o=Math.round((new Date(e).getUTCFullYear()-new Date(r).getUTCFullYear())/10/l)}return o}function M(e){var n,t,i;let a=null===(n=e.values)||void 0===n?void 0:n.length;if(a)return a;const{extent:l,unit:r}=e,o=e.interval||1,s=l?l[1]-l[0]:0;if("ISO8601"!==r)return Math.round(s/o);switch(null!==(t=null===(i=e.intervalUnit)||void 0===i?void 0:i.toLowerCase())&&void 0!==t?t:"seconds"){case"seconds":a=Math.round(s/1e3/o);break;case"minutes":a=Math.round(s/6e4/o);break;case"hours":a=Math.round(s/36e5/o);break;case"days":a=Math.round(s/864e5/o);break;case"months":if(l){const e=new Date(l[1]).getUTCFullYear()-new Date(l[0]).getUTCFullYear(),n=new Date(l[0]).getUTCMonth(),t=new Date(l[1]).getUTCMonth();a=0===e?t-n+1:t+11-n+12*(e-1)+1}else a=0;break;case"years":a=l?Math.round((new Date(l[1]).getUTCFullYear()-new Date(l[0]).getUTCFullYear())/o):0;break;case"decades":a=l?Math.round((new Date(l[1]).getUTCFullYear()-new Date(l[0]).getUTCFullYear())/10/o):0;break;default:a=0}return a}function D(e){var n;if(2!==(null===(n=e.extent)||void 0===n?void 0:n.length)||!e.interval)return[];const{extent:[t,i],interval:a}=e;if("ISO8601"===e.unit){var l,r;const n=null!==(l=null===(r=e.intervalUnit)||void 0===r?void 0:r.toLowerCase())&&void 0!==l?l:"days";return["decades","years","months","days","hours","minutes","seconds"].includes(n)?function(e,n,t,i){const a=[];let l=e;const r=new Date(e);for(;l<=n;)switch(a.push(l),i){case"decades":r.setUTCFullYear(r.getUTCFullYear()+10*t),l=r.getTime();break;case"years":r.setUTCFullYear(r.getUTCFullYear()+t),l=r.getTime();break;case"months":r.setUTCMonth(r.getUTCMonth()+t),l=r.getTime();break;case"days":l+=864e5*t;break;case"hours":l+=36e5*t;break;case"minutes":l+=6e4*t;break;case"seconds":l+=1e3*t}return 1===a.length?a[1]=n:a[a.length-1]=n,a}(t,i,a,n):[]}const o=Math.round((i-t)/a);return Array.from({length:o},(e,n)=>n===o-1?i:t+n*a)}function S(e,n){let t=0;const i=e[0].variableName,a=[...n.variables].sort((e,n)=>e.name>n.name?1:-1);for(let l=0;l<a.length;l++){const n=a[l],r=[...n.dimensions].sort((e,n)=>e.name>n.name?-1:1);if(n.name!==i){t+=r.map(e=>M(e)).reduce((e,n)=>e*n);continue}const o=r.map(e=>M(e)),s=r.length;for(let i=0;i<s;i++){const n=e.find(e=>e.dimensionName===r[i].name);if(null==n)return null;const a=x(n.values[0],r[i]);if(-1===a)return null;o.shift(),t+=i===s-1?a:a*o.reduce((e,n)=>e*n)}break}return t}function A(e){return Math.round(24*(e-25569)*3600*1e3)}}}]);
//# sourceMappingURL=18307.7883c128.chunk.js.map