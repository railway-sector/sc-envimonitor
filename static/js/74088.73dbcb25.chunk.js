"use strict";(self.webpackChunksc_envimonitor=self.webpackChunksc_envimonitor||[]).push([[74088],{74088:(t,e,o)=>{o.d(e,{previewSymbol2D:()=>E});var i=o(89379),l=o(69539),n=o(59784),a=o(50076),s=o(85504),d=o(76931),u=o(76279),c=o(87840),r=o(65709),h=o(26291),v=o(27790);const p="picture-fill",m="picture-marker",g="simple-fill",f="simple-line",y="simple-marker",w="text",x="Aa",b=r.CB.size,z=r.CB.maxSize,L=r.CB.maxOutlineSize,M=r.CB.lineWidth,S=225,k=document.createElement("canvas");function C(t,e,o){if("polygon"===t.type){const i=t.extent,l=0===i.width?1:i.width,n=0===i.height?1:i.height;t=(0,u.wp)({originPosition:"upperLeft",scale:[l/e,n/o],translate:[i.xmin,i.ymax]},{},t);let a="";for(let e=0;e<t.rings.length;e++){const o=t.rings[e];for(let t=0;t<o.length;t++){const e=o[t][0],i=o[t][1];let l="";0===t?(l="M".concat(e.toString()," ").concat(i.toString()),""!==a&&(l=" ".concat(l)),a+=l):t===o.length-1?(l="l".concat(e.toString()," ").concat(i.toString()," Z"),""!==a&&(l=" ".concat(l)),a+=l):(l="l".concat(e.toString()," ").concat(i.toString()),""!==a&&(l=" ".concat(l)),a+=l)}}return a}if("polyline"===t.type){const i=t.extent,l=0===i.width?1:i.width,n=0===i.height?1:i.height;t=(0,u.QE)({originPosition:"upperLeft",scale:[l/e,n/o],translate:[i.xmin,i.ymax]},{},t);let a="";for(let e=0;e<t.paths.length;e++){const o=t.paths[e];for(let t=0;t<o.length;t++){const e=o[t][0],i=o[t][1];let l="";0===t?(l="M".concat(e.toString()," ").concat(i.toString()),""!==a&&(l=" ".concat(l)),a+=l):(l="l".concat(e.toString()," ").concat(i.toString()),""!==a&&(l=" ".concat(l)),a+=l)}}return a}return""}function A(t,e){const o=k.getContext("2d"),i=[];e&&(e.weight&&i.push(e.weight),e.size&&i.push(e.size+"px"),e.family&&i.push(e.family)),o.font=i.join(" ");const{width:l,actualBoundingBoxLeft:n,actualBoundingBoxRight:a,actualBoundingBoxAscent:s,actualBoundingBoxDescent:d}=o.measureText(t);return{width:Math.ceil(Math.max(l,n+a)),height:Math.ceil(s+d),x:Math.floor(n),y:Math.floor((s-d)/2)}}function B(t){const e=null===t||void 0===t?void 0:t.size;return{width:null!=e&&"object"==typeof e&&"width"in e?(0,d.Lz)(e.width):null,height:null!=e&&"object"==typeof e&&"height"in e?(0,d.Lz)(e.height):null}}function P(t,e){return t>e?"dark":"light"}async function E(t,e){var o;const{shapeDescriptor:l,size:n,renderOptions:u,outputSize:S}=function(t,e){var o,l;const n="number"==typeof(null===e||void 0===e?void 0:e.size)?null===e||void 0===e?void 0:e.size:null,a=null!=n?(0,d.Lz)(n):null,s=null!=(null===e||void 0===e?void 0:e.maxSize)?(0,d.Lz)(e.maxSize):null;let u="angle"in t?t.angle:null;null!=(null===e||void 0===e?void 0:e.rotation)&&(u=(null!==u&&void 0!==u?u:0)+e.rotation);const h=(0,c.eH)(t);let v=(0,c.$4)(t);"dark"!==j(t,245)||(null===e||void 0===e?void 0:e.ignoreWhiteSymbols)||(v=(0,i.A)((0,i.A)({width:.75},v),{},{color:"#bdc3c7"}));let S=null;const k={shape:null,fill:h,stroke:v,offset:[0,0]};(null===(o=v)||void 0===o?void 0:o.width)&&(v.width=Math.min(v.width,L));const P=(null===(l=v)||void 0===l?void 0:l.width)||0;let E=null!=(null===e||void 0===e?void 0:e.size)&&(null==(null===e||void 0===e?void 0:e.scale)||(null===e||void 0===e?void 0:e.scale)),D=0,F=0,Z=!1;switch(t.type){case y:{const o=t.style,{width:i,height:l}=B(e);let n=i===l&&null!=i?i:null!=a?a:Math.min((0,d.Lz)(t.size),s||z);if(!0===(null===e||void 0===e?void 0:e.useMarkerSymbolSize)&&null!==i&&null!==l){const e=Math.min((0,d.Lz)(t.size),s||z);n=e>i&&e>l?Math.min(i,l):e}switch(D=n,F=n,o){case"circle":k.shape={type:"circle",cx:0,cy:0,r:.5*n},E||(D+=P,F+=P);break;case"cross":k.shape={type:"path",path:[{command:"M",values:[0,.5*F]},{command:"L",values:[D,.5*F]},{command:"M",values:[.5*D,0]},{command:"L",values:[.5*D,F]}]};break;case"diamond":k.shape={type:"path",path:[{command:"M",values:[0,.5*F]},{command:"L",values:[.5*D,0]},{command:"L",values:[D,.5*F]},{command:"L",values:[.5*D,F]},{command:"Z",values:[]}]},E||(D+=P,F+=P);break;case"square":k.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[D,0]},{command:"L",values:[D,F]},{command:"L",values:[0,F]},{command:"Z",values:[]}]},E||(D+=P,F+=P),u&&(Z=!0);break;case"triangle":k.shape={type:"path",path:[{command:"M",values:[.5*D,0]},{command:"L",values:[D,F]},{command:"L",values:[0,F]},{command:"Z",values:[]}]},E||(D+=P,F+=P),u&&(Z=!0);break;case"x":k.shape={type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[D,F]},{command:"M",values:[D,0]},{command:"L",values:[0,F]}]},u&&(Z=!0);break;case"path":k.shape={type:"path",path:t.path||""},E||(D+=P,F+=P),u&&(Z=!0),E=!0}break}case f:{var O,W,q;const{width:t,height:o}=B(e),i=(0,c.O0)(v).reduce((t,e)=>t+e,0),l=i&&Math.ceil(M/i),n=null!==(O=null!==o&&void 0!==o?o:a)&&void 0!==O?O:P,s=null!==t&&void 0!==t?t:i*l||M;if(E=!0,"polyline"===(null===e||void 0===e||null===(W=e.geometry)||void 0===W?void 0:W.type)&&null!==e&&void 0!==e&&null!==(q=e.geometry)&&void 0!==q&&q.extent){var H;D=s,F=null!==o&&void 0!==o?o:D;const t=1e3,i=.15*t;S=[D,F],F=S[0]>S[1]?t*S[1]/S[0]:t,D=S[0]>S[1]?t:t*S[0]/S[1],null!==(H=v)&&void 0!==H&&H.width&&(v.width=v.width*t/(S[1]>S[0]?S[1]:S[0]),v.width>i&&(v.width=i)),k.shape={type:"path",path:C(e.geometry,D,F)}}else D=null!=(null===e||void 0===e?void 0:e.maxSize)?Math.min(s,e.maxSize):s,F=n,v&&(v.width=n),k.shape={type:"path",path:[{command:"M",values:[n/2,F/2]},{command:"L",values:[D-n/2,F/2]}]};break}case p:case g:{var Q,T,N;const t="object"==typeof(null===e||void 0===e?void 0:e.symbolConfig)&&!(null===e||void 0===e||null===(Q=e.symbolConfig)||void 0===Q||!Q.isSquareFill),{width:o,height:i}=B(e);D=!t&&o!==i||null==o?null!=a?a:b:o,F=!t&&o!==i||null==i?D:i,E||(D+=P,F+=P),E=!0,null!==e&&void 0!==e&&null!==(T=e.geometry)&&void 0!==T&&T.extent&&"polygon"===(null===e||void 0===e||null===(N=e.geometry)||void 0===N?void 0:N.type)?(S=[D,F],F=S[0]>S[1]?1e3*S[1]/S[0]:1e3,D=S[0]>S[1]?1e3:1e3*S[0]/S[1],k.shape={type:"path",path:C(e.geometry,D,F)}):k.shape=t?{type:"path",path:[{command:"M",values:[0,0]},{command:"L",values:[D,0]},{command:"L",values:[D,F]},{command:"L",values:[0,F]},{command:"L",values:[0,0]},{command:"Z",values:[]}]}:r.nq.fill[0];break}case m:{const o=Math.min((0,d.Lz)(t.width),s||z),i=Math.min((0,d.Lz)(t.height),s||z),{width:l,height:n}=B(e),c=l===n&&null!=l?l:null!=a?a:Math.max(o,i),r=t.width/t.height;D=r<=1?Math.ceil(c*r):c,F=r<=1?c:Math.ceil(c/r),k.shape={type:"image",x:-Math.round(D/2),y:-Math.round(F/2),width:D,height:F,src:t.url||""},u&&(Z=!0);break}case w:{const o=t,i=(null===e||void 0===e?void 0:e.overrideText)||o.text||x,l=o.font,{width:n,height:u}=B(e),c=null!=u?u:null!=a?a:Math.min((0,d.Lz)(l.size),s||z),{width:r,height:h}=A(i,{weight:l.weight,size:c,family:l.family}),v=/[\uE600-\uE6FF]/.test(i);D=null!==n&&void 0!==n?n:v?c:r,F=v?c:h;let p=.5*(v?c:h);v&&(p+=5),k.shape={type:"text",text:i,x:o.xoffset||0,y:o.yoffset||p,align:"middle",alignBaseline:o.verticalAlignment,decoration:l&&l.decoration,rotated:o.rotated,kerning:o.kerning},k.font=l&&{size:c,style:l.style,decoration:l.decoration,weight:l.weight,family:l.family};break}}return{shapeDescriptor:k,size:[D,F],outputSize:S,renderOptions:{node:null===e||void 0===e?void 0:e.node,scale:E,opacity:null===e||void 0===e?void 0:e.opacity,rotations:[u],useRotationSize:Z,effectView:null===e||void 0===e?void 0:e.effectView,ariaLabel:null===e||void 0===e?void 0:e.ariaLabel,clipBloomEffect:null===e||void 0===e?void 0:e.clipBloomEffect}}}(t,e);if(!l.shape)throw new a.A("symbolPreview: renderPreviewHTML2D","symbol not supported.");await async function(t,e){const o=e.fill,i=t.color;if("pattern"===(null===o||void 0===o?void 0:o.type)&&i&&t.type!==p){const t=await(0,c.rc)(o.src,i.toCss(!0));o.src=t,e.fill=o}}(t,l),await async function(t,e,o,i){if(!("font"in t)||!t.font||"text"!==e.shape.type)return;try{await(0,s.Al)(t.font)}catch(c){}const{width:l,height:n}=B(i);if(!/[\uE600-\uE6FF]/.test(e.shape.text)){var a,d,u;const{width:s,height:c,x:r,y:h}=A(e.shape.text,{weight:null===(a=e.font)||void 0===a?void 0:a.weight,size:null===(d=e.font)||void 0===d?void 0:d.size,family:null===(u=e.font)||void 0===u?void 0:u.family});o[0]=null!==l&&void 0!==l?l:s,o[1]=null!==n&&void 0!==n?n:c,e.shape.x=r,e.shape.y=h;let v="angle"in t?t.angle:null;if(null!=(null===i||void 0===i?void 0:i.rotation)&&(v=(null!==v&&void 0!==v?v:0)+i.rotation),v){const t=v*(Math.PI/180),e=Math.abs(Math.sin(t)),i=Math.abs(Math.cos(t));o[1]=o[0]*e+o[1]*i}}}(t,l,n,e);const k=[[l]];if("object"==typeof(null===e||void 0===e?void 0:e.symbolConfig)&&null!==e&&void 0!==e&&null!==(o=e.symbolConfig)&&void 0!==o&&o.applyColorModulation){const t=.6*n[0];k.unshift([(0,i.A)((0,i.A)({},l),{},{offset:[-t,0],fill:(0,r.QC)(l.fill,-.3)})]),k.push([(0,i.A)((0,i.A)({},l),{},{offset:[t,0],fill:(0,r.QC)(l.fill,.3)})]),n[0]+=2*t,u.scale=!1}"text"===t.type&&function(t,e,o,l,n){var a;if(null!=t.haloColor&&null!=t.haloSize){var s;null!==(s=n.masking)&&void 0!==s||(n.masking=o.map(()=>[]));const a=(0,d.Lz)(t.haloSize);l[0]+=a,l[1]+=a,o.unshift([(0,i.A)((0,i.A)({},e),{},{fill:null,stroke:{color:t.haloColor,width:2*a,join:"round",cap:"round"}})]),n.masking.unshift([{shape:{type:"rect",x:0,y:0,width:l[0]+2*v.y7,height:l[1]+2*v.y7},fill:[255,255,255],stroke:null},(0,i.A)((0,i.A)({},e),{},{fill:[0,0,0,0],stroke:null})])}null==t.backgroundColor&&null==t.borderLineColor||(l[0]+=2*v.y7,l[1]+=2*v.y7,o.unshift([{shape:{type:"rect",x:0,y:0,width:l[0],height:l[1]},fill:t.backgroundColor,stroke:{color:t.borderLineColor,width:(0,d.Lz)(t.borderLineSize)}}]),null===(a=n.masking)||void 0===a||a.unshift([]))}(t,l,k,n,u);const P=(0,h.fz)(k,n,u);if(S&&P){var E,D,F,Z;const t="img"===P.nodeName.toLowerCase()?P:P.firstChild;"svg"===t.nodeName.toLowerCase()&&t.setAttribute("viewBox","0 0 ".concat(n[0].toString()," ").concat(n[1].toString())),t.setAttribute("width",S[0].toString()),t.setAttribute("height",S[1].toString()),S.length>2&&(t.style.setProperty("padding-left",(null===(E=S[2])||void 0===E?void 0:E.toString())+"px"),t.style.setProperty("padding-right",(null===(D=S[2])||void 0===D?void 0:D.toString())+"px"),t.style.setProperty("padding-top",(null===(F=S[3])||void 0===F?void 0:F.toString())+"px"),t.style.setProperty("padding-bottom",(null===(Z=S[3])||void 0===Z?void 0:Z.toString())+"px"),t.style.setProperty("box-sizing","border-box"))}return P}function j(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S;const o=(0,c.eH)(t),i=(0,c.$4)(t),a=!o||"type"in o?null:new l.A(o),s=null!==i&&void 0!==i&&i.color?new l.A(null===i||void 0===i?void 0:i.color):null,d=a?P((0,n.Ws)(a),e):null,u=s?P((0,n.Ws)(s),e):null;return u?d?d===u?d:e>=S?"light":"dark":u:d}}}]);
//# sourceMappingURL=74088.73dbcb25.chunk.js.map