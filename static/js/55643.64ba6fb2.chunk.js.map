{"version":3,"file":"static/js/55643.64ba6fb2.chunk.js","mappings":"kTAI8H,MAAMA,EAAEC,WAAAA,CAAYC,GAAGC,KAAKC,OAAOF,EAAEG,SAAS,cAAc,MAAM,EAAE,CAACC,KAAAA,GAAQH,KAAKC,OAAOE,OAAO,CAACC,OAAAA,GAAUJ,KAAKC,OAAOG,SAAS,CAACC,GAAAA,CAAIN,GAAE,IAAAO,EAAC,OAAyB,QAAzBA,EAAON,KAAKC,OAAOI,IAAIN,UAAE,IAAAO,OAAA,EAAlBA,EAAoBC,KAAK,CAACC,GAAAA,CAAIT,EAAEU,GAAGT,KAAKC,OAAOO,IAAIT,EAAE,IAAIW,EAAED,GAAG,CAAC,QAAIE,GAAO,EAAE,MAAMD,EAAEZ,WAAAA,CAAYC,GAAGC,KAAKO,MAAMR,CAAC,CAAC,gBAAIa,GAAe,OAAOZ,KAAKO,MAAMM,OAAQ,CAACd,EAAEU,IAAIV,EAAEU,EAAEK,WAAYf,EAAAA,GAAEU,EAAAA,GAAE,ECAqc,MAAMM,EAAEC,EAAAA,GAAE,IAAIC,EAAE,cAAcR,EAAAA,EAAEX,WAAAA,CAAYC,GAAGmB,MAAMnB,GAAGC,KAAKmB,yBAAyB,IAAI,CAACf,OAAAA,GAAUJ,KAAKG,OAAO,CAAC,SAAIiB,GAAQ,OAAOpB,KAAKqB,QAAQD,KAAK,CAAC,oBAAIE,GAAmB,OAAOtB,KAAKqB,QAAQC,gBAAgB,CAAC,sBAAIC,GAAqB,OAAOvB,KAAKoB,MAAMI,cAAc,IAAI,aAAa,IAAI,QAAQ,IAAI,UAAU,IAAI,WAAW,OAAOxB,KAAKoB,MAAMI,aAAa,IAAI,OAAO,MAAM,UAAU,QAAQ,OAAO,CAAC,oBAAIC,GAAmB,OAAO,IAAIC,EAAAA,EAAE,CAACC,oBAAoB3B,KAAKsB,mBAAmBM,QAAQ,CAACzB,KAAAA,GAAQ,QAAQH,KAAKmB,2BAA2BnB,KAAKmB,yBAAyBf,UAAUJ,KAAKmB,yBAAyB,MAAK,EAAG,CAAC,0BAAMU,CAAqB9B,EAAEU,EAAEqB,GAAG,OAAO9B,KAAK+B,iBAAiBF,qBAAqB7B,KAAKgC,iBAAiBjC,EAAEU,GAAGqB,EAAE,CAAC,0BAAMG,CAAqBlC,EAAEU,GAAG,OAAOT,KAAK+B,iBAAiBE,qBAAqBjC,KAAKgC,iBAAiBjC,GAAGU,EAAE,CAAC,2BAAMyB,CAAsBnC,EAAEU,GAAG,MAAM0B,MAAML,EAAEM,OAAOvC,SAASG,KAAK+B,iBAAiBG,sBAAsBlC,KAAKgC,iBAAiBjC,GAAGU,GAAG,MAAM,CAAC0B,MAAML,EAAEM,OAAOC,EAAAA,EAAEC,SAASzC,GAAG,CAAC,wBAAM0C,CAAmBxC,EAAEU,GAAG,OAAOT,KAAK+B,iBAAiBQ,mBAAmBvC,KAAKgC,iBAAiBjC,GAAGU,EAAE,CAAC,uCAAM+B,CAAkCzC,EAAEU,GAAG,MAAMqB,QAAQ9B,KAAK+B,iBAAiBS,kCAAkCxC,KAAKgC,iBAAiBjC,GAAGU,GAAGZ,EAAE4C,EAAAA,EAAEH,SAASR,GAAG,OAAOjC,EAAE6C,SAASC,QAAS5C,IAAIA,EAAEqB,MAAMpB,KAAKoB,MAAMrB,EAAE6C,YAAY5C,KAAKoB,QAASvB,CAAC,CAAC,kBAAMgD,CAAa9C,EAAEU,GAAG,MAAMqB,QAAQ9B,KAAK+B,iBAAiBc,aAAa7C,KAAKgC,iBAAiBjC,GAAGU,GAAGZ,EAAE4C,EAAAA,EAAEH,SAASR,GAAG,OAAOjC,EAAE6C,SAASC,QAAS5C,IAAIA,EAAEqB,MAAMpB,KAAKoB,MAAMrB,EAAE6C,YAAY5C,KAAKoB,QAASvB,CAAC,CAACmC,gBAAAA,CAAiBjC,EAAEU,GAAG,IAAIqB,EAAE9B,KAAKyB,iBAAiB,GAAG,MAAM1B,IAAI,wBAAwBA,IAAIA,EAAE4B,sBAAsB5B,EAAE4B,oBAAoB3B,KAAKsB,kBAAkBQ,EAAE/B,EAAE6B,SAASE,EAAEgB,WAAU,GAAI,MAAMrC,EAAE,CAAC,MAAMV,EAAEU,EAAEsC,WAAWC,IAAKjD,GAAGA,EAAE6B,UAAWf,OAAQ,CAACd,EAAEU,KAAKV,EAAEkD,MAAMlD,EAAEkD,MAAMC,OAAOzC,EAAEwC,OAAOlD,IAAK+B,GAACqB,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAKrB,GAAC,IAACgB,WAAU,EAAGM,aAAWD,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAK1C,GAAC,IAAC4C,SAAStD,KAAG,CAAC,OAAO+B,CAAC,CAAC,oBAAIC,GAAkB,IAAAuB,EAAAC,EAAC,GAAGvD,KAAKmB,yBAAyB,OAAOnB,KAAKmB,yBAAyB,MAAMqC,SAASzD,EAAEqB,MAAMX,GAAGT,KAAK8B,EAAE,aAAarB,IAAa,QAAZ6C,EAAE7C,EAAEgD,gBAAQ,IAAAH,OAAA,EAAVA,EAAY1B,WAAU,KAAK/B,GAAEa,EAAAA,EAAAA,GAAED,GAAG4B,EAAEqB,EAAAA,GAAE9B,OAAO5B,KAAKuB,oBAAoBP,GAAe,QAAbuC,EAAA9C,EAAEkD,mBAAW,IAAAJ,OAAA,EAAbA,EAAe3B,WAAU,IAAIgC,EAAAA,EAAE,IAAInB,EAAEzC,KAAKsB,iBAAiBM,UAAUiC,KAAKnC,EAAEoC,KAAK7C,EAAE8C,aAAaC,EAAEC,UAAUC,EAAEC,iBAAiBC,GAAGpE,KAAKqB,QAAQgD,EAAE,IAAIC,EAAEF,GAAG,OAAOpE,KAAKmB,yBAAyB,IAAIJ,EAAE,CAAC8C,KAAKnC,EAAEoC,KAAK7C,EAAEO,aAAaa,EAAEsB,YAAY3C,EAAEyC,SAAS3B,EAAER,iBAAiBmB,EAAE8B,cAAc1E,EAAEkE,aAAaC,EAAEC,UAAUC,EAAEM,MAAMH,EAAEb,SAASzD,IAAIC,KAAKmB,wBAAwB,IAAGpB,EAAAA,EAAAA,GAAE,EAAC+B,EAAAA,EAAAA,IAAE,CAAC2C,eAAc,KAAMxD,EAAEyD,UAAU,eAAU,IAAQ3E,EAAAA,EAAAA,GAAE,EAAC+B,EAAAA,EAAAA,IAAE,CAAC2C,eAAc,KAAMxD,EAAEyD,UAAU,gBAAW,IAAQ3E,EAAAA,EAAAA,GAAE,EAAC+B,EAAAA,EAAAA,OAAKb,EAAEyD,UAAU,QAAQ,OAAM3E,EAAAA,EAAAA,GAAE,EAAC+B,EAAAA,EAAAA,OAAKb,EAAEyD,UAAU,mBAAmB,OAAM3E,EAAAA,EAAAA,GAAE,EAAC+B,EAAAA,EAAAA,OAAKb,EAAEyD,UAAU,qBAAqB,OAAM3E,EAAAA,EAAAA,GAAE,EAAC+B,EAAAA,EAAAA,OAAKb,EAAEyD,UAAU,mBAAmB,MAAMzD,GAAElB,EAAAA,EAAAA,GAAE,EAACF,EAAAA,EAAAA,GAAE,8CAA8CoB,E,kBCAtpH,SAASoB,EAAEA,EAAE5B,EAAEV,GAAG,IAAIA,GAAG,MAAMU,EAAE,OAAO,KAAK,IAAI4B,EAAE,OAAuD,SAAWA,EAAEP,GAAG,MAAMrB,EAAEqB,EAAE6C,cAAc,IAAI,MAAM5E,KAAKsC,EAAE,GAAGtC,EAAE4E,gBAAgBlE,EAAE,OAAO4B,EAAEtC,GAAG,OAAO,IAAI,CAAvJ+B,CAAErB,EAAEV,GAAG,MAAM2D,EAAErB,EAAEhC,IAAIN,GAAG,OAAO2D,EAAEjD,EAAEiD,EAAEkB,MAAM,IAAI,C,yaCA+lE,IAAIC,EAAE,cAAc7D,EAAAA,EAAElB,WAAAA,CAAYC,GAAGmB,MAAMnB,GAAGC,KAAK8E,KAAK,cAAc9E,KAAK+E,iBAAiB,IAAIC,EAAAA,EAAEhF,KAAKiF,mCAAkC,EAAGjF,KAAKkF,wBAAuB,EAAGlF,KAAKmF,yBAAwB,EAAGnF,KAAKoF,0BAAyB,EAAGpF,KAAKqF,2BAA0B,EAAGrF,KAAKsF,mBAAkB,EAAGtF,KAAKuF,iBAAgB,EAAGvF,KAAKwF,WAAW,KAAKxF,KAAKyF,gBAAgBC,EAAAA,GAAEC,SAAS3F,KAAK4F,sBAAsBC,EAAAA,EAAEC,MAAM9F,KAAK+F,qBAAqB,IAAI,CAACC,UAAAA,GAAa,MAAMjG,EAAEC,KAAKiG,MAAMxF,GAAGT,KAAKmF,yBAAyBnF,KAAKsF,oBAAoB,eAAevF,EAAEqB,MAAMI,aAAaiB,EAAE,IAAIyD,EAAAA,EAAE,CAACD,MAAMjG,KAAKoB,MAAMpB,KAAKoB,MAAMwE,sBAAsB5F,KAAK4F,sBAAsBX,kCAAkCjF,KAAKiF,kCAAkCkB,wBAAuB,EAAGtC,KAAK9D,EAAE8D,KAAKC,KAAK/D,EAAE+D,KAAKyB,gBAAgBvF,KAAKuF,gBAAgBa,mBAAmB,CAACC,aAAa5F,GAAGV,EAAEuG,KAAKD,aAAaE,iBAAiB9F,GAAG+F,QAAQA,CAAC/F,EAAEgC,IAAI1C,EAAEuG,KAAKE,QAAQD,iBAAiB9F,EAAEgC,GAAGgE,mBAAmBzG,KAAKqF,0BAA0B,CAAC5E,EAAEgC,IAAI,IAAIiE,EAAAA,EAAE,CAACC,kBAAkB3G,KAAK4G,aAAanG,EAAEoG,yBAAyBpE,EAAEqE,kBAAkB/G,EAAEuG,KAAKQ,oBAAoB,KAAKC,gBAAgB/G,KAAKkF,uBAAuB,CAACzE,EAAEgC,IAAI,IAAIuE,EAAAA,EAAE,CAACL,kBAAkB3G,KAAKoB,MAAMpB,KAAKoB,MAAMyF,yBAAyBpE,EAAEmE,aAAanG,EAAEwG,eAAelH,EAAEuG,KAAKW,iBAAiB,KAAKC,iBAAiBzG,EAAEA,GAAG,IAAI0G,EAAAA,EAAE,CAAC9F,SAAO8B,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAK1C,GAAC,IAAC2G,cAAcrH,MAAK,KAAKsH,aAAatH,GAAG,IAAIuH,EAAAA,EAAEvH,MAAMC,KAAKuH,KAAK,eAAe9E,GAAGzC,KAAKoF,0BAA0BpF,KAAKuH,KAAK,oBAAoB,IAAIC,EAAAA,EAAE,CAACb,kBAAkB3G,QAAQA,KAAKyG,oBAAoBzG,KAAK+E,iBAAiB0C,IAAK,IAAIzH,KAAKoB,MAAMsG,cAAgB,CAAC3H,EAAEU,MAAKC,EAAAA,EAAAA,IAAEX,EAAEU,IAAIT,KAAK+E,iBAAiB4C,WAAW3H,KAAK4G,aAAagB,yBAA0B5H,KAAK+E,iBAAiB0C,IAAK,IAAIzH,KAAKoB,MAAMyG,cAAgB,IAAI7H,KAAK4G,aAAakB,wBAAyB9H,KAAK+E,iBAAiB0C,IAAK,IAAIzH,KAAKoB,MAAM2G,aAAe,CAAChI,EAAEU,MAAKC,EAAAA,EAAAA,IAAEX,EAAEU,IAAIT,KAAK4G,aAAaoB,uBAAwBhI,KAAK+E,iBAAiB0C,IAAK,IAAIzH,KAAK4F,sBAAwB7F,GAAGC,KAAK4G,aAAahB,sBAAsB7F,GAAIC,KAAKiI,oBAAoBjI,KAAKkI,mBAAmB,CAAC,sBAAMA,SAAyBxE,EAAAA,EAAAA,IAAE1D,KAAK4G,aAAauB,mBAAmB,MAAMpI,EAAEC,KAAKiG,MAAMjG,KAAK+E,iBAAiB0C,IAAK,IAAIzH,KAAKoI,SAAWrI,GAAGC,KAAK+E,iBAAiB4C,WAAW3H,KAAK4G,aAAayB,eAAetI,KAAMC,KAAK+E,iBAAiB0C,IAAK,IAAI1H,EAAEuI,YAAc,IAAItI,KAAK4G,aAAa2B,iBAAkBvI,KAAKwI,4BAA4BxI,KAAKyI,uBAAuBzI,KAAK+E,iBAAiB0C,IAAK,IAAI1H,EAAEuG,KAAKoC,aAAe,IAAI1I,KAAK2I,yBAA0B3I,KAAK2I,yBAAyB3I,KAAK4G,aAAagC,sBAAsB5I,KAAK4G,aAAaiC,qBAAqBnF,EAAAA,EAAAA,IAAE1D,KAAK4G,aAAaoB,qBAAqB,CAAC5H,OAAAA,GAAUJ,KAAK+E,iBAAiB3E,UAAUJ,KAAKuH,KAAK,qBAAoBlF,EAAAA,EAAAA,IAAErC,KAAK8I,oBAAoB9I,KAAKuH,KAAK,gBAAelF,EAAAA,EAAAA,IAAErC,KAAK4G,eAAe5G,KAAKuH,KAAK,QAAQ,KAAK,CAAC,SAAInG,GAAQ,OAAOpB,KAAKiG,MAAM7E,KAAK,CAAC,gBAAI2H,GAAe,OAAO/I,KAAKiG,MAAM8C,YAAY,CAAC,gBAAIC,GAAc,IAAAC,EAAAC,EAAC,OAAsC,QAAtCD,EAAwB,QAAxBC,EAAOlJ,KAAK4G,oBAAY,IAAAsC,OAAA,EAAjBA,EAAmBF,oBAAY,IAAAC,GAAAA,CAAI,CAAC,YAAIb,GAAU,IAAAe,EAAC,MAAMf,SAASrI,EAAEqJ,cAAc3I,GAAGT,KAAKoB,MAAM,IAAIrB,IAAIU,GAAG,YAAYV,EAAE+E,OAAO/E,EAAEsJ,gBAAgB,OAAOtJ,EAAE,MAAM0C,EAAE1C,EAAEsJ,gBAAgBC,UAAWvJ,GAAG,aAAaA,EAAE+E,MAAM,MAAM/E,EAAEwJ,kBAAiBC,EAAAA,EAAAA,GAAEzJ,EAAEwJ,mBAAmB9I,IAAI,MAAMV,EAAE0J,MAAM,YAAY1J,EAAE0J,OAAO,eAAe1J,EAAE2J,cAAe,GAAGjH,EAAE,EAAE,OAAO1C,EAAE,MAAM+B,EAAE/B,EAAE4J,QAAQ,OAAO7H,EAAEuH,iBAAiBvH,EAAEuH,gBAAgBO,OAAOnH,EAAE,GAAgC,QAA9B0G,EAACnJ,KAAK6J,gCAAwB,IAAAV,IAA7BnJ,KAAK6J,yBAA2B,IAAIC,SAAQ9J,KAAK6J,yBAAyBE,IAAIjI,EAAErB,GAAGqB,GAAG/B,CAAC,CAAC,mBAAIgH,GAAiB,IAAAiD,EAAC,OAAwB,QAAxBA,EAAOhK,KAAK4G,oBAAY,IAAAoD,OAAA,EAAjBA,EAAmBjD,eAAe,CAAC,oBAAIG,GAAkB,IAAA+C,EAAC,OAAwB,QAAxBA,EAAOjK,KAAK4G,oBAAY,IAAAqD,OAAA,EAAjBA,EAAmB/C,gBAAgB,CAAC,sBAAIT,GAAoB,IAAAyD,EAAC,OAAwB,QAAxBA,EAAOlK,KAAK4G,oBAAY,IAAAsD,OAAA,EAAjBA,EAAmBzD,kBAAkB,CAAC,2BAAI0D,GAAyB,IAAAC,EAAC,OAAyC,QAAzCA,EAAOpK,KAAKiG,MAAMkE,+BAAuB,IAAAC,EAAAA,EAAE,UAAU,CAAC,4BAAIC,GAA2B,OAAO,MAAMrK,KAAK+G,iBAAiB/G,KAAK+G,gBAAgBuD,SAAS,CAAC,aAAIA,GAAY,OAAOtK,KAAKiG,MAAMqE,SAAS,CAAC,iBAAIC,GAAgB,OAAO,MAAMvK,KAAK8I,oBAAoB9I,KAAK8I,kBAAkBwB,SAAS,CAAC,eAAIE,GAAc,MAAMzK,EAAE,CAAC,EAAE,OAAOC,KAAKqK,2BAA2BtK,EAAE0K,mBAAkB,GAAI,MAAMzK,KAAK8I,mBAAmB9I,KAAK8I,kBAAkBwB,YAAYvK,EAAE2K,eAAc,GAAI3K,CAAC,CAAC,YAAI4K,GAAU,IAAAC,EAAAC,EAAC,SAA0B,QAAjBD,EAAA5K,KAAK4G,oBAAY,IAAAgE,GAAjBA,EAAmBD,UAAgC,QAAxBE,EAAE7K,KAAK8I,yBAAiB,IAAA+B,GAAtBA,EAAwBF,UAAU3K,KAAK+E,iBAAiB4F,SAAS,CAAC,qBAAIG,GAAmB,IAAAC,EAAAC,EAAC,OAA2C,QAA3CD,EAAwB,QAAxBC,EAAOhL,KAAK4G,oBAAY,IAAAoE,OAAA,EAAjBA,EAAmBF,yBAAiB,IAAAC,EAAAA,EAAE,CAAC,CAAC,gBAAIhH,GAAc,IAAAkH,EAAC,OAAwB,QAAxBA,EAAOjL,KAAK4G,oBAAY,IAAAqE,OAAA,EAAjBA,EAAmBlH,YAAY,CAAC,QAAIuC,GAAO,OAAOtG,KAAKiG,MAAMK,IAAI,CAAC,kBAAI4E,GAAiB,OAAOlL,KAAKiG,MAAMiF,cAAc,CAAC,eAAI5C,GAAa,IAAA6C,EAAC,OAAiB,QAAjBA,EAAOnL,KAAKiG,aAAK,IAAAkF,OAAA,EAAVA,EAAY7C,WAAW,CAAC,UAAI8C,GAAS,MAAM,WAAWpL,KAAKiG,MAAMjG,KAAKiG,MAAMmF,OAAO,IAAI,CAAC,qBAAIC,GAAoB,OAAOrL,KAAKiG,MAAMoF,iBAAiB,CAAC,gBAAIC,GAAe,OAAOtL,KAAKiG,MAAMqF,YAAY,CAAC,2BAAIC,GAA0B,MAAM,4BAA4BvL,KAAKiG,MAAMjG,KAAKiG,MAAMsF,wBAAwBvL,KAAKiG,MAAMK,KAAKhF,gBAAgB,CAAC,sBAAIkK,GAAoB,IAAAC,EAAC,OAAwB,QAAxBA,EAAOzL,KAAK4G,oBAAY,IAAA6E,OAAA,EAAjBA,EAAmBD,kBAAkB,CAAC,gCAAIE,GAA8B,IAAAC,EAAC,OAAwB,QAAxBA,EAAO3L,KAAK4G,oBAAY,IAAA+E,OAAA,EAAjBA,EAAmBD,4BAA4B,CAAC,oBAAIE,GAAkB,IAAAC,EAAC,OAAwB,QAAxBA,EAAO7L,KAAK4G,oBAAY,IAAAiF,OAAA,EAAjBA,EAAmBD,gBAAgB,CAAC,uBAAIE,GAAqB,IAAAC,EAAC,MAAMhM,EAAEC,KAAKsG,KAAK0F,QAAQvL,EAAmB,QAAlBsL,EAAC/L,KAAK4G,oBAAY,IAAAmF,OAAA,EAAjBA,EAAmBD,oBAAoB,GAAG,IAAI/L,EAAE,OAAOU,EAAE,MAAMgC,EAAEwJ,KAAKC,KAAKzL,EAAE0L,wBAAwBpM,GAAG,OAAO,IAAIqM,EAAAA,EAAE3L,EAAE4L,6BAA6B5J,EAAEhC,EAAE6L,wBAAwB,CAAC,cAAIxL,GAAY,IAAAyL,EAAAC,EAAC,OAAoC,QAApCD,EAAwB,QAAxBC,EAAOxM,KAAK4G,oBAAY,IAAA4F,OAAA,EAAjBA,EAAmB1L,kBAAU,IAAAyL,EAAAA,EAAE,CAAC,CAAC,kBAAIE,GAAgB,IAAAC,EAAAC,EAAC,OAA0C,QAA1CD,EAAwB,QAAxBC,EAAO3M,KAAK4G,oBAAY,IAAA+F,OAAA,EAAjBA,EAAmBC,wBAAgB,IAAAF,EAAAA,EAAE,CAAC,CAAC,wBAAIG,GAAsB,IAAAC,EAAAC,EAAC,OAA8C,QAA9CD,EAAwB,QAAxBC,EAAO/M,KAAK4G,oBAAY,IAAAmG,OAAA,EAAjBA,EAAmBC,4BAAoB,IAAAF,EAAAA,EAAE,CAAC,CAAC,6BAAIG,GAA2B,IAAAC,EAAAC,EAAC,OAAmD,QAAnDD,EAAwB,QAAxBC,EAAOnN,KAAK4G,oBAAY,IAAAuG,OAAA,EAAjBA,EAAmBF,iCAAyB,IAAAC,EAAAA,EAAE,CAAC,CAAC,mBAAIE,GAAkB,OAAOpN,KAAK4G,aAAawG,eAAe,CAACC,YAAAA,CAAatN,GAAE,IAAAuN,EAAC,MAAM7M,EAAmB,QAAlB6M,EAACtN,KAAK4G,oBAAY,IAAA0G,OAAA,EAAjBA,EAAmBjG,aAAa,IAAI5G,EAAE,OAAOZ,EAAAA,EAAAA,MAAI,MAAMkK,IAAItH,EAAE8K,OAAOzL,GAAGrB,EAAE+M,mBAAmB,MAAM,OAAO/M,EAAEgN,OAAOhL,EAAE1C,EAAE2N,KAAK5L,CAAC,CAAC6L,SAAAA,CAAU5N,GAAW,IAAA6N,EAAA,IAATnL,EAACoL,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAC,KAAK/L,EAAC+L,UAAAC,OAAA,EAAAD,UAAA,QAAAE,EAAE,MAAMlO,EAAmB,QAAlB+N,EAAC5N,KAAK4G,oBAAY,IAAAgH,OAAA,EAAjBA,EAAmBvG,aAAa,IAAIxH,EAAE,OAAOmO,EAAAA,GAAE,GAAI,OAADlM,QAAC,IAADA,IAAAA,EAAImM,EAAAA,IAAElO,aAAamO,EAAAA,EAAE,CAAC,MAAMnE,IAAItJ,EAAE8M,OAAOlL,GAAGxC,EAAEsO,oBAAoBrM,EAAEW,GAAG,OAAOzC,KAAKiG,MAAMmI,eAAerO,GAAGsO,KAAMtO,GAAGF,EAAEyO,aAAa7N,EAAEV,IAAKsC,CAAC,CAAC,IAAIA,GAAEkM,EAAAA,EAAAA,IAAExO,GAAG,GAAG,IAAIsC,EAAEyL,OAAO,OAAOE,EAAAA,GAAE,GAAG3L,EAAE,aAAa5B,EAAAA,EAAE,CAAC,MAAMV,EAAEsC,EAAE,GAAG,OAAMmM,EAAAA,EAAAA,GAAExO,KAAKoB,MAAMuC,YAAY5D,EAAE,GAAG0O,WAAWhM,GAAG,CAAC,MAAMhC,EAAEV,EAAEiD,IAAKjD,GAAGA,EAAE2N,MAAO3D,IAAItH,EAAE8K,OAAOlL,GAAGxC,EAAEsO,oBAAoBrM,EAAE,MAAM,OAAOjC,EAAE6O,QAAQjM,EAAEhC,GAAG4B,CAAC,CAACA,EAAEtC,EAAEiD,IAAKjD,IAAGyO,EAAAA,EAAAA,GAAExO,KAAKoB,MAAMuC,YAAY5D,EAAE0O,WAAWhM,GAAI,CAAC,IAAGkM,EAAAA,EAAAA,IAAEtM,EAAE,IAAI,CAAC,MAAMtC,EAAEsC,GAAG0H,IAAItJ,EAAE8M,OAAOvM,GAAGnB,EAAEsO,oBAAoBrM,EAAEW,GAAG,OAAO5C,EAAEyO,aAAa7N,EAAEV,GAAGiB,CAAC,CAAC,OAAOgN,EAAAA,EAAC,CAACY,iBAAAA,GAAmB,IAAAC,EAAkB,QAAjBA,EAAA7O,KAAK4G,oBAAY,IAAAiI,GAAc,QAAdA,EAAjBA,EAAmBxH,oBAAY,IAAAwH,GAA/BA,EAAiCC,OAAO,CAACC,iBAAAA,CAAkBhP,EAAEU,GAAE,IAAAuO,EAAC,OAAwB,QAAxBA,EAAOhP,KAAK4G,oBAAY,IAAAoI,OAAA,EAAjBA,EAAmBD,kBAAkBhP,EAAEU,EAAE,CAACwO,uBAAAA,CAAwBlP,EAAEU,GAAE,IAAAyO,EAAC,OAAwB,QAAxBA,EAAOlP,KAAK4G,oBAAY,IAAAsI,OAAA,EAAjBA,EAAmBD,wBAAwBlP,EAAEU,EAAE,CAAC0O,4BAAAA,CAA6BpP,GAAGC,KAAK4G,aAAauI,6BAA6BpP,EAAE,CAACqP,8BAAAA,CAA+BrP,GAAGC,KAAK4G,aAAawI,+BAA+BrP,EAAE,CAACsP,2BAAAA,GAA6B,IAAAC,EAAAC,EAAuC,QAAtCD,GAAAC,EAAAvP,KAAKiG,OAAMoJ,mCAA2B,IAAAC,GAAtCA,EAAAE,KAAAD,EAA0C,CAACE,gBAAAA,CAAiB1P,EAAEU,EAAEqB,GAAE,IAAA4N,EAAC,MAAM7P,GAAEqE,EAAAA,EAAAA,IAAEnE,EAAE,CAACqI,SAAS3H,EAAEkP,OAAO7N,IAAI,GAAI,OAADjC,QAAC,IAADA,GAAAA,EAAG+P,MAAM,CAAC,MAAM7P,EAAEF,EAAE+P,MAAM7P,EAAE,GAAGA,EAAE,GAAG,IAAIA,EAAE,GAAGA,EAAE,GAAG,IAAIA,EAAE,GAAGA,EAAE,GAAG,GAAG,CAAC,GAAG,MAAMF,GAAG,MAAMY,GAAgC,QAA/BiP,EAAE1P,KAAK6J,gCAAwB,IAAA6F,GAA7BA,EAA+BG,IAAIpP,GAAG,CAAC,MAAMqB,EAAE9B,KAAK6J,yBAAyBxJ,IAAII,GAAG4B,EAAEtC,EAAE0O,WAAW3M,GAAGd,EAAE,IAAIyB,EAAAA,EAAE,GAAGzB,EAAE8O,iBAAiB,CAACzN,IAAIrB,EAAE+O,iBAAiB,CAAC,MAAMlQ,EAAEmQ,QAAQ,SAAShP,EAAEiP,QAAQ,CAAC,OAAOpQ,CAAC,CAACqQ,qBAAAA,CAAsBnQ,EAAEU,EAAEgC,EAAEX,GAAG,OAAOqO,EAAAA,EAAAA,IAAEpQ,GAACoD,EAAAA,EAAAA,GAAA,CAAEiF,SAAS3H,EAAEkP,OAAOlN,GAAKX,GAAG,CAACsO,kBAAAA,CAAmBrQ,EAAEU,GAAE,IAAA4P,EAAC,OAAwB,QAAxBA,EAAOrQ,KAAK4G,oBAAY,IAAAyJ,OAAA,EAAjBA,EAAmBD,mBAAmBrQ,EAAEU,EAAE,CAAC6P,qBAAAA,CAAsBvQ,EAAEU,GAAE,IAAA8P,EAAkB,QAAjBA,EAAAvQ,KAAK4G,oBAAY,IAAA2J,GAAjBA,EAAmBD,sBAAsBvQ,EAAEU,EAAE,CAAC+P,aAAAA,GAAgB,MAAMxQ,KAAKkH,kBAAkBlH,KAAKkH,iBAAiBuJ,SAAS,CAACC,8BAAAA,CAA+B3Q,GAAE,IAAA4Q,EAAC,OAAwB,QAAxBA,EAAO3Q,KAAK4G,oBAAY,IAAA+J,OAAA,EAAjBA,EAAmBD,+BAA+B3Q,EAAE,CAAC4I,qBAAAA,GAAwB,MAAM5I,EAAEC,KAAKiG,MAAMK,KAAKoC,aAAa1I,KAAK4G,aAAagK,kBAAkB7Q,EAAEC,KAAKiG,MAAMK,KAAKhF,oBAAoBtB,KAAKyI,qBAAqB1I,IAAIC,KAAK4G,aAAaiK,sBAAsB,CAACrI,yBAAAA,IAA6BxI,KAAK8I,mBAAmB9I,KAAK+G,kBAAkB/G,KAAK8Q,YAAWxM,EAAAA,EAAAA,IAAG,IAAItE,KAAKmK,wBAA0B,KAAK,OAAOnK,KAAK+Q,cAAcC,GAAGhR,KAAKmK,yBAAyB,IAAI,WAAWnK,KAAK8Q,WAAW,EAACxM,EAAAA,EAAAA,IAAG,IAAItE,KAAK4G,aAAaqK,eAAiBlR,GAAGC,KAAKkR,2BAA2BnR,GAAIgB,EAAAA,KAAGuD,EAAAA,EAAAA,IAAG,IAAItE,KAAK4G,aAAauK,cAAgB,IAAInR,KAAKkR,2BAA2BlR,KAAK4G,aAAaqK,kBAAmBD,GAAG,MAAM,IAAI,OAAOhR,KAAK8Q,WAAW,EAAC1M,EAAAA,EAAAA,IAAG,IAAIpE,KAAKwF,WAAazF,GAAGC,KAAKkR,2BAA2BnR,GAAIgB,EAAAA,KAAGuD,EAAAA,EAAAA,IAAG,IAAItE,KAAK4G,aAAauK,cAAgB,IAAInR,KAAKkR,2BAA2BlR,KAAKwF,cAAewL,GAAG,MAAM,SAAQlP,EAAAA,EAAAA,IAAE9B,KAAKmK,2BAA4BpJ,EAAAA,IAAG,CAACmQ,0BAAAA,CAA2BnR,GAAGA,EAAEC,KAAKoR,4BAA4BpR,KAAKqR,2BAA2BtR,EAAEC,KAAK+F,uBAAuB/F,KAAKoR,4BAA4B,KAAK,CAACC,0BAAAA,CAA2BtR,EAAEU,GAAG,MAAMgC,EAAEzC,KAAKiG,MAAMK,KAAKhF,iBAAiB,IAAIvB,EAAEuB,iBAAiBgQ,OAAO7O,GAAG,CAAC,KAAIf,EAAAA,EAAAA,IAAE3B,EAAE0C,GAAG,OAAO1C,GAAEiE,EAAAA,EAAAA,IAAEjE,EAAE0C,EAAE,CAAC,OAAO8O,EAAAA,EAAAA,IAAExR,EAAEU,EAAE+Q,EAAAA,GAAExR,KAAK4G,aAAauK,cAAc,CAACC,2BAAAA,CAA4BrR,GAAG,MAAMC,KAAK8I,mBAAmB9I,KAAK8I,kBAAkB2I,UAAU1R,GAAG,MAAMC,KAAK+G,iBAAiB/G,KAAK+G,gBAAgB0K,UAAU1R,EAAE,IAAGA,EAAAA,EAAAA,GAAE,EAAC6D,EAAAA,EAAAA,OAAKiB,EAAEH,UAAU,YAAO,IAAQ3E,EAAAA,EAAAA,GAAE,EAAC6D,EAAAA,EAAAA,IAAE,CAACa,eAAc,KAAMI,EAAEH,UAAU,aAAQ,IAAQ3E,EAAAA,EAAAA,GAAE,EAAC6D,EAAAA,EAAAA,OAAKiB,EAAEH,UAAU,QAAQ,OAAM3E,EAAAA,EAAAA,GAAE,EAAC6D,EAAAA,EAAAA,OAAKiB,EAAEH,UAAU,eAAe,OAAM3E,EAAAA,EAAAA,GAAE,EAAC6D,EAAAA,EAAAA,IAAE,CAAC8N,UAAS,KAAM7M,EAAEH,UAAU,eAAe,OAAM3E,EAAAA,EAAAA,GAAE,EAAC6D,EAAAA,EAAAA,OAAKiB,EAAEH,UAAU,WAAW,OAAM3E,EAAAA,EAAAA,GAAE,EAAC6D,EAAAA,EAAAA,IAAE,CAACa,eAAc,KAAMI,EAAEH,UAAU,4BAAuB,IAAQ3E,EAAAA,EAAAA,GAAE,EAAC6D,EAAAA,EAAAA,IAAE,CAACa,eAAc,KAAMI,EAAEH,UAAU,yCAAoC,IAAQ3E,EAAAA,EAAAA,GAAE,EAAC6D,EAAAA,EAAAA,IAAE,CAACa,eAAc,KAAMI,EAAEH,UAAU,oBAAe,IAAQ3E,EAAAA,EAAAA,GAAE,EAAC6D,EAAAA,EAAAA,IAAE,CAACa,eAAc,KAAMI,EAAEH,UAAU,8BAAyB,IAAQ3E,EAAAA,EAAAA,GAAE,EAAC6D,EAAAA,EAAAA,IAAE,CAACa,eAAc,KAAMI,EAAEH,UAAU,+BAA0B,IAAQ3E,EAAAA,EAAAA,GAAE,EAAC6D,EAAAA,EAAAA,IAAE,CAACa,eAAc,KAAMI,EAAEH,UAAU,gCAA2B,IAAQ3E,EAAAA,EAAAA,GAAE,EAAC6D,EAAAA,EAAAA,IAAE,CAACa,eAAc,KAAMI,EAAEH,UAAU,iCAA4B,IAAQ3E,EAAAA,EAAAA,GAAE,EAAC6D,EAAAA,EAAAA,IAAE,CAACa,eAAc,KAAMI,EAAEH,UAAU,yBAAoB,IAAQ3E,EAAAA,EAAAA,GAAE,EAAC6D,EAAAA,EAAAA,IAAE,CAACa,eAAc,KAAMI,EAAEH,UAAU,uBAAkB,IAAQ3E,EAAAA,EAAAA,GAAE,EAAC6D,EAAAA,EAAAA,OAAKiB,EAAEH,UAAU,kBAAkB,OAAM3E,EAAAA,EAAAA,GAAE,EAAC6D,EAAAA,EAAAA,OAAKiB,EAAEH,UAAU,mBAAmB,OAAM3E,EAAAA,EAAAA,GAAE,EAAC6D,EAAAA,EAAAA,OAAKiB,EAAEH,UAAU,qBAAqB,OAAM3E,EAAAA,EAAAA,GAAE,EAAC6D,EAAAA,EAAAA,IAAE,CAACa,eAAc,KAAMI,EAAEH,UAAU,yBAAoB,IAAQ3E,EAAAA,EAAAA,GAAE,EAAC6D,EAAAA,EAAAA,OAAKiB,EAAEH,UAAU,0BAA0B,OAAM3E,EAAAA,EAAAA,GAAE,EAAC6D,EAAAA,EAAAA,OAAKiB,EAAEH,UAAU,kBAAa,IAAQ3E,EAAAA,EAAAA,GAAE,EAAC6D,EAAAA,EAAAA,OAAKiB,EAAEH,UAAU,2BAA2B,OAAM3E,EAAAA,EAAAA,GAAE,EAAC6D,EAAAA,EAAAA,OAAKiB,EAAEH,UAAU,YAAY,OAAM3E,EAAAA,EAAAA,GAAE,EAAC6D,EAAAA,EAAAA,OAAKiB,EAAEH,UAAU,gBAAgB,OAAM3E,EAAAA,EAAAA,GAAE,EAAC6D,EAAAA,EAAAA,OAAKiB,EAAEH,UAAU,cAAc,OAAM3E,EAAAA,EAAAA,GAAE,EAAC6D,EAAAA,EAAAA,OAAKiB,EAAEH,UAAU,WAAW,OAAM3E,EAAAA,EAAAA,GAAE,EAAC6D,EAAAA,EAAAA,OAAKiB,EAAEH,UAAU,oBAAoB,OAAM3E,EAAAA,EAAAA,GAAE,EAAC6D,EAAAA,EAAAA,OAAKiB,EAAEH,UAAU,eAAe,OAAM3E,EAAAA,EAAAA,GAAE,EAAC6D,EAAAA,EAAAA,OAAKiB,EAAEH,UAAU,OAAO,OAAM3E,EAAAA,EAAAA,GAAE,EAAC6D,EAAAA,EAAAA,OAAKiB,EAAEH,UAAU,iBAAiB,OAAM3E,EAAAA,EAAAA,GAAE,EAAC6D,EAAAA,EAAAA,OAAKiB,EAAEH,UAAU,cAAc,OAAM3E,EAAAA,EAAAA,GAAE,EAAC6D,EAAAA,EAAAA,OAAKiB,EAAEH,UAAU,SAAS,OAAM3E,EAAAA,EAAAA,GAAE,EAAC6D,EAAAA,EAAAA,OAAKiB,EAAEH,UAAU,oBAAoB,OAAM3E,EAAAA,EAAAA,GAAE,EAAC6D,EAAAA,EAAAA,OAAKiB,EAAEH,UAAU,uBAAkB,IAAQ3E,EAAAA,EAAAA,GAAE,EAAC6D,EAAAA,EAAAA,OAAKiB,EAAEH,UAAU,eAAe,OAAM3E,EAAAA,EAAAA,GAAE,EAAC6D,EAAAA,EAAAA,OAAKiB,EAAEH,UAAU,6BAAwB,IAAQ3E,EAAAA,EAAAA,GAAE,EAAC6D,EAAAA,EAAAA,IAAE,CAAC8N,UAAS,KAAM7M,EAAEH,UAAU,sBAAsB,MAAMG,GAAE9E,EAAAA,EAAAA,GAAE,EAACkB,EAAAA,EAAAA,GAAE,6DAA6D4D,GAAG,MAAMmM,EAAE,yB,mCCA95Z,MAAMvQ,EAAE,WAAWZ,EAAE,WAAWwC,EAAE,WAAWtC,EAAE,UAAU+B,EAAE,UAAU,SAASb,EAAER,GAAG,MAAMZ,EAAE,GAAG,IAAI,IAAIwC,EAAE,EAAEtC,EAAEU,EAAEqN,OAAOzL,EAAEtC,EAAEsC,IAAI,CAAC,IAAItC,EAAEU,EAAEkR,WAAWtP,GAAGtC,EAAE,IAAIF,EAAE+R,KAAK7R,GAAGA,EAAE,KAAKF,EAAE+R,KAAK,IAAI7R,GAAG,EAAE,IAAI,GAAGA,GAAGA,EAAE,OAAOA,GAAG,MAAMF,EAAE+R,KAAK,IAAI7R,GAAG,GAAG,IAAIA,GAAG,EAAE,GAAG,IAAI,GAAGA,IAAIsC,IAAItC,EAAE,QAAQ,KAAKA,IAAI,GAAG,KAAKU,EAAEkR,WAAWtP,IAAIxC,EAAE+R,KAAK,IAAI7R,GAAG,GAAG,IAAIA,GAAG,GAAG,GAAG,IAAIA,GAAG,EAAE,GAAG,IAAI,GAAGA,GAAG,CAAC,OAAO,IAAI8R,WAAWhS,EAAE,CAAC,MAAM4C,EAAE3C,WAAAA,CAAYW,GAAGT,KAAK8R,MAAMrR,EAAET,KAAK+R,UAAU,EAAE/R,KAAKgS,MAAM,GAAGhS,KAAKiS,MAAM,CAACA,IAAAA,GAAO,OAAOjS,KAAKgS,MAAM,GAAGhS,KAAK+R,UAAU,EAAE/R,IAAI,CAAC8P,gBAAAA,CAAiBrP,GAAG,MAAMZ,EAAE,GAAG,IAAI,MAAMwC,KAAK5B,EAAEyR,MAAM7P,GAAGxC,EAAE+R,KAAK,OAAOvP,IAAI,IAAIxC,EAAE+R,KAAK,YAAYvP,KAAI,IAAKxC,EAAE+R,KAAK,aAAa,IAAIvP,EAAExC,EAAE+R,KAAK,KAAK/R,EAAE+R,KAAKvP,EAAE8P,SAAS,KAAKnS,KAAKoS,OAAOnR,EAAEpB,EAAEwS,KAAK,KAAK,CAACC,cAAAA,CAAe7R,GAAG,MAAMZ,EAAE0S,WAAWC,KAAK/R,GAAGT,KAAKoS,OAAO,IAAIP,WAAWhS,EAAE4S,QAAQ,CAAC1C,gBAAAA,CAAiBtP,GAAGT,KAAKoS,OAAOP,WAAWW,KAAK/R,GAAG,CAACiS,gBAAAA,CAAiBjS,GAAG,OAAOT,KAAKoS,OAAOnR,EAAER,GAAG,CAAC2R,MAAAA,CAAO3R,GAAG,OAAOT,KAAKgS,MAAMJ,KAAKnR,GAAGT,KAAK+R,WAAWtR,EAAEqN,OAAO9N,IAAI,CAACiQ,MAAAA,GAAS,MAAMxP,EAAE,IAAIoR,WAAW7R,KAAK+R,WAAW,IAAIlS,EAAE,EAAE,IAAI,MAAMwC,KAAKrC,KAAKgS,MAAMvR,EAAEsJ,IAAI1H,EAAExC,GAAGA,GAAGwC,EAAEyL,OAAO,OAAO9N,KAAKiS,OAAOjS,KAAK2S,UAAUlS,EAAET,KAAK8R,MAAM,CAACa,SAAAA,CAAU1R,GAAM,IAAJwB,EAACoL,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAC,EAAG,MAAMnK,EAAEzC,EAAE,IAAI2C,EAAEnB,EAAEX,EAAE,WAAWd,EAAE,EAAE,GAAG0C,EAAEoK,QAAQ,GAAG,CAAC,MAAMzL,EAAE,CAACI,EAAEhC,EAAEZ,EAAE,WAAW4C,EAAE5C,EAAE,WAAW4C,EAAE,EAAE,WAAWA,EAAEhC,EAAE,YAAYV,EAAEkB,EAAEa,EAAE/B,EAAE+N,OAAO,GAAG,IAAIpK,EAAE,EAAE,IAAI1C,EAAE,GAAG,WAAWA,IAAIc,EAAEd,GAAG,EAAE,CAAC,MAAMc,EAAEd,EAAEC,EAAElB,EAAE+B,IAAI/B,EAAE+B,EAAE,IAAI,GAAGW,EAAE1C,EAAE+B,EAAE,IAAI/B,EAAE+B,EAAE,IAAI,GAAG8B,EAAE3C,EAAEpB,GAAG4C,EAAE5C,GAAG,IAAI,IAAIyE,EAAEjC,EAAEqB,GAAGE,EAAE,WAAWU,EAAEA,GAAG,GAAGA,IAAI,GAAG,MAAMJ,EAAE,MAAMI,EAAEvD,EAAEuD,IAAI,GAAGjC,EAAEqB,GAAGQ,EAAEzD,GAAGM,EAAEN,GAAG,IAAI,WAAWiD,EAAEA,EAAE,EAAE,CAAC,CAACE,GAAGvB,EAAE,IAAI,EAAEA,EAAE,KAAK,KAAKA,EAAE,IAAI,EAAEA,EAAE,KAAK,KAAKA,EAAE,IAAI,GAAGA,EAAE,KAAK,KAAKA,EAAE,IAAI,GAAGA,EAAE,KAAK,IAAI,UAAU,CAACuB,EAAEA,EAAE3C,EAAE6M,OAAO,WAAW,MAAMxJ,EAAErD,EAAE6M,OAAO,EAAE,KAAK9M,GAAGsD,EAAEtD,GAAG,EAAE,CAAC,MAAMP,EAAEO,EAAEnB,EAAE6D,EAAEjD,IAAIiD,EAAEjD,EAAE,IAAI,GAAGqB,EAAE4B,EAAEjD,EAAE,IAAIiD,EAAEjD,EAAE,IAAI,GAAGmD,EAAEA,GAAG/D,EAAEwC,GAAGP,EAAEO,GAAG,KAAK,WAAWuB,EAAEA,GAAG,GAAGA,IAAI,GAAGA,GAAG,MAAMA,GAAG7D,IAAI6D,IAAI,IAAI7D,GAAG,IAAI,UAAU,CAAC,KAAKiB,EAAE0C,EAAEoK,SAAS9M,EAAG4C,GAAGF,EAAE1C,GAAGc,EAAE8B,EAAEA,GAAG,GAAGA,IAAI,GAAGA,GAAG,MAAMA,GAAGnD,IAAImD,IAAI,IAAInD,GAAG,IAAI,WAAW,OAAOmD,GAAGA,IAAI,GAAGA,IAAI,MAAMA,GAAG/D,EAAE,cAAc+D,IAAI,IAAI/D,GAAG,IAAI+D,GAAGA,IAAI,GAAGA,IAAI,MAAMA,GAAGvB,EAAE,cAAcuB,IAAI,IAAIvB,GAAG,IAAIuB,GAAGA,IAAI,GAAGA,EAAE,EAAEA,EAAE,WAAWA,CAAC,E,mCCA18D,MAAM7D,EAAED,WAAAA,CAAYC,EAAE+B,EAAErB,EAAEiD,EAAE7D,EAAEyE,GAAGtE,KAAKsB,iBAAiBvB,EAAEC,KAAKoB,MAAMU,EAAE9B,KAAK4S,mBAAmBnS,EAAET,KAAK6S,iBAAiBnP,EAAE1D,KAAK6D,KAAKhE,EAAEG,KAAK8D,KAAKQ,CAAC,CAAC,aAAIL,GAAY,OAAOjE,KAAK4S,mBAAmB3O,SAAS,CAAC,oBAAIE,GAAmB,OAAOnE,KAAK4S,mBAAmBzO,gBAAgB,CAAC,gBAAIJ,GAAe,OAAO/D,KAAK6S,kBAAkB,E,iJCAqR,MAAMvO,EAAEA,IAAI,IAAIjC,EAAE,cAAciC,EAAExE,WAAAA,GAAcoB,SAAS2M,WAAW7N,KAAKqL,mBAAkB,EAAGrL,KAAK8S,8BAA6B,CAAE,CAACC,UAAAA,GAAa7R,MAAM6R,cAAahS,EAAAA,EAAAA,IAAEf,KAAKoB,QAAQpB,KAAKiI,oBAAoBjI,KAAKgT,2BAA2B,CAAC,8BAAMA,GAA2B,MAAMtP,EAAE,IAAIuP,gBAAgBnR,EAAE4B,EAAEwP,OAAOlT,KAAK8Q,YAAWjR,EAAAA,EAAAA,IAAG,IAAI6D,EAAEyP,gBAAiB1S,EAAAA,EAAAA,IAAG,SAAA2S,EAAA,OAA6B,QAA7BA,EAAIpT,KAAKsG,KAAK+M,uBAAe,IAAAD,OAAA,EAAzBA,EAA2BE,sBAAsBxR,IAAG/B,EAAAA,EAAAA,IAAE+B,GAAG,MAAMW,GAAEzB,EAAAA,EAAAA,IAAEhB,KAAKoB,MAAMpB,KAAKsG,KAAKiN,gBAAgBvT,KAAK8S,8BAA8B,GAAGrQ,EAAE,MAAMA,CAAC,GAAG,OAAOiB,EAAAA,EAAAA,GAAE,EAAC5B,EAAAA,EAAAA,OAAKO,EAAEqC,UAAU,YAAO,IAAQhB,EAAAA,EAAAA,GAAE,EAAC5B,EAAAA,EAAAA,OAAKO,EAAEqC,UAAU,yBAAoB,GAAQrC,GAAEqB,EAAAA,EAAAA,GAAE,EAACjB,EAAAA,EAAAA,GAAE,qCAAqCJ,GAAGA,E,+NCAlK,IAAIX,EAAE,cAAcjB,EAAAA,EAAEX,WAAAA,CAAYC,GAAGmB,MAAMnB,GAAGC,KAAKwT,WAAW,KAAKxT,KAAKyT,aAAa,KAAKzT,KAAK0T,kBAAiB,EAAG1T,KAAK+E,iBAAiB,IAAI9D,EAAAA,EAAEjB,KAAK2T,iBAAiB,IAAIV,eAAe,CAACjN,UAAAA,GAAY,IAAA4N,EAAAC,EAAC,MAAM9T,EAAEiF,EAAAA,GAAE8O,mBAAmB1S,MAAMX,EAAE6F,KAAKxE,GAAG9B,KAAK+T,gBAAgBhQ,aAAatB,GAAGzC,KAAKqB,SAASC,iBAAiBzB,EAAE+S,mBAAmBvQ,GAAGP,EAAEwC,EAA0B,QAAzBsP,EAAC5T,KAAK+T,eAAelQ,YAAI,IAAA+P,GAAAA,EAAKhQ,EAA0B,QAAzBiQ,EAAC7T,KAAK+T,eAAejQ,YAAI,IAAA+P,GAAAA,EAAK9S,EAAE,IAAIiD,EAAAA,EAAEnE,EAAEY,EAAE4B,EAAG,IAAII,EAAG6B,EAAEV,GAAG5D,KAAKyT,aAAa,IAAIvP,EAAAA,EAAE,CAAC7C,QAAQN,EAAEyC,SAASzD,IAAIC,KAAKwT,WAAW1R,EAAE8Q,mBAAmB3O,UAAU+P,aAAajU,GAAGC,KAAK+E,iBAAiB0C,IAAK,IAAI,CAACzH,KAAKiU,yBAAyBjU,KAAKkU,cAAgB,IAAIlU,KAAK0T,kBAAiB,EAAI1S,EAAAA,IAAGhB,KAAK+E,iBAAiBoP,QAAS,KAAKnU,KAAKwT,WAAW7I,UAAU3K,KAAK0T,iBAAmB,KAAK1T,KAAKwT,WAAWY,SAAU,IAAIpU,KAAKqU,oBAAqBrU,KAAK2T,iBAAiBT,QAAQoB,MAAM5Q,EAAAA,IAAG1D,KAAK0T,kBAAiB,GAAK1S,EAAAA,GAAE,CAACZ,OAAAA,GAAUJ,KAAK2T,iBAAiBR,QAAQnT,KAAK+E,iBAAiB3E,UAAUJ,KAAKG,QAAQH,KAAKwT,YAAW/Q,EAAAA,EAAAA,IAAEzC,KAAKwT,YAAYxT,KAAKyT,cAAa5T,EAAAA,EAAAA,IAAEG,KAAKyT,cAAczT,KAAKuH,KAAK,UAAU,KAAK,CAAC,YAAIoD,GAAW,OAAO3K,KAAK0T,kBAAkB1T,KAAK+E,iBAAiB4F,UAAU3K,KAAKwT,WAAW7I,QAAQ,CAAC,qBAAI4J,GAAoB,OAAO,MAAMvU,KAAKiU,0BAA0B,MAAMjU,KAAKkU,YAAY,CAAC,kBAAIM,GAAiB,MAAM,WAAWxU,KAAK+T,eAAe/T,KAAK+T,eAAe3I,OAAO,IAAI,CAAC,2BAAIqJ,GAA0B,MAAM,2BAA2BzU,KAAK+T,eAAe/T,KAAK+T,eAAeW,uBAAuB,IAAI,CAAC,gBAAIR,GAAe,MAAM,gBAAgBlU,KAAK+T,eAAe/T,KAAK+T,eAAeY,YAAY,IAAI,CAAC,gBAAIC,GAAe,OAAOxQ,EAAAA,EAAAA,GAAEpE,KAAK+T,eAAe,CAAC,eAAIc,GAAc,MAAM,eAAe7U,KAAK+T,eAAe/T,KAAK+T,eAAee,WAAW,IAAI,CAAC,4BAAIb,GAA0B,IAAAc,EAAAC,EAAC,MAAMR,eAAezU,EAAE0U,wBAAwBhU,EAAEoU,YAAY/S,EAAE8S,aAAanS,GAAGzC,KAAK,IAAIH,EAAG,OAADE,QAAC,IAADA,OAAC,EAADA,EAAG4J,QAAQ,GAAG,MAAMlJ,IAAK,OAADZ,QAAC,IAADA,IAAAA,EAAI,IAAI0R,EAAAA,GAAE1R,EAAEoV,OAAMrR,EAAAA,EAAAA,IAAE/D,EAAEoV,MAAMxU,EAAEwU,QAAQ,MAAMnT,IAAK,OAADjC,QAAC,IAADA,IAAAA,EAAI,IAAI0R,EAAAA,GAAE1R,EAAEiV,WAAwC,QAA9BC,EAAa,QAAbC,EAACnV,EAAEiV,kBAAU,IAAAE,OAAA,EAAZA,EAAcE,aAAapT,UAAE,IAAAiT,EAAAA,EAAEjT,GAAG,MAAMW,EAAE,CAAE,OAAD5C,QAAC,IAADA,IAAAA,EAAI,IAAI0R,EAAAA,GAAE,MAAMxR,EAAE,MAAMF,EAAEoV,OAAO,KAAKpV,EAAEoV,MAAMpV,EAAEoV,MAAMlV,EAAE0C,GAAEmB,EAAAA,EAAAA,IAAE/D,EAAEoV,MAAMxS,EAAE,CAAC,OAAO5C,CAAC,CAAC,kBAAIkU,GAAiB,OAAO/T,KAAKqB,QAAQ+F,aAAa,CAACqJ,OAAAA,GAAUzQ,KAAK0T,kBAAiB,CAAE,CAACvT,KAAAA,GAAQH,KAAKyT,aAAatT,QAAQH,KAAKqB,QAAQ8T,yBAAyB,CAAC,uBAAMd,GAAoB,MAAMnB,OAAOnT,GAAGC,KAAK2T,kBAAkBtS,QAAQZ,EAAE+S,WAAW/Q,EAAEyR,aAAarU,EAAEoU,yBAAyBvQ,GAAG1D,KAAK,IAAGqC,EAAAA,EAAAA,IAAEtC,GAAG,MAAM2D,GAAG,MAAM7D,GAAG,IAAIY,EAAE2U,kBAAkB,aAAa3S,EAAE2R,SAAU,IAAIpU,KAAKG,QAASJ,GAAG,IAAI,MAAM+B,QAAQ9B,KAAK+E,iBAAiB4C,WAAW3H,KAAKyT,aAAa5R,qBAAqB6B,EAAE7D,EAAEE,IAAI,OAAOsC,EAAAA,EAAAA,IAAEtC,SAAS0C,EAAE2R,SAAU,KAAK3T,EAAE4U,0BAA2BtV,GAAG+B,EAAE+N,IAAI9P,KAAOA,EAAE,CAAC,MAAMiB,GAAG,OAAOsD,EAAAA,EAAAA,IAAEtD,GAAGc,EAAAA,EAAEwT,UAAUtV,MAAMuV,KAAK,+BAADrS,OAAgClC,GAAI,CAACwU,MAAMxU,UAAUyB,EAAE2R,SAAU,KAAK3T,EAAEgV,0BAAyB,IAAM1V,EAAE,CAAC,IAAGA,EAAAA,EAAAA,GAAE,EAACgB,EAAAA,EAAAA,IAAE,CAAC0D,eAAc,KAAM/C,EAAEgD,UAAU,eAAU,IAAQ3E,EAAAA,EAAAA,GAAE,EAACgB,EAAAA,EAAAA,OAAKW,EAAEgD,UAAU,WAAW,OAAM3E,EAAAA,EAAAA,GAAE,EAACgB,EAAAA,EAAAA,OAAKW,EAAEgD,UAAU,oBAAoB,OAAM3E,EAAAA,EAAAA,GAAE,EAACgB,EAAAA,EAAAA,OAAKW,EAAEgD,UAAU,iBAAiB,OAAM3E,EAAAA,EAAAA,GAAE,EAACgB,EAAAA,EAAAA,OAAKW,EAAEgD,UAAU,0BAA0B,OAAM3E,EAAAA,EAAAA,GAAE,EAACgB,EAAAA,EAAAA,OAAKW,EAAEgD,UAAU,eAAe,OAAM3E,EAAAA,EAAAA,GAAE,EAACgB,EAAAA,EAAAA,OAAKW,EAAEgD,UAAU,eAAe,OAAM3E,EAAAA,EAAAA,GAAE,EAACgB,EAAAA,EAAAA,OAAKW,EAAEgD,UAAU,cAAc,OAAM3E,EAAAA,EAAAA,GAAE,EAACgB,EAAAA,EAAAA,OAAKW,EAAEgD,UAAU,2BAA2B,OAAM3E,EAAAA,EAAAA,GAAE,EAACgB,EAAAA,EAAAA,OAAKW,EAAEgD,UAAU,iBAAiB,OAAM3E,EAAAA,EAAAA,GAAE,EAACgB,EAAAA,EAAAA,OAAKW,EAAEgD,UAAU,wBAAmB,GAAQhD,GAAE3B,EAAAA,EAAAA,GAAE,EAACW,EAAAA,EAAAA,GAAE,yDAAyDgB,E,mLCA5sH,IAAIkC,EAAE,cAAcnB,EAAAA,EAAEiT,kBAAkBpR,EAAAA,EAAEqR,iBAAiB7T,EAAAA,EAAE8T,aAAanV,EAAAA,MAAM,6BAAIoV,GAA4B,OAAM,CAAE,CAAC/V,WAAAA,CAAYC,GAAGmB,MAAMnB,GAAGC,KAAK+E,iBAAiB,IAAIhE,EAAAA,EAAEf,KAAKoB,MAAM,KAAKpB,KAAK8V,OAAO,IAAI,CAAC9P,UAAAA,GAAahG,KAAK+V,OAAOzB,MAAOvU,IAAI,GAAG,2BAA2BA,EAAE6E,KAAK,KAAAoR,EAAC,MAAMvV,EAAET,KAAKoB,OAAOpB,KAAKoB,MAAM6U,IAAI,QAAQnU,GAAY,QAAVkU,EAAAhW,KAAKoB,aAAK,IAAA4U,OAAA,EAAVA,EAAYE,QAAO,WAAWrW,EAAAA,EAAEyV,UAAUtV,MAAMwV,MAAM,aAAY,+CAAAtS,OAAgDpB,EAAC,YAAAoB,OAAWzC,EAAC,MAAKV,EAAE,GAAI,CAACK,OAAAA,GAAUJ,KAAK+E,kBAAiB1C,EAAAA,EAAAA,IAAErC,KAAK+E,iBAAiB,CAAC,eAAIuD,GAAa,IAAA6N,EAAAC,EAAAC,EAAAC,EAAC,OAA0B,QAApBH,EAAW,QAAXC,EAACpW,KAAKoB,aAAK,IAAAgV,OAAA,EAAVA,EAAYG,eAAO,IAAAJ,EAAAA,EAAE,IAA4B,QAA3BE,EAAc,QAAdC,EAAGtW,KAAK8V,cAAM,IAAAQ,OAAA,EAAXA,EAAahO,mBAAW,IAAA+N,EAAAA,EAAE,EAAE,CAAC,aAAI/L,GAAY,OAAOtK,KAAKwW,YAAYxW,KAAKyW,WAAW,CAAC,eAAIjM,GAAc,OAAOxK,KAAK0W,gBAAgB,CAAC,iBAAInM,GAAe,IAAAoM,EAAC,OAAO3W,KAAKsK,YAAW,KAAe,QAAbqM,EAAG3W,KAAKoB,aAAK,IAAAuV,OAAA,EAAVA,EAAYpM,cAAa,CAAC,YAAII,GAAU,IAAAiM,EAAC,SAA8B,QAAtBA,EAAC5W,KAAK+E,wBAAgB,IAAA6R,IAArBA,EAAuBjM,YAAW3K,KAAK6W,aAAa,CAAC,oBAAIC,GAAmB,OAAO9W,KAAK2K,SAAS,EAAE,CAAC,CAAC,mBAAIoM,GAAkB,OAAO/W,KAAKsK,SAAS,CAAC,WAAI0M,GAAS,IAAAC,EAAC,OAAM,KAAe,QAAbA,EAAGjX,KAAKoB,aAAK,IAAA6V,OAAA,EAAVA,EAAYD,QAAO,CAAC,WAAIA,CAAQjX,GAAGC,KAAKkX,gBAAgB,UAAUnX,EAAE,CAAC,yBAAIoX,GAAwB,OAAM,CAAE,CAAC,8BAAIC,GAA4B,IAAAC,EAAC,MAAMtX,EAAEC,KAAKsG,KAAKwO,WAAWrU,EAAY,QAAX4W,EAACrX,KAAKoB,aAAK,IAAAiW,OAAA,EAAVA,EAAYC,qBAAqB,OAAOvX,IAAIU,IAAIV,EAAEmV,aAAazU,GAAG8W,OAAO,CAACd,SAAAA,GAAW,IAAAe,EAAAC,EAAC,MAAM1X,EAAEC,KAAKoB,OAAO,wBAAwBpB,KAAKoB,MAAMpB,KAAKoB,MAAMsW,oBAAoB,KAAK,OAAO1X,KAAKgX,UAAmB,QAAZQ,EAAExX,KAAKoB,aAAK,IAAAoW,OAAA,EAAVA,EAAYG,SAAQ3X,KAAK8V,SAAS9V,KAAK8V,OAAOxL,YAAoB,QAAXmN,EAAEzX,KAAKsG,YAAI,IAAAmR,OAAA,EAATA,EAAWG,SAAOxT,EAAAA,EAAAA,IAAErE,IAAIC,KAAKmX,uBAAuBnX,KAAKoX,6BAA4B,CAAE,CAACV,cAAAA,GAAgB,IAAAmB,EAAAC,EAAC,MAAM/X,EAAa,QAAX8X,EAAA7X,KAAK8V,cAAM,IAAA+B,GAAXA,EAAavN,UAAUtK,KAAK8V,OAAOtL,YAAY,CAAC,EAAe,QAANsN,EAAL9X,KAAOsG,YAAI,IAAAwR,GAANA,EAAQF,QAAQ7X,EAAEgY,cAAa,GAAI/X,KAAKoB,OAAOpB,KAAKoB,MAAMuW,SAAS5X,EAAEiY,gBAAe,GAAI,MAAMlW,EAAE9B,KAAKoB,OAAO,wBAAwBpB,KAAKoB,MAAMpB,KAAKoB,MAAMsW,oBAAoB,KAAK,OAAOtT,EAAAA,EAAAA,IAAEtC,IAAI9B,KAAKmX,wBAAwBpX,EAAE0K,mBAAkB,GAAIzK,KAAKoX,6BAA6BrX,EAAEkY,6BAA4B,GAAIjY,KAAKgX,UAAUjX,EAAEmY,gBAAe,GAAInY,CAAC,CAAC8W,UAAAA,GAAa,OAAM,CAAE,IAAG9W,EAAAA,EAAAA,GAAE,EAAC2D,EAAAA,EAAAA,IAAE,CAACgO,UAAS,KAAM9N,EAAEc,UAAU,4BAA4B,OAAM3E,EAAAA,EAAAA,GAAE,EAAC2D,EAAAA,EAAAA,OAAKE,EAAEc,UAAU,YAAO,IAAQ3E,EAAAA,EAAAA,GAAE,EAAC2D,EAAAA,EAAAA,OAAKE,EAAEc,UAAU,cAAc,OAAM3E,EAAAA,EAAAA,GAAE,EAAC2D,EAAAA,EAAAA,OAAKE,EAAEc,UAAU,aAAQ,IAAQ3E,EAAAA,EAAAA,GAAE,EAAC2D,EAAAA,EAAAA,OAAKE,EAAEc,UAAU,cAAS,IAAQ3E,EAAAA,EAAAA,GAAE,EAAC2D,EAAAA,EAAAA,IAAE,CAACgO,UAAS,KAAM9N,EAAEc,UAAU,YAAY,OAAM3E,EAAAA,EAAAA,GAAE,EAAC2D,EAAAA,EAAAA,IAAE,CAACgO,UAAS,KAAM9N,EAAEc,UAAU,cAAc,OAAM3E,EAAAA,EAAAA,GAAE,EAAC2D,EAAAA,EAAAA,IAAE,CAACgO,UAAS,KAAM9N,EAAEc,UAAU,gBAAgB,OAAM3E,EAAAA,EAAAA,GAAE,EAAC2D,EAAAA,EAAAA,IAAE,CAACoB,KAAKqT,QAAQzG,UAAS,KAAM9N,EAAEc,UAAU,WAAW,OAAM3E,EAAAA,EAAAA,GAAE,EAAC2D,EAAAA,EAAAA,IAAE,CAACgO,UAAS,KAAM9N,EAAEc,UAAU,mBAAmB,OAAM3E,EAAAA,EAAAA,GAAE,EAAC2D,EAAAA,EAAAA,OAAKE,EAAEc,UAAU,kBAAkB,OAAM3E,EAAAA,EAAAA,GAAE,EAAC2D,EAAAA,EAAAA,OAAKE,EAAEc,UAAU,UAAU,OAAM3E,EAAAA,EAAAA,GAAE,EAAC2D,EAAAA,EAAAA,IAAE,CAACgO,UAAS,KAAM9N,EAAEc,UAAU,wBAAwB,OAAM3E,EAAAA,EAAAA,GAAE,EAAC2D,EAAAA,EAAAA,IAAE,CAACgO,UAAS,KAAM9N,EAAEc,UAAU,6BAA6B,MAAMd,GAAE7D,EAAAA,EAAAA,GAAE,EAACiB,EAAAA,EAAAA,GAAE,gCAAgC4C,E","sources":["../node_modules/@arcgis/core/views/3d/layers/graphics/QueryEngineCache.js","../node_modules/@arcgis/core/views/3d/layers/graphics/QueryEngine.js","../node_modules/@arcgis/core/views/3d/layers/support/attributeUtils.js","../node_modules/@arcgis/core/views/3d/layers/graphics/Graphics3DFeatureProcessor.js","../node_modules/@arcgis/core/arcade/functions/hash.js","../node_modules/@arcgis/core/views/3d/layers/graphics/QueryEngineContext.js","../node_modules/@arcgis/core/views/3d/layers/LayerView3D.js","../node_modules/@arcgis/core/views/3d/layers/support/FeatureVisibilityFilter.js","../node_modules/@arcgis/core/views/layers/LayerView.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import{baseArrayMemory as e,baseObjectMemory as t}from\"../../../../core/memoryEstimations.js\";class s{constructor(e){this._cache=e.newCache(\"QueryEngine\",null,-1)}clear(){this._cache.clear()}destroy(){this._cache.destroy()}get(e){return this._cache.get(e)?.items}put(e,t){this._cache.put(e,new c(t))}get test(){}}class c{constructor(e){this.items=e}get cachedMemory(){return this.items.reduce(((e,t)=>e+t.usedMemory),e+t)}}export{s as QueryEngineCache};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Accessor.js\";import{property as r}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as s}from\"../../../../core/accessorSupport/decorators/subclass.js\";import n from\"../../../../geometry/Extent.js\";import{featureGeometryTypeKebabDictionary as o}from\"../../../../geometry/support/typeUtils.js\";import{QueryEngine as a}from\"../../../../layers/graphics/data/QueryEngine.js\";import u from\"../../../../layers/support/FieldsIndex.js\";import i from\"../../../../rest/support/FeatureSet.js\";import y from\"../../../../rest/support/Query.js\";import{createFeatureIdInfo as c}from\"../../../2d/layers/features/layerAdapters/featureServiceUtils.js\";import{QueryEngineCache as l}from\"./QueryEngineCache.js\";const p=a;let h=class extends t{constructor(e){super(e),this._dataQueryEngineInstance=null}destroy(){this.clear()}get layer(){return this.context.layer}get spatialReference(){return this.context.spatialReference}get _queryGeometryType(){switch(this.layer.geometryType){case\"multipoint\":case\"point\":case\"polygon\":case\"polyline\":return this.layer.geometryType;case\"mesh\":return\"polygon\";default:return}}get defaultQueryJSON(){return new y({outSpatialReference:this.spatialReference}).toJSON()}clear(){return!!this._dataQueryEngineInstance&&(this._dataQueryEngineInstance.destroy(),this._dataQueryEngineInstance=null,!0)}async executeQueryForIdSet(e,t,r){return this._dataQueryEngine.executeQueryForIdSet(this._ensureQueryJSON(e,t),r)}async executeQueryForCount(e,t){return this._dataQueryEngine.executeQueryForCount(this._ensureQueryJSON(e),t)}async executeQueryForExtent(e,t){const{count:r,extent:s}=await this._dataQueryEngine.executeQueryForExtent(this._ensureQueryJSON(e),t);return{count:r,extent:n.fromJSON(s)}}async executeQueryForIds(e,t){return this._dataQueryEngine.executeQueryForIds(this._ensureQueryJSON(e),t)}async executeQueryForLatestObservations(e,t){const r=await this._dataQueryEngine.executeQueryForLatestObservations(this._ensureQueryJSON(e),t),s=i.fromJSON(r);return s.features.forEach((e=>{e.layer=this.layer,e.sourceLayer=this.layer})),s}async executeQuery(e,t){const r=await this._dataQueryEngine.executeQuery(this._ensureQueryJSON(e),t),s=i.fromJSON(r);return s.features.forEach((e=>{e.layer=this.layer,e.sourceLayer=this.layer})),s}_ensureQueryJSON(e,t){let r=this.defaultQueryJSON;if(null!=e&&(\"outSpatialReference\"in e&&!e.outSpatialReference&&(e.outSpatialReference=this.spatialReference),r=e.toJSON(),r.cacheHint=!0),null!=t){const e=t.geometries.map((e=>e.toJSON())).reduce(((e,t)=>(e.rings=e.rings.concat(t.rings),e)));r={...r,cacheHint:!0,sceneFilter:{...t,geometry:e}}}return r}get _dataQueryEngine(){if(this._dataQueryEngineInstance)return this._dataQueryEngineInstance;const{priority:e,layer:t}=this,r=\"timeInfo\"in t&&t.timeInfo?.toJSON()||null,s=c(t),n=o.toJSON(this._queryGeometryType),a=t.fieldsIndex?.toJSON()||new u([]),i=this.spatialReference.toJSON(),{hasZ:y,hasM:h,featureStore:m,scheduler:f,memoryController:d}=this.context,Q=new l(d);return this._dataQueryEngineInstance=new p({hasZ:y,hasM:h,geometryType:n,fieldsIndex:a,timeInfo:r,spatialReference:i,featureIdInfo:s,featureStore:m,scheduler:f,cache:Q,priority:e}),this._dataQueryEngineInstance}};e([r({constructOnly:!0})],h.prototype,\"context\",void 0),e([r({constructOnly:!0})],h.prototype,\"priority\",void 0),e([r()],h.prototype,\"layer\",null),e([r()],h.prototype,\"spatialReference\",null),e([r()],h.prototype,\"_queryGeometryType\",null),e([r()],h.prototype,\"defaultQueryJSON\",null),h=e([s(\"esri.views.3d.layers.graphics.QueryEngine\")],h);export{h as QueryEngine};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nfunction n(n,t,e){if(!e||null==t)return null;if(!n)return r(t,e);const o=n.get(e);return o?t[o.name]:null}function r(n,r){const t=r.toLowerCase();for(const e in n)if(e.toLowerCase()===t)return n[e];return null}export{n as attributeLookup};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../Graphic.js\";import{XXH as i}from\"../../../../arcade/functions/hash.js\";import{neverReached as r}from\"../../../../core/compilerUtils.js\";import{makeHandle as s}from\"../../../../core/handleUtils.js\";import{destroyMaybe as n}from\"../../../../core/maybe.js\";import a from\"../../../../core/Promise.js\";import{logOnError as o}from\"../../../../core/promiseUtils.js\";import{watch as l,initial as p,when as d}from\"../../../../core/reactiveUtils.js\";import{property as u}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/Logger.js\";import\"../../../../core/RandomLCG.js\";import{subclass as h}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{diff as c}from\"../../../../core/accessorSupport/diffUtils.js\";import{UpdatingHandles as g}from\"../../../../core/support/UpdatingHandles.js\";import{canProject as y,project as m}from\"../../../../geometry/support/webMercatorUtils.js\";import{getRenderingInfo as f,getRenderingInfoAsync as b}from\"../../../../renderers/support/renderingInfoUtils.js\";import C from\"../../../../rest/support/Query.js\";import{matchRandomRotationExpression as E}from\"../../../../support/arcadeExpressionUtils.js\";import{DrapeSourceType as w}from\"../interfaces.js\";import{suspendResumeExtentOptimism as x}from\"./constants.js\";import{DisplayFeatureLimit as v}from\"./DisplayFeatureLimit.js\";import{Graphics3DCore as V}from\"./Graphics3DCore.js\";import{Graphics3DElevationAlignment as j}from\"./Graphics3DElevationAlignment.js\";import{Graphics3DFrustumVisibility as R}from\"./Graphics3DFrustumVisibility.js\";import{Graphics3DObjectStates as O}from\"./Graphics3DObjectStates.js\";import{Graphics3DScaleVisibility as S}from\"./Graphics3DScaleVisibility.js\";import{enlargeExtent as _}from\"./graphicUtils.js\";import{attributeLookup as U}from\"../support/attributeUtils.js\";import{FeatureVisibilityFilter as G}from\"../support/FeatureVisibilityFilter.js\";import{emptyHighlightHandle as I,normalizeHighlightTargetExceptQuery as P,isObjectId as A}from\"../support/highlightUtils.js\";import{UpdatePolicy as H}from\"../../webgl-engine/lib/UpdatePolicy.js\";import{defaultHighlightName as F}from\"../../../support/HighlightDefaults.js\";let D=class extends a{constructor(e){super(e),this.type=\"graphics-3d\",this._updatingHandles=new g,this.elevationFeatureExpressionEnabled=!1,this.scaleVisibilityEnabled=!1,this.filterVisibilityEnabled=!1,this.frustumVisibilityEnabled=!1,this.elevationAlignmentEnabled=!1,this.timeExtentEnabled=!1,this.setUidToIdOnAdd=!0,this.dataExtent=null,this.drapeSourceType=w.Features,this.preferredUpdatePolicy=H.ASYNC,this._suspendResumeExtent=null}initialize(){const e=this.owner,t=(this.filterVisibilityEnabled||this.timeExtentEnabled)&&\"multipatch\"!==e.layer.geometryType,i=new V({owner:this,layer:this.layer,preferredUpdatePolicy:this.preferredUpdatePolicy,elevationFeatureExpressionEnabled:this.elevationFeatureExpressionEnabled,graphicSymbolSupported:!1,hasZ:e.hasZ,hasM:e.hasM,setUidToIdOnAdd:this.setUidToIdOnAdd,componentFactories:{deconflictor:t=>e.view.deconflictor.addGraphicsOwner(t),labeler:(t,i)=>e.view.labeler.addGraphicsOwner(t,i),elevationAlignment:this.elevationAlignmentEnabled?(t,i)=>new j({graphicsCoreOwner:this,graphicsCore:t,queryGraphicUIDsInExtent:i,elevationProvider:e.view.elevationProvider}):null,scaleVisibility:this.scaleVisibilityEnabled?(t,i)=>new S({graphicsCoreOwner:this,layer:this.layer,queryGraphicUIDsInExtent:i,graphicsCore:t,basemapTerrain:e.view.basemapTerrain}):null,filterVisibility:t?t=>new G({context:{...t,configuration:e}}):null,objectStates:e=>new O(e)}});this._set(\"graphicsCore\",i),this.frustumVisibilityEnabled&&this._set(\"frustumVisibility\",new R({graphicsCoreOwner:this})),this.elevationAlignment&&this._updatingHandles.add((()=>this.layer.elevationInfo),((e,t)=>{c(e,t)&&this._updatingHandles.addPromise(this.graphicsCore.elevationInfoChange())})),this._updatingHandles.add((()=>this.layer.labelsVisible),(()=>this.graphicsCore.updateVisibilityInfo())),this._updatingHandles.add((()=>this.layer.labelingInfo),((e,t)=>{c(e,t)&&this.graphicsCore.updateLabelingInfo()})),this._updatingHandles.add((()=>this.preferredUpdatePolicy),(e=>this.graphicsCore.preferredUpdatePolicy=e)),this.addResolvingPromise(this._initializeAsync())}async _initializeAsync(){await o(this.graphicsCore.initializePromise);const e=this.owner;this._updatingHandles.add((()=>this.renderer),(e=>this._updatingHandles.addPromise(this.graphicsCore.rendererChange(e)))),this._updatingHandles.add((()=>e.fullOpacity),(()=>this.graphicsCore.opacityChange())),this._setupSuspendResumeExtent(),this.updateClippingExtent&&(this._updatingHandles.add((()=>e.view.clippingArea),(()=>this._updateClippingExtent())),this._updateClippingExtent()),this.graphicsCore.startCreateGraphics(),this.graphicsCore.labelsEnabled&&await o(this.graphicsCore.updateLabelingInfo())}destroy(){this._updatingHandles.destroy(),this._set(\"frustumVisibility\",n(this.frustumVisibility)),this._set(\"graphicsCore\",n(this.graphicsCore)),this._set(\"owner\",null)}get layer(){return this.owner.layer}get layerViewUid(){return this.owner.layerViewUid}get dataUpdating(){return this.graphicsCore?.dataUpdating??!1}get renderer(){const{renderer:e,objectIdField:t}=this.layer;if(!e||!t||\"heatmap\"===e.type||!e.visualVariables)return e;const i=e.visualVariables.findIndex((e=>\"rotation\"===e.type&&null!=e.valueExpression&&E(e.valueExpression)===t&&(null==e.axis||\"heading\"===e.axis)&&\"geographic\"===e.rotationType));if(i<0)return e;const r=e.clone();return r.visualVariables?(r.visualVariables.splice(i,1),this._randomRotationRenderers??=new WeakMap,this._randomRotationRenderers.set(r,t),r):e}get scaleVisibility(){return this.graphicsCore?.scaleVisibility}get filterVisibility(){return this.graphicsCore?.filterVisibility}get elevationAlignment(){return this.graphicsCore?.elevationAlignment}get suspendResumeExtentMode(){return this.owner.suspendResumeExtentMode??\"computed\"}get scaleVisibilitySuspended(){return null!=this.scaleVisibility&&this.scaleVisibility.suspended}get suspended(){return this.owner.suspended}get legendEnabled(){return null==this.frustumVisibility||!this.frustumVisibility.suspended}get suspendInfo(){const e={};return this.scaleVisibilitySuspended&&(e.outsideScaleRange=!0),null!=this.frustumVisibility&&this.frustumVisibility.suspended&&(e.outsideOfView=!0),e}get updating(){return!!(this.graphicsCore?.updating||this.frustumVisibility?.updating||this._updatingHandles.updating)}get updatingRemaining(){return this.graphicsCore?.updatingRemaining??0}get featureStore(){return this.graphicsCore?.featureStore}get view(){return this.owner.view}get loadedGraphics(){return this.owner.loadedGraphics}get fullOpacity(){return this.owner?.fullOpacity}get filter(){return\"filter\"in this.owner?this.owner.filter:null}get slicePlaneEnabled(){return this.owner.slicePlaneEnabled}get updatePolicy(){return this.owner.updatePolicy}get featureSpatialReference(){return\"featureSpatialReference\"in this.owner?this.owner.featureSpatialReference:this.owner.view.spatialReference}get graphics3DGraphics(){return this.graphicsCore?.graphics3DGraphics}get graphics3DGraphicsByObjectID(){return this.graphicsCore?.graphics3DGraphicsByObjectID}get symbolUpdateType(){return this.graphicsCore?.symbolUpdateType}get displayFeatureLimit(){const e=this.view.quality,t=this.graphicsCore?.displayFeatureLimit;if(1===e)return t;const i=Math.ceil(t.maximumNumberOfFeatures*e);return new v(t.maximumTotalNumberOfVertices,i,t.averageSymbolComplexity)}get usedMemory(){return this.graphicsCore?.usedMemory??0}get loadedFeatures(){return this.graphicsCore?.numberOfGraphics??0}get usedMemoryPerFeature(){return this.graphicsCore?.usedMemoryPerGraphic??0}get unprocessedMemoryEstimate(){return this.graphicsCore?.unprocessedMemoryEstimate??0}get performanceInfo(){return this.graphicsCore.performanceInfo}maskOccludee(e){const t=this.graphicsCore?.objectStates;if(!t)return s();const{set:i,handle:r}=t.acquireOccludeeSet(null);return t.setUid(i,e.uid),r}highlight(e,i=null,r){const s=this.graphicsCore?.objectStates;if(!s)return I;if(r??=F,e instanceof C){const{set:t,handle:n}=s.acquireHighlightSet(r,i);return this.owner.queryObjectIds(e).then((e=>s.setObjectIds(t,e))),n}let n=P(e);if(0===n.length)return I;if(n[0]instanceof t){const e=n;if(null==U(this.layer.fieldsIndex,e[0].attributes,i)){const t=e.map((e=>e.uid)),{set:i,handle:n}=s.acquireHighlightSet(r,null);return s.setUids(i,t),n}n=e.map((e=>U(this.layer.fieldsIndex,e.attributes,i)))}if(A(n[0])){const e=n,{set:t,handle:a}=s.acquireHighlightSet(r,i);return s.setObjectIds(t,e),a}return I}resetObjectStates(){this.graphicsCore?.objectStates?.reset()}whenGraphicBounds(e,t){return this.graphicsCore?.whenGraphicBounds(e,t)}computeAttachmentOrigin(e,t){return this.graphicsCore?.computeAttachmentOrigin(e,t)}notifyGraphicGeometryChanged(e){this.graphicsCore.notifyGraphicGeometryChanged(e)}notifyGraphicVisibilityChanged(e){this.graphicsCore.notifyGraphicVisibilityChanged(e)}notifyContentGeometryUpdate(){this.owner.notifyContentGeometryUpdate?.()}getRenderingInfo(e,t,r){const s=f(e,{renderer:t,arcade:r});if(s?.color){const e=s.color;e[0]=e[0]/255,e[1]=e[1]/255,e[2]=e[2]/255}if(null!=s&&null!=t&&this._randomRotationRenderers?.has(t)){const r=this._randomRotationRenderers.get(t),n=e.attributes[r],a=new i(0);a.updateFloatArray([n]),a.updateUint8Array([173]),s.heading=8.381e-8*a.digest()}return s}getRenderingInfoAsync(e,t,i,r){return b(e,{renderer:t,arcade:i,...r})}getSymbolLayerSize(e,t){return this.graphicsCore?.getSymbolLayerSize(e,t)}setObjectIdVisibility(e,t){this.graphicsCore?.setObjectIdVisibility(e,t)}refreshFilter(){null!=this.filterVisibility&&this.filterVisibility.reapply()}getGraphics3DGraphicByObjectId(e){return this.graphicsCore?.getGraphics3DGraphicByObjectId(e)}_updateClippingExtent(){const e=this.owner.view.clippingArea;this.graphicsCore.setClippingExtent(e,this.owner.view.spatialReference)&&(this.updateClippingExtent(e)||this.graphicsCore.recreateAllGraphics())}_setupSuspendResumeExtent(){(this.frustumVisibility||this.scaleVisibility)&&this.addHandles(l((()=>this.suspendResumeExtentMode),(()=>{switch(this.removeHandles(M),this.suspendResumeExtentMode){case\"computed\":this.addHandles([l((()=>this.graphicsCore.computedExtent),(e=>this._updateSuspendResumeExtent(e)),p),l((()=>this.graphicsCore.extentPadding),(()=>this._updateSuspendResumeExtent(this.graphicsCore.computedExtent)))],M);break;case\"data\":this.addHandles([d((()=>this.dataExtent),(e=>this._updateSuspendResumeExtent(e)),p),l((()=>this.graphicsCore.extentPadding),(()=>this._updateSuspendResumeExtent(this.dataExtent)))],M);break;default:r(this.suspendResumeExtentMode)}}),p))}_updateSuspendResumeExtent(e){e?this._suspendResumeExtentChanged(this._extentToSuspendResumeRect(e,this._suspendResumeExtent)):this._suspendResumeExtentChanged(null)}_extentToSuspendResumeRect(e,t){const i=this.owner.view.spatialReference;if(!e.spatialReference.equals(i)){if(!y(e,i))return;e=m(e,i)}return _(e,t,x,this.graphicsCore.extentPadding)}_suspendResumeExtentChanged(e){null!=this.frustumVisibility&&this.frustumVisibility.setExtent(e),null!=this.scaleVisibility&&this.scaleVisibility.setExtent(e)}};e([u()],D.prototype,\"type\",void 0),e([u({constructOnly:!0})],D.prototype,\"owner\",void 0),e([u()],D.prototype,\"layer\",null),e([u()],D.prototype,\"layerViewUid\",null),e([u({readOnly:!0})],D.prototype,\"dataUpdating\",null),e([u()],D.prototype,\"renderer\",null),e([u({constructOnly:!0})],D.prototype,\"updateClippingExtent\",void 0),e([u({constructOnly:!0})],D.prototype,\"elevationFeatureExpressionEnabled\",void 0),e([u({constructOnly:!0})],D.prototype,\"graphicsCore\",void 0),e([u({constructOnly:!0})],D.prototype,\"scaleVisibilityEnabled\",void 0),e([u({constructOnly:!0})],D.prototype,\"filterVisibilityEnabled\",void 0),e([u({constructOnly:!0})],D.prototype,\"frustumVisibilityEnabled\",void 0),e([u({constructOnly:!0})],D.prototype,\"elevationAlignmentEnabled\",void 0),e([u({constructOnly:!0})],D.prototype,\"timeExtentEnabled\",void 0),e([u({constructOnly:!0})],D.prototype,\"setUidToIdOnAdd\",void 0),e([u()],D.prototype,\"scaleVisibility\",null),e([u()],D.prototype,\"filterVisibility\",null),e([u()],D.prototype,\"elevationAlignment\",null),e([u({constructOnly:!0})],D.prototype,\"frustumVisibility\",void 0),e([u()],D.prototype,\"suspendResumeExtentMode\",null),e([u()],D.prototype,\"dataExtent\",void 0),e([u()],D.prototype,\"scaleVisibilitySuspended\",null),e([u()],D.prototype,\"suspended\",null),e([u()],D.prototype,\"legendEnabled\",null),e([u()],D.prototype,\"suspendInfo\",null),e([u()],D.prototype,\"updating\",null),e([u()],D.prototype,\"updatingRemaining\",null),e([u()],D.prototype,\"featureStore\",null),e([u()],D.prototype,\"view\",null),e([u()],D.prototype,\"loadedGraphics\",null),e([u()],D.prototype,\"fullOpacity\",null),e([u()],D.prototype,\"filter\",null),e([u()],D.prototype,\"slicePlaneEnabled\",null),e([u()],D.prototype,\"drapeSourceType\",void 0),e([u()],D.prototype,\"updatePolicy\",null),e([u()],D.prototype,\"preferredUpdatePolicy\",void 0),e([u({readOnly:!0})],D.prototype,\"displayFeatureLimit\",null),D=e([h(\"esri.views.3d.layers.graphics.Graphics3DFeatureProcessor\")],D);const M=\"suspendResumeExtentMode\";export{D as Graphics3DFeatureProcessor};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nconst t=2654435761,s=2246822519,n=3266489917,e=668265263,r=374761393;function h(t){const s=[];for(let n=0,e=t.length;n<e;n++){let e=t.charCodeAt(n);e<128?s.push(e):e<2048?s.push(192|e>>6,128|63&e):e<55296||e>=57344?s.push(224|e>>12,128|e>>6&63,128|63&e):(n++,e=65536+((1023&e)<<10|1023&t.charCodeAt(n)),s.push(240|e>>18,128|e>>12&63,128|e>>6&63,128|63&e))}return new Uint8Array(s)}class i{constructor(t){this._seed=t,this._totallen=0,this._bufs=[],this.init()}init(){return this._bufs=[],this._totallen=0,this}updateFloatArray(t){const s=[];for(const n of t)isNaN(n)?s.push(\"NaN\"):n===1/0?s.push(\"Infinity\"):n===-1/0?s.push(\"-Infinity\"):0===n?s.push(\"0\"):s.push(n.toString(16));this.update(h(s.join(\"\")))}updateIntArray(t){const s=Int32Array.from(t);this.update(new Uint8Array(s.buffer))}updateUint8Array(t){this.update(Uint8Array.from(t))}updateWithString(t){return this.update(h(t))}update(t){return this._bufs.push(t),this._totallen+=t.length,this}digest(){const t=new Uint8Array(this._totallen);let s=0;for(const n of this._bufs)t.set(n,s),s+=n.length;return this.init(),this._xxHash32(t,this._seed)}_xxHash32(h,i=0){const o=h;let u=i+r&4294967295,a=0;if(o.length>=16){const n=[i+t+s&4294967295,i+s&4294967295,i+0&4294967295,i-t&4294967295],e=h,r=e.length-16;let o=0;for(a=0;(4294967280&a)<=r;a+=4){const r=a,h=e[r]+(e[r+1]<<8),i=e[r+2]+(e[r+3]<<8),u=h*s+(i*s<<16);let l=n[o]+u&4294967295;l=l<<13|l>>>19;const f=65535&l,p=l>>>16;n[o]=f*t+(p*t<<16)&4294967295,o=o+1&3}u=(n[0]<<1|n[0]>>>31)+(n[1]<<7|n[1]>>>25)+(n[2]<<12|n[2]>>>20)+(n[3]<<18|n[3]>>>14)&4294967295}u=u+h.length&4294967295;const l=h.length-4;for(;a<=l;a+=4){const t=a,s=o[t]+(o[t+1]<<8),r=o[t+2]+(o[t+3]<<8);u=u+(s*n+(r*n<<16))&4294967295,u=u<<17|u>>>15,u=(65535&u)*e+((u>>>16)*e<<16)&4294967295}for(;a<o.length;++a){u+=o[a]*r,u=u<<11|u>>>21,u=(65535&u)*t+((u>>>16)*t<<16)&4294967295}return u^=u>>>15,u=((65535&u)*s&4294967295)+((u>>>16)*s<<16),u^=u>>>13,u=((65535&u)*n&4294967295)+((u>>>16)*n<<16),u^=u>>>16,u<0?u+4294967296:u}}export{i as XXH};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nclass e{constructor(e,r,t,o,s,l){this.spatialReference=e,this.layer=r,this.resourceController=t,this._getFeatureStore=o,this.hasZ=s,this.hasM=l}get scheduler(){return this.resourceController.scheduler}get memoryController(){return this.resourceController.memoryController}get featureStore(){return this._getFeatureStore()}}export{e as QueryEngineContext};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../../chunks/tslib.es6.js\";import{makeHandle as s}from\"../../../core/handleUtils.js\";import{throwIfAborted as e}from\"../../../core/promiseUtils.js\";import{whenOnce as t}from\"../../../core/reactiveUtils.js\";import{property as r}from\"../../../core/accessorSupport/decorators/property.js\";import\"../../../core/has.js\";import\"../../../core/Logger.js\";import\"../../../core/RandomLCG.js\";import{subclass as i}from\"../../../core/accessorSupport/decorators/subclass.js\";import{supportsHeightModelInfo as p,rejectLayerError as a}from\"../../../geometry/support/heightModelInfoUtils.js\";const l=l=>{let n=class extends l{constructor(){super(...arguments),this.slicePlaneEnabled=!1,this.supportsHeightUnitConversion=!1}postscript(){super.postscript(),p(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}async _validateHeightModelInfo(){const o=new AbortController,r=o.signal;this.addHandles(s((()=>o.abort()))),await t((()=>this.view.defaultsFromMap?.heightModelInfoReady),r),e(r);const i=a(this.layer,this.view.heightModelInfo,this.supportsHeightUnitConversion);if(i)throw i}};return o([r()],n.prototype,\"view\",void 0),o([r()],n.prototype,\"slicePlaneEnabled\",void 0),n=o([i(\"esri.views.3d.layers.LayerView3D\")],n),n};export{l as LayerView3D};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../chunks/tslib.es6.js\";import t from\"../../../../core/Accessor.js\";import r from\"../../../../core/Logger.js\";import{removeMaybe as i,destroyMaybe as s}from\"../../../../core/maybe.js\";import{throwIfNotAbortError as o,throwIfAborted as n,throwIfAbortError as l}from\"../../../../core/promiseUtils.js\";import{initial as a}from\"../../../../core/reactiveUtils.js\";import{sqlAnd as u}from\"../../../../core/sql.js\";import{property as p}from\"../../../../core/accessorSupport/decorators/property.js\";import\"../../../../core/has.js\";import\"../../../../core/RandomLCG.js\";import{subclass as c}from\"../../../../core/accessorSupport/decorators/subclass.js\";import{UpdatingHandles as h}from\"../../../../core/support/UpdatingHandles.js\";import _ from\"../../../../layers/support/FeatureFilter.js\";import{getFloorFilterClause as d}from\"../../../../layers/support/floorFilterUtils.js\";import{QueryEngine as f}from\"../graphics/QueryEngine.js\";import{QueryEngineContext as m}from\"../graphics/QueryEngineContext.js\";import{TaskPriority as g}from\"../../../support/Scheduler.js\";let y=class extends t{constructor(e){super(e),this._frameTask=null,this._queryEngine=null,this._updateRequested=!0,this._updatingHandles=new h,this._abortController=new AbortController}initialize(){const e=g.FILTER_VISIBILITY,{layer:t,view:r}=this._configuration,{featureStore:i}=this.context,{spatialReference:s,resourceController:n}=r,l=this._configuration.hasZ??!1,u=this._configuration.hasM??!1,p=new m(s,t,n,(()=>i),l,u);this._queryEngine=new f({context:p,priority:e}),this._frameTask=r.resourceController.scheduler.registerTask(e),this._updatingHandles.add((()=>[this._compositedFeatureFilter,this._sceneFilter]),(()=>this._updateRequested=!0),a),this._updatingHandles.addWhen((()=>!this._frameTask.updating&&this._updateRequested),(()=>{this._frameTask.schedule((()=>this._updateVisibility()),this._abortController.signal).catch(o),this._updateRequested=!1}),a)}destroy(){this._abortController.abort(),this._updatingHandles.destroy(),this.clear(),this._frameTask=i(this._frameTask),this._queryEngine=s(this._queryEngine),this._set(\"context\",null)}get updating(){return this._updateRequested||this._updatingHandles.updating||this._frameTask.updating}get defaultVisibility(){return null==this._compositedFeatureFilter&&null==this._sceneFilter}get _featureFilter(){return\"filter\"in this._configuration?this._configuration.filter:null}get _effectiveDisplayFilter(){return\"effectiveDisplayFilter\"in this._configuration?this._configuration.effectiveDisplayFilter:null}get _sceneFilter(){return\"layerFilter\"in this._configuration?this._configuration.layerFilter:null}get _floorFilter(){return d(this._configuration)}get _timeExtent(){return\"timeExtent\"in this._configuration?this._configuration.timeExtent:null}get _compositedFeatureFilter(){const{_featureFilter:e,_effectiveDisplayFilter:t,_timeExtent:r,_floorFilter:i}=this;let s=e?.clone();if(null!=t&&(s??=new _,s.where=u(s.where,t.where)),null!=r&&(s??=new _,s.timeExtent=s.timeExtent?.intersection(r)??r),null!=i){s??=new _;const e=null==s.where||\"\"===s.where;s.where=e?i:u(s.where,i)}return s}get _configuration(){return this.context.configuration}reapply(){this._updateRequested=!0}clear(){this._queryEngine.clear(),this.context.clearFeaturesVisibility()}async _updateVisibility(){const{signal:e}=this._abortController,{context:t,_frameTask:i,_sceneFilter:s,_compositedFeatureFilter:o}=this;if(n(e),null==o&&null==s||0===t.getFeatureCount())return await i.schedule((()=>this.clear()),e);try{const r=await this._updatingHandles.addPromise(this._queryEngine.executeQueryForIdSet(o,s,e));return n(e),await i.schedule((()=>{t.updateFeatureVisibilities((e=>r.has(e)))}),e)}catch(a){return l(a),r.getLogger(this).warn(`FeatureFilter query failed: ${a}`,{error:a}),await i.schedule((()=>{t.setAllFeaturesVisibility(!0)}),e)}}};e([p({constructOnly:!0})],y.prototype,\"context\",void 0),e([p()],y.prototype,\"updating\",null),e([p()],y.prototype,\"defaultVisibility\",null),e([p()],y.prototype,\"_featureFilter\",null),e([p()],y.prototype,\"_effectiveDisplayFilter\",null),e([p()],y.prototype,\"_sceneFilter\",null),e([p()],y.prototype,\"_floorFilter\",null),e([p()],y.prototype,\"_timeExtent\",null),e([p()],y.prototype,\"_compositedFeatureFilter\",null),e([p()],y.prototype,\"_configuration\",null),e([p()],y.prototype,\"_updateRequested\",void 0),y=e([c(\"esri.views.3d.layers.support.FeatureVisibilityFilter\")],y);export{y as FeatureVisibilityFilter};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../chunks/tslib.es6.js\";import t from\"../../core/Accessor.js\";import r from\"../../core/Evented.js\";import i from\"../../core/Identifiable.js\";import s from\"../../core/Logger.js\";import{destroyMaybe as n}from\"../../core/maybe.js\";import l from\"../../core/Promise.js\";import{property as o}from\"../../core/accessorSupport/decorators/property.js\";import\"../../core/has.js\";import\"../../core/RandomLCG.js\";import{subclass as a}from\"../../core/accessorSupport/decorators/subclass.js\";import{UpdatingHandles as p}from\"../../core/support/UpdatingHandles.js\";import{validateScaleRange as d}from\"../support/layerViewUtils.js\";let u=class extends(i.IdentifiableMixin(l.EsriPromiseMixin(r.EventedMixin(t)))){get spatialReferenceSupported(){return!0}constructor(e){super(e),this._updatingHandles=new p,this.layer=null,this.parent=null}initialize(){this.when().catch((e=>{if(\"layerview:create-error\"!==e.name){const t=this.layer&&this.layer.id||\"no id\",r=this.layer?.title||\"no title\";s.getLogger(this).error(\"#resolve()\",`Failed to resolve layer view (layer title: '${r}', id: '${t}')`,e)}}))}destroy(){this._updatingHandles=n(this._updatingHandles)}get fullOpacity(){return(this.layer?.opacity??1)*(this.parent?.fullOpacity??1)}get suspended(){return this.destroyed||!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){return!this.suspended&&!0===this.layer?.legendEnabled}get updating(){return!(!this._updatingHandles?.updating&&!this.isUpdating())}get updatingProgress(){return this.updating?0:1}get updateSuspended(){return this.suspended}get visible(){return!0===this.layer?.visible}set visible(e){this._overrideIfSome(\"visible\",e)}get visibleAtCurrentScale(){return!0}get visibleAtCurrentTimeExtent(){const e=this.view.timeExtent,t=this.layer?.visibilityTimeExtent;return!e||!t||!e.intersection(t).isEmpty}canResume(){const e=this.layer&&\"effectiveScaleRange\"in this.layer?this.layer.effectiveScaleRange:null;return this.visible&&this.layer?.loaded&&this.parent&&!this.parent.suspended&&this.view?.ready&&d(e)&&this.visibleAtCurrentScale&&this.visibleAtCurrentTimeExtent||!1}getSuspendInfo(){const e=this.parent?.suspended?this.parent.suspendInfo:{},t=this;t.view?.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0);const r=this.layer&&\"effectiveScaleRange\"in this.layer?this.layer.effectiveScaleRange:null;return d(r)&&this.visibleAtCurrentScale||(e.outsideScaleRange=!0),this.visibleAtCurrentTimeExtent||(e.outsideVisibilityTimeExtent=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};e([o({readOnly:!0})],u.prototype,\"spatialReferenceSupported\",null),e([o()],u.prototype,\"view\",void 0),e([o()],u.prototype,\"fullOpacity\",null),e([o()],u.prototype,\"layer\",void 0),e([o()],u.prototype,\"parent\",void 0),e([o({readOnly:!0})],u.prototype,\"suspended\",null),e([o({readOnly:!0})],u.prototype,\"suspendInfo\",null),e([o({readOnly:!0})],u.prototype,\"legendEnabled\",null),e([o({type:Boolean,readOnly:!0})],u.prototype,\"updating\",null),e([o({readOnly:!0})],u.prototype,\"updatingProgress\",null),e([o()],u.prototype,\"updateSuspended\",null),e([o()],u.prototype,\"visible\",null),e([o({readOnly:!0})],u.prototype,\"visibleAtCurrentScale\",null),e([o({readOnly:!0})],u.prototype,\"visibleAtCurrentTimeExtent\",null),u=e([a(\"esri.views.layers.LayerView\")],u);export{u as default};\n"],"names":["s","constructor","e","this","_cache","newCache","clear","destroy","get","_this$_cache$get","items","put","t","c","test","cachedMemory","reduce","usedMemory","p","a","h","super","_dataQueryEngineInstance","layer","context","spatialReference","_queryGeometryType","geometryType","defaultQueryJSON","y","outSpatialReference","toJSON","executeQueryForIdSet","r","_dataQueryEngine","_ensureQueryJSON","executeQueryForCount","executeQueryForExtent","count","extent","n","fromJSON","executeQueryForIds","executeQueryForLatestObservations","i","features","forEach","sourceLayer","executeQuery","cacheHint","geometries","map","rings","concat","_objectSpread","sceneFilter","geometry","_t$timeInfo","_t$fieldsIndex","priority","timeInfo","o","fieldsIndex","u","hasZ","hasM","featureStore","m","scheduler","f","memoryController","d","Q","l","featureIdInfo","cache","constructOnly","prototype","toLowerCase","name","D","type","_updatingHandles","g","elevationFeatureExpressionEnabled","scaleVisibilityEnabled","filterVisibilityEnabled","frustumVisibilityEnabled","elevationAlignmentEnabled","timeExtentEnabled","setUidToIdOnAdd","dataExtent","drapeSourceType","w","Features","preferredUpdatePolicy","H","ASYNC","_suspendResumeExtent","initialize","owner","V","graphicSymbolSupported","componentFactories","deconflictor","view","addGraphicsOwner","labeler","elevationAlignment","j","graphicsCoreOwner","graphicsCore","queryGraphicUIDsInExtent","elevationProvider","scaleVisibility","S","basemapTerrain","filterVisibility","G","configuration","objectStates","O","_set","R","add","elevationInfo","addPromise","elevationInfoChange","labelsVisible","updateVisibilityInfo","labelingInfo","updateLabelingInfo","addResolvingPromise","_initializeAsync","initializePromise","renderer","rendererChange","fullOpacity","opacityChange","_setupSuspendResumeExtent","updateClippingExtent","clippingArea","_updateClippingExtent","startCreateGraphics","labelsEnabled","frustumVisibility","layerViewUid","dataUpdating","_this$graphicsCore$da","_this$graphicsCore","_this$_randomRotation","objectIdField","visualVariables","findIndex","valueExpression","E","axis","rotationType","clone","splice","_randomRotationRenderers","WeakMap","set","_this$graphicsCore2","_this$graphicsCore3","_this$graphicsCore4","suspendResumeExtentMode","_this$owner$suspendRe","scaleVisibilitySuspended","suspended","legendEnabled","suspendInfo","outsideScaleRange","outsideOfView","updating","_this$graphicsCore5","_this$frustumVisibili","updatingRemaining","_this$graphicsCore$up","_this$graphicsCore6","_this$graphicsCore7","loadedGraphics","_this$owner","filter","slicePlaneEnabled","updatePolicy","featureSpatialReference","graphics3DGraphics","_this$graphicsCore8","graphics3DGraphicsByObjectID","_this$graphicsCore9","symbolUpdateType","_this$graphicsCore0","displayFeatureLimit","_this$graphicsCore1","quality","Math","ceil","maximumNumberOfFeatures","v","maximumTotalNumberOfVertices","averageSymbolComplexity","_this$graphicsCore$us","_this$graphicsCore10","loadedFeatures","_this$graphicsCore$nu","_this$graphicsCore11","numberOfGraphics","usedMemoryPerFeature","_this$graphicsCore$us2","_this$graphicsCore12","usedMemoryPerGraphic","unprocessedMemoryEstimate","_this$graphicsCore$un","_this$graphicsCore13","performanceInfo","maskOccludee","_this$graphicsCore14","handle","acquireOccludeeSet","setUid","uid","highlight","_this$graphicsCore15","arguments","length","undefined","I","F","C","acquireHighlightSet","queryObjectIds","then","setObjectIds","P","U","attributes","setUids","A","resetObjectStates","_this$graphicsCore16","reset","whenGraphicBounds","_this$graphicsCore17","computeAttachmentOrigin","_this$graphicsCore18","notifyGraphicGeometryChanged","notifyGraphicVisibilityChanged","notifyContentGeometryUpdate","_this$owner$notifyCon","_this$owner2","call","getRenderingInfo","_this$_randomRotation2","arcade","color","has","updateFloatArray","updateUint8Array","heading","digest","getRenderingInfoAsync","b","getSymbolLayerSize","_this$graphicsCore19","setObjectIdVisibility","_this$graphicsCore20","refreshFilter","reapply","getGraphics3DGraphicByObjectId","_this$graphicsCore21","setClippingExtent","recreateAllGraphics","addHandles","removeHandles","M","computedExtent","_updateSuspendResumeExtent","extentPadding","_suspendResumeExtentChanged","_extentToSuspendResumeRect","equals","_","x","setExtent","readOnly","charCodeAt","push","Uint8Array","_seed","_totallen","_bufs","init","isNaN","toString","update","join","updateIntArray","Int32Array","from","buffer","updateWithString","_xxHash32","resourceController","_getFeatureStore","supportsHeightUnitConversion","postscript","_validateHeightModelInfo","AbortController","signal","abort","_this$view$defaultsFr","defaultsFromMap","heightModelInfoReady","heightModelInfo","_frameTask","_queryEngine","_updateRequested","_abortController","_this$_configuration$","_this$_configuration$2","FILTER_VISIBILITY","_configuration","registerTask","_compositedFeatureFilter","_sceneFilter","addWhen","schedule","_updateVisibility","catch","defaultVisibility","_featureFilter","_effectiveDisplayFilter","effectiveDisplayFilter","layerFilter","_floorFilter","_timeExtent","timeExtent","_s$timeExtent$interse","_s$timeExtent","where","intersection","clearFeaturesVisibility","getFeatureCount","updateFeatureVisibilities","getLogger","warn","error","setAllFeaturesVisibility","IdentifiableMixin","EsriPromiseMixin","EventedMixin","spatialReferenceSupported","parent","when","_this$layer","id","title","_this$layer$opacity","_this$layer2","_this$parent$fullOpac","_this$parent","opacity","destroyed","canResume","getSuspendInfo","_this$layer3","_this$_updatingHandle","isUpdating","updatingProgress","updateSuspended","visible","_this$layer4","_overrideIfSome","visibleAtCurrentScale","visibleAtCurrentTimeExtent","_this$layer5","visibilityTimeExtent","isEmpty","_this$layer6","_this$view","effectiveScaleRange","loaded","ready","_this$parent2","_t$view","viewNotReady","layerNotLoaded","outsideVisibilityTimeExtent","layerInvisible","Boolean"],"sourceRoot":""}