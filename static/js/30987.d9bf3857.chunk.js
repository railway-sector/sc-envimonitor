"use strict";(self.webpackChunksc_envimonitor=self.webpackChunksc_envimonitor||[]).push([[25090,30987,68707],{25090:(e,t,n)=>{n.r(t),n.d(t,{OperatorGeodeticDensifyByLength:()=>r,OperatorGeodeticDensifyCursor:()=>o});var s=n(68707),i=n(97799),a=n(82103);class r{getOperatorType(){return 10310}supportsCurves(){return!0}accelerateGeometry(e,t,n){return!1}canAccelerateGeometry(e){return!1}executeMany(e,t,n,s,i){return new o(e,n,s,t,-1,-1,i)}execute(e,t,n,a,r){const o=new s.S([e]),_=this.executeMany(o,t,n,a,r).next();return _||(0,i.d)("null output"),_}}class o extends s.G{constructor(e,t,n,s,a,r,o){super(),this.m_progressTracker=o,r>0&&(0,i.t)(""),4!==n&&a>0&&(0,i.t)(""),t||(0,i.a)(""),0===t.getCoordinateSystemType()&&(0,i.a)(""),s>0||a>0||(0,i.a)(""),this.m_index=-1,this.m_inputGeoms=e,this.m_spatialReference=t,this.m_curveType=n,this.m_maxLengthMeters=s,this.m_maxDeviationMeters=a,this.m_maxAngle=r}next(){{let e;for(;e=this.m_inputGeoms.next();)return(0,i.c)(e),this.m_index=this.m_inputGeoms.getGeometryID(),this.geodeticDensify(e);return null}}getGeometryID(){return this.m_index}tock(){return!0}getRank(){return 1}geodeticDensify(e){return(0,a.N)(e,this.m_spatialReference,this.m_curveType,this.m_maxLengthMeters,this.m_maxDeviationMeters,this.m_progressTracker)}}},30987:(e,t,n)=>{n.r(t),n.d(t,{OperatorGeodeticArea:()=>w});var s=n(89379),i=n(97799),a=n(63331),r=n(20265),o=n(82103),_=n(26871),h=n(21557),m=n(91523),c=n(88689),u=n(90465),l=n(35143),g=n(16364);n(49262),n(68707),n(25090);Symbol.dispose;class p{constructor(e,t,n,s){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:4;this.m_ptDistFrom=new _.P,this.m_segStartPt=new _.P,this.m_segEndPt=new _.P,this.m_geodeticLength=new o.P,this.m_az12=new o.P,this.m_minGeodeticDist=new o.P,this.m_segStartPt3d=new m.d,this.m_segEndPt3d=new m.d,this.m_sr=s,this.m_distCurveType=i,this.m_segCurveType=a,this.m_inputGCS=this.m_sr.getGCS(),this.m_rpu=this.m_inputGCS.getUnit().getUnitToBaseFactor(),this.m_bIsPannablePcs=2===this.m_sr.getCoordinateSystemType()&&this.m_sr.isPannable();const r=(0,o.v)();this.m_inputGCS.querySpheroidData(r),this.m_a=r.majorSemiAxis,this.m_eSquared=r.e2,this.setPointDistFrom(e),this.setSegmentEndPoints(t,n)}setSegmentEndPoints(e,t){this.m_segStartPt.assign(e),this.m_segEndPt.assign(t),this.m_bIsPannablePcs||(this.m_segStartPt.mulThis(this.m_rpu),this.m_segEndPt.mulThis(this.m_rpu)),2===this.m_segCurveType&&(this.m_segStartPt3d.assign((0,o.E)(this.m_a,this.m_eSquared,this.m_segStartPt)),this.m_segEndPt3d.assign((0,o.E)(this.m_a,this.m_eSquared,this.m_segEndPt))),this.calculateAndUpdateSegmentLength()}setPointDistFrom(e){this.m_ptDistFrom.assign(e),this.m_ptDistFrom.scale(this.m_rpu)}setSegmentCurveType(e){this.m_segCurveType=e}setDistanceCurveType(e){this.m_distCurveType=e}makeFunctor(){return e=>{let t;switch(this.m_segCurveType){case 0:case 1:case 3:{const s={stack:[],error:void 0,hasError:!1};try{const n=(0,l.b)(s,new o.P,!1),i=(0,l.b)(s,new o.P,!1);o.A.geodeticCoordinate(this.m_a,this.m_eSquared,this.m_segStartPt.x,this.m_segStartPt.y,this.m_geodeticLength.val*e,this.m_az12.val,n,i,this.m_segCurveType),t=new _.P(n.val,i.val);break}catch(n){s.error=n,s.hasError=!0}finally{(0,l.c)(s)}}case 2:{const n=m.d.lerp(this.m_segStartPt3d,this.m_segEndPt3d,e);t=(0,o.G)(this.m_a,this.m_eSquared,n);break}case 4:t=_.P.lerp(this.m_segStartPt,this.m_segEndPt,e),this.m_bIsPannablePcs&&((0,o.F)(this.m_sr,0,[t],1),t.mulThis(this.m_rpu));break;default:(0,i.d)("Invalid curve type")}return o.A.geodeticDistance(this.m_a,this.m_eSquared,this.m_ptDistFrom.x,this.m_ptDistFrom.y,t.x,t.y,this.m_minGeodeticDist,null,null,this.m_distCurveType),this.m_minGeodeticDist.val}}calculateAndUpdateSegmentLength(){switch(this.m_segCurveType){case 0:case 2:case 1:case 3:o.A.geodeticDistance(this.m_a,this.m_eSquared,this.m_segStartPt.x,this.m_segStartPt.y,this.m_segEndPt.x,this.m_segEndPt.y,this.m_geodeticLength,this.m_az12,null,this.m_segCurveType);break;case 4:this.m_geodeticLength.val=_.P.distance(this.m_segStartPt,this.m_segEndPt);break;default:(0,i.d)("Invalid curve type")}}[Symbol.dispose](){this.m_geodeticLength[Symbol.dispose](),this.m_az12[Symbol.dispose](),this.m_minGeodeticDist[Symbol.dispose]()}}Symbol.dispose;class d{constructor(e,t,n,s){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:100;this.m_startPt=e.clone(),this.m_endPt=t.clone(),this.m_cE2=s,this.m_cE=Math.sqrt(this.m_cE2),this.m_c1By2e=1/(2*this.m_cE),this.m_cRpu=n.getGCS().getUnit().getUnitToBaseFactor(),this.isPcs=2===n.getCoordinateSystemType(),this.PEProjcs=n.getPECoordSys(),this.m_points=(0,_.d)(2*i,Number.NaN)}setSegmentEndPoints(e,t){this.m_startPt.assign(e),this.m_endPt.assign(t)}makeFunctor(){return e=>{const t=[0,0];t[0]=this.m_startPt.x*(1-e)+this.m_endPt.x*e,t[1]=this.m_startPt.y*(1-e)+this.m_endPt.y*e,this.isPcs&&o.B.projToGeogCenter(this.PEProjcs,1,t,0);const n=Math.sin(t[1]*this.m_cRpu);return 0===this.m_cE2?n:-Math.log((1-this.m_cE*n)/(1+this.m_cE*n))*this.m_c1By2e+n/(1-this.m_cE2*n*n)}}}function y(e,t,n,s,i){const a=function(e,t,n){const s=e.calculateLength2D(),i=(new u.O).execute(e,t,n)/25e3,a=s/e.getSegmentCount()*2;let r=Math.min(a,s/i);return 0===r&&(r=1),(0,_.l)(r,s/r)}(e,t,i);let r=P(e,a.first,n,s,i),o=1,h=0,m=0;do{if(o++,a.first*=.5,a.first<50*t.getTolerance(0))return r;a.second*=2,m=P(e,a.first,n,s,i),h=Math.abs(m-r),r=m}while(Math.abs(r)>1&&h>1e-8*Math.abs(r)&&(a.second<65e3&&o<8||o<4));return m}function P(e,t,n,s,i){const a=(new r.O).execute(e,t,0,0,i);let _;_=s?(new o.z).execute(a,s,i):a;const m=1===n.getUnit().getUnitToBaseFactor()?Math.PI/180:1,c=new h.Envelope2D;_.queryEnvelope(c);const u=new h.Envelope2D,l=new h.Envelope2D,g=new h.Envelope2D;u.setCoords({xmin:c.xmin,ymin:75*m,xmax:c.xmax,ymax:90*m}),l.setCoords({xmin:c.xmin,ymin:-60*m,xmax:c.xmax,ymax:75*m}),g.setCoords({xmin:c.xmin,ymin:-90*m,xmax:c.xmax,ymax:-60*m}),u.inflateCoords(.01*u.width(),0),l.inflateCoords(.01*l.width(),0),g.inflateCoords(.01*g.width(),0);let p=0;return p+=E(_,u,n,i),p+=E(_,l,n,i),p+=E(_,g,n,i),p}function E(e,t,n,s){const a=(new c.O).execute(e,t,n,s);if(null!==a&&!a.isEmpty()){const e=new h.Envelope2D;a.queryEnvelope(e);const{first:t,second:r}=function(e,t,n){const s=function(e,t,n){const s=e.getUnit().getUnitToBaseFactor(),a=t.getCenter();a.scale(180*s/Math.PI);const r=new _.P;r.x=0,r.y=0;let h=0;if(0===h){a.y>45?(r.y=_.o,h=0):a.y<-45?(r.y=-_.o,h=1):a.x>=45&&a.x<135?(r.x=_.o,h=2):a.x>=135||a.x<-135?(r.x=_.o,h=3):a.x<-45&&a.x>=-135?(r.x=-_.o,h=4):(r.x=0,h=5);const e=s*Math.sqrt((0,_.a)(t.xmin-t.xmax)+(0,_.a)(t.ymin-t.ymax)),n=r.clone(),i=t.getCenter();if(i.scale(s),h<2&&(n.x=i.x),_.P.distance(n,i)+.5*e>_.o)return null}const m=f[h];if(null!==m&&m.getGCS().equalHorizontal(e))return m;const c=e.getText(),u=r.x,l=r.y,g=0,p=0;let d=0,y=-1;6!==h?y=o.a9.PE_PRJ_LAMBERT_AZIMUTHAL_EQAREA:((0,i.g)(n),d=0,y=o.a9.PE_PRJ_CYLINDRICAL_EQAREA);const P=(0,o.aw)("EqualAreaPCS");let E;y===o.a9.PE_PRJ_LAMBERT_AZIMUTHAL_EQAREA?E='PROJCS["'.concat(P,'",').concat(c,',PROJECTION["Lambert_Azimuthal_Equal_Area"],PARAMETER["False_Easting",').concat(g,'],PARAMETER["False_Northing",').concat(p,'],PARAMETER["Central_Meridian",').concat(u,'],PARAMETER["Latitude_of_Origin",').concat(l,'],UNIT["Meter",1.0]]'):y===o.a9.PE_PRJ_CYLINDRICAL_EQAREA?E='PROJCS["'.concat(P,'",').concat(c,',PROJECTION["Cylindrical_Equal_Area"],PARAMETER["False_Easting",').concat(g,'],PARAMETER["False_Northing",').concat(p,'],PARAMETER["Central_Meridian",').concat(u,'],PARAMETER["Standard_Parallel_1",').concat(d,'],PARAMETER["Latitude_of_Origin",').concat(l,'],UNIT["Meter",1.0]]'):(0,i.d)("getEqualAreaPcsFixed");const S=(0,o.a)(E);return f[h]&&f[h].destroy(),f[h]=S,S}(e,t,n);if(null!==s)return(0,_.l)(s,!1);const a=e.getText(),r=e.getUnit().getUnitToBaseFactor(),h=(t.xmin+t.width()/2)*r,m=(t.ymin+t.height()/2)*r,c=0,u=0;let l=0,g=0,p=-1;t.ymin*r>=75*Math.PI/180||t.ymax*r<=-60*Math.PI/180?p=o.a9.PE_PRJ_LAMBERT_AZIMUTHAL_EQAREA:t.ymin>0||t.ymax<0?(l=(t.ymin+1/3*t.height())*r,g=(t.ymin+2/3*t.height())*r,p=o.a9.PE_PRJ_ALBERS):(l=(t.ymin+2/3*t.height())*r,p=o.a9.PE_PRJ_CYLINDRICAL_EQAREA);const d=(0,o.aw)("EqualAreaPCS");let y;return p===o.a9.PE_PRJ_LAMBERT_AZIMUTHAL_EQAREA?y='PROJCS["'.concat(d,'",').concat(a,',PROJECTION["Lambert_Azimuthal_Equal_Area"],PARAMETER["False_Easting",').concat(c,'],PARAMETER["False_Northing",').concat(u,'],PARAMETER["Central_Meridian",').concat(h,'],PARAMETER["Latitude_of_Origin",').concat(m,'],UNIT["Meter",1.0]]'):p===o.a9.PE_PRJ_ALBERS?y='PROJCS["'.concat(d,'",').concat(a,',PROJECTION["Albers"],PARAMETER["False_Easting",').concat(c,'],PARAMETER["False_Northing",').concat(u,'],PARAMETER["Central_Meridian",').concat(h,'],PARAMETER["Standard_Parallel_1",').concat(l,'],PARAMETER["Standard_Parallel_2",').concat(g,'],PARAMETER["Latitude_of_Origin",').concat(m,'],UNIT["Meter",1.0]]'):p===o.a9.PE_PRJ_CYLINDRICAL_EQAREA?y='PROJCS["'.concat(d,'",').concat(a,',PROJECTION["Cylindrical_Equal_Area"],PARAMETER["False_Easting",').concat(c,'],PARAMETER["False_Northing",').concat(u,'],PARAMETER["Central_Meridian",').concat(h,'],PARAMETER["Standard_Parallel_1",').concat(l,'],PARAMETER["Latitude_of_Origin",').concat(m,'],UNIT["Meter",1.0]]'):(0,i.d)("getEqualAreaPCSInstance"),(0,_.l)((0,o.a)(y),!0)}(n,e,!1),m=(0,o.D)(n,t,null),c=(new o.z).execute(a,m,s).calculateArea2D();return r&&t.destroy(),c}return 0}const f=[null,null,null,null,null,null,null];class S{getOperatorType(){return 10314}supportsCurves(){return!0}accelerateGeometry(e,t,n){return!1}canAccelerateGeometry(e){return!1}execute(e,t,n){if(0===t.getCoordinateSystemType()&&(0,i.a)(""),e.isEmpty()||e.getDimension()<2)return 0;if((0,i.c)(e),e.getGeometryType()===i.G.enumEnvelope){const s=new a.a;return s.addEnvelope(e,!1),this.execute(s,t,n)}let s=e;e.getDescription().getAttributeCount()>1&&(s=e.clone(),s.dropAllAttributes());const u=(new r.O).execute(s,0,t.getTolerance(0),0,n);let l=null;const g=t.getGCS();g!==t&&(l=(0,o.D)(t,g));let p=(new o.O).execute(u,t,!1,n);return p.isEmpty()?0:(p===e&&(p=e.clone()),t.isPannable()?function(e,t,n){const s=new h.Envelope2D;e.queryEnvelope(s);const i=(0,m.c)(t,s,!0).total(),r=t.getPannableExtent();r.xmin=s.xmin-10*i,r.xmax=s.xmax+10*i;const u=(new c.O).execute(e,r,t,n).getImpl().querySegmentIterator();u.stripAttributes();const l=(0,o.v)();t.querySpheroidData(l);const g=l.e2,p=0===g?2:1,y=new _.P(0,0),P=new _.P(0,0),E=new _.K(0),f=new d(y,P,t,g,100);for(;u.nextPath();)for(;u.hasNextSegment();){const e=u.nextSegment();y.assign(e.getStartXY()),P.assign(e.getEndXY()),f.setSegmentEndPoints(y,P);const t=(0,a.x)(6,0,1,1e-12,1e-15,f.makeFunctor());E.pe((P.x-y.x)*t)}const S=l.majorSemiAxis;return p*S*S*(1-g)*Math.PI*E.getResult()/t.getPannableExtent().width()}(p,t,n):y(p,t,g,l,n))}}function x(){return{m_p_PCS:new _.P,m_factor:Number.NaN,setValues:v,assign:N}}function v(e,t){this.m_factor=e,this.m_p_PCS.assign(t)}function N(e){this.m_factor=e.m_factor,this.m_p_PCS.assign(e.m_p_PCS)}class A{constructor(e,t,n,s){this.m_ptStart=new m.d,this.m_ptEnd=new m.d,this.m_ptStart.assign(t),this.m_ptEnd.assign(n),this.m_deltaX=this.m_ptEnd.x-this.m_ptStart.x,this.m_deltaY=this.m_ptEnd.y-this.m_ptStart.y,this.m_e=Math.sqrt(e),this.m_e2=e,this.m_c1MinusE2=1-e;const i=Math.sin(s);let a;a=0===this.m_e2?2*i:i*((0,_.y)(this.m_e*i)+1/(1-this.m_e2*i*i)),this.m_baseA=a}setSegmentEndPoints(e,t){this.m_ptStart.assign(e),this.m_ptEnd.assign(t),this.m_deltaX=this.m_ptEnd.x-this.m_ptStart.x,this.m_deltaY=this.m_ptEnd.y-this.m_ptStart.y}makeFunctor(){return e=>{const t=1-e,n=t*this.m_ptStart.x+e*this.m_ptEnd.x,s=t*this.m_ptStart.y+e*this.m_ptEnd.y,i=t*this.m_ptStart.z+e*this.m_ptEnd.z,a=n*n+s*s,r=i/Math.sqrt(i*i+this.m_c1MinusE2*this.m_c1MinusE2*a);let o;return o=0===this.m_e2?2*r:r*((0,_.y)(this.m_e*r)+1/(1-this.m_e2*r*r)),(this.m_deltaY*n-this.m_deltaX*s)/a*(o-this.m_baseA)}}}function D(){return{sin_phi:Number.NaN,one_p_sin_phi:Number.NaN,one_m_sin_phi:Number.NaN,one_m_e_2_sin_2_phi:Number.NaN,sin_half_phi_pf:Number.NaN,sin_half_phi_pz:Number.NaN,sin_half_asin_e_sin_phi_pf:Number.NaN,sin_half_asin_e_sin_phi_pz:Number.NaN,atanh_sin_phi:Number.NaN,atanh_esin_phi:Number.NaN,make_negative:!1,initialize:M,changeSign:C,assign:T,clone:q}}function M(e,t,n,s){const i=.5*e;this.sin_phi=Math.sin(e);const a=t*this.sin_phi,r=.5*Math.asin(a);this.one_p_sin_phi=1+this.sin_phi,this.one_m_sin_phi=1-this.sin_phi,this.one_m_e_2_sin_2_phi=(1+a)*(1-a),this.sin_half_phi_pf=Math.sin(i+n),this.sin_half_phi_pz=Math.sin(i+s),this.sin_half_asin_e_sin_phi_pf=Math.sin(r+n),this.sin_half_asin_e_sin_phi_pz=Math.sin(r+s),this.atanh_sin_phi=Math.log(this.sin_half_phi_pf/this.sin_half_phi_pz),this.atanh_esin_phi=Math.log(this.sin_half_asin_e_sin_phi_pf/this.sin_half_asin_e_sin_phi_pz)}function C(){this.sin_phi=-this.sin_phi;let e=this.one_p_sin_phi;this.one_p_sin_phi=this.one_m_sin_phi,this.one_m_sin_phi=e,e=this.sin_half_phi_pf,this.sin_half_phi_pf=this.sin_half_phi_pz,this.sin_half_phi_pz=e,e=this.sin_half_asin_e_sin_phi_pf,this.sin_half_asin_e_sin_phi_pf=this.sin_half_asin_e_sin_phi_pz,this.sin_half_asin_e_sin_phi_pz=e,this.atanh_sin_phi=-this.atanh_sin_phi,this.atanh_esin_phi=-this.atanh_esin_phi}function T(e){this.sin_phi=e.sin_phi,this.one_p_sin_phi=e.one_p_sin_phi,this.one_m_sin_phi=e.one_m_sin_phi,this.one_m_e_2_sin_2_phi=e.one_m_e_2_sin_2_phi,this.sin_half_phi_pf=e.sin_half_phi_pf,this.sin_half_phi_pz=e.sin_half_phi_pz,this.sin_half_asin_e_sin_phi_pf=e.sin_half_asin_e_sin_phi_pf,this.sin_half_asin_e_sin_phi_pz=e.sin_half_asin_e_sin_phi_pz,this.atanh_sin_phi=e.atanh_sin_phi,this.atanh_esin_phi=e.atanh_esin_phi,this.make_negative=e.make_negative}function q(){return(0,s.A)({},this)}class b{constructor(e,t,n){this.m_transformPCS2GCS=null,this.m_scaleToRadians=new g.T,this.m_scaleToDegrees=new g.T,this.m_progressTracker=n,(0,i.g)(4!==t),this.m_curveType=t,this.m_inputSR=e,e&&0!==e.getCoordinateSystemType()||(0,i.a)(""),this.m_inputGCS=e.getGCS(),this.m_a=0,this.m_eSquared=0,this.m_b=0,this.m_rpu=0}executePolygonGeodeticArea(e){let t,n=e.clone();if(n.dropAllAttributes(),e.hasNonLinearSegments()&&(n=(new r.O).execute(n,0,this.m_inputSR.getTolerance(0),0,this.m_progressTracker)),this.m_inputSR.isPannable()){const e=new h.Envelope2D;n.queryEnvelope(e);const t=this.m_inputSR.getPannableExtent();if(!t.containsEnvelope(e)){const s=t.getCenterX()-e.getCenterX(),i=new g.T;i.setShiftCoords(s,0),n.applyTransformation(i),e.move(s,0);const a=new _.E;t.queryIntervalX(a);const r=new _.E;e.queryIntervalX(r),n=a.contains(r)?(0,o.w)(n,this.m_inputSR):(new o.z).foldInto360RangeGeodetic(n,this.m_inputSR,this.m_curveType)}}if(this.m_transformPCS2GCS?(n=(new o.O).execute(n,this.m_inputSR,!1,this.m_progressTracker),t=n.createInstance(),(0,o.y)(this.m_transformPCS2GCS,n,t,this.m_progressTracker)||(t=(new o.z).execute(n,this.m_transformPCS2GCS,this.m_progressTracker))):t=(new o.O).execute(n,this.m_inputGCS,!1,this.m_progressTracker),t.isEmpty())return 0;if(1===this.m_curveType){const e=(0,o.v)();return this.m_inputGCS.querySpheroidData(e),this.m_a=e.majorSemiAxis,this.m_eSquared=e.e2,this.loxodromeArea(t)}const s=t.getImpl();this.m_rpu=this.m_inputGCS.getUnit().getUnitToBaseFactor(),this.m_scaleToRadians.setScale(this.m_rpu),s.applyTransformation(this.m_scaleToRadians),this.m_scaleToDegrees=this.m_scaleToRadians,this.m_scaleToDegrees.invertThis();const i=(0,o.v)();if(this.m_inputGCS.querySpheroidData(i),this.m_a=i.majorSemiAxis,this.m_b=i.minorSemiAxis,this.m_eSquared=i.e2,2===this.m_curveType)return this.executeClippedPolygonGreatEllipticArea(t);{const e={stack:[],error:void 0,hasError:!1};try{const n=o.ax.unit(9101),s=this.m_inputGCS.getPECoordSys(),i=(0,l.b)(e,s.cloneAlterUnits(n),!1);let a,r,_=this.executeClippedPolygonGeodeticArea(t,i,0),h=0;do{h++,a=this.executeClippedPolygonGeodeticArea(t,i,h),r=Math.abs(a-_),_=a}while(Math.abs(a)>1&&r>1e-8*Math.abs(a)&&h<7);return a}catch(a){e.error=a,e.hasError=!0}finally{(0,l.c)(e)}}}executeClippedPolygonGeodeticArea(e,t,n){const s={stack:[],error:void 0,hasError:!1};try{const i=new h.Envelope2D;e.queryEnvelope(i);const a=(0,l.b)(s,this.getEqualAreaPCSInstance(t,i),!1),r=e.clone();(0,o.ay)(a,r);const m=50,c=r.getImpl().getAttributeStreamRef(0),u=e.getImpl().getAttributeStreamRef(0),g=(0,l.b)(s,new o.P,!1),p=(0,l.b)(s,new o.P,!1),d=40,y=[0,0],P=(0,_.k)(x,d),E=(0,_.d)(d,-1),f=x(),S=x();let v,N;const A=a;let D=r.calculateArea2D();const M=new _.K(0),C=.5*Math.PI,T=1e-10*Math.abs(D)+1e-6,q=e.getPathCount();let b,w,I,G;const R=new _.P,L=new _.P,B=new _.P,z=new _.P,O=new _.P,F=new _.P;let k,Y;for(w=e.getPathStart(0),b=0;b<q;b++,w=I)for(I=e.getPathEnd(b),c.queryPoint2D(I-1<<1,B),u.queryPoint2D(I-1<<1,R),Math.abs(R.y)>C&&(R.y=(0,_.f)(C,R.y)),G=w;G<I;G++,B.assign(z),R.assign(L)){if(c.queryPoint2D(G<<1,z),u.queryPoint2D(G<<1,L),Math.abs(L.y)>C&&(L.y=(0,_.f)(C,L.y)),k=_.P.distance(B,z),k<m||0===R.y&&0===L.y)continue;o.A.geodeticDistance(this.m_a,this.m_eSquared,R.x,R.y,L.x,L.y,g,p,null,this.m_curveType);const e=g.val,t=p.val;for(f.setValues(0,B),S.setValues(1,z),N=n,P[0].assign(S),E[0]=n,v=0;v>=0;){Y=.5*(f.m_factor+S.m_factor),o.A.geodeticCoordinate(this.m_a,this.m_eSquared,R.x,R.y,e*Y,t,g,p,this.m_curveType),O.x=g.val,O.y=p.val,y[0]=O.x,y[1]=O.y,o.B.geogToProj(A,1,y),F.x=y[0],F.y=y[1];const n=.5*-F.offset(f.m_p_PCS,S.m_p_PCS)*_.P.distance(f.m_p_PCS,S.m_p_PCS);if(M.pe(n),Math.abs(n)>T||Math.abs(n)>0&&N>0)S.setValues(Y,F),v++,P[v].assign(S),Math.abs(n)<=T?(N--,E[v-1]=N,E[v]=N):(N=E[v-1],E[v]=N);else{if(v<=0)break;f.assign(S),v--,S.assign(P[v]),N=E[v]}}}return D+=M.getResult(),Math.abs(D)}catch(i){s.error=i,s.hasError=!0}finally{(0,l.c)(s)}}executeClippedPolygonGreatEllipticArea(e){const t=[],n=[],s=new _.P,i=new _.P,a=(0,o.E)(1,this.m_eSquared,new _.P(0,.5*Math.PI)),r=new _.K(0),c=new _.K(0),u=new _.K(0),l=new m.d,g=new m.d,p=new h.Envelope2D;e.queryLooseEnvelope(p);let d=0;p.containsCoords(p.xmin,0)||(d=Math.abs(p.ymin)<Math.abs(p.ymax)?p.ymin:p.ymax);const y=new A(this.m_eSquared,l,g,d),P=this.m_a*this.m_a,E=e.getImpl().querySegmentIterator();for(E.stripAttributes();E.nextPath();)for(;E.hasNextSegment();){const e=E.nextSegment();s.assign(e.getStartXY()),i.assign(e.getEndXY()),i.x-s.x>Math.PI?s.x+=2*Math.PI:i.x-s.x<-Math.PI&&(i.x+=2*Math.PI),this.splitSegmentCrossingItegralThreshold(e,t,n);for(let n of t)l.assign((0,o.E)(this.m_a,this.m_eSquared,n.getStartXY())),g.assign((0,o.E)(this.m_a,this.m_eSquared,n.getEndXY())),y.setSegmentEndPoints(l,g),this.adaptiveIntegrationWithRomberg(y,r);for(let t of n){let e=t.getStartXY(),n=t.getEndXY(),s=d;e.y<0&&(n=(0,_.c)(e,e=n),e.y=-e.y,n.y=-n.y,s=-s);const i=(0,o.E)(1,this.m_eSquared,e),r=(0,o.E)(1,this.m_eSquared,n),h=Math.min(e.y,n.y),l=(0,o.az)(this.m_eSquared,e.x,n.x,s,h);c.pe(l);const g=Math.abs((0,o.az)(this.m_eSquared,e.x,n.x,h,_.o)),p=new m.d;p.setSub(i,a);const y=new m.d;y.setSub(r,a);const E=new m.d;E.setCrossProductVector(p,y);let f=P*(g-.5*E.length());f=(0,_.f)(f,n.x-e.x),u.pe(f)}t.length=0,n.length=0}return u.getResult()+P*(.5*(1-this.m_eSquared)*r.getResult()+c.getResult())}getEqualAreaPCSInstance(e,t){const n=t.getCenterX();let s,i;const a=t.height();let r,h;(r=t.ymin>45*Math.PI/180||t.ymax<45*-Math.PI/180)?s=(0,_.f)(.5*Math.PI,t.getCenterY()):(s=t.getCenterY(),i=t.ymin+a*(2/3));const m=(0,o.aw)("EqualAreaPCS"),c=e.toString();return h=r?o.ax.fromString(o.a9.PE_TYPE_PROJCS,'PROJCS["'.concat(m,'", ').concat(c,', PROJECTION["Lambert_Azimuthal_Equal_Area"],PARAMETER["False_Easting",').concat(0,'],PARAMETER["False_Northing", ').concat(0,'],PARAMETER["Central_Meridian", ').concat(n,'], PARAMETER["Latitude_of_Origin", ').concat(s,'], UNIT["Meter",1.0]]')):o.ax.fromString(o.a9.PE_TYPE_PROJCS,'PROJCS["'.concat(m,'", ').concat(c,', PROJECTION["Cylindrical_Equal_Area"],PARAMETER["False_Easting", ').concat(0,'],PARAMETER["False_Northing", ').concat(0,'],PARAMETER["Central_Meridian", ').concat(n,'],PARAMETER["Standard_Parallel_1", ').concat(i,'],PARAMETER["Latitude_of_Origin", ').concat(s,'],UNIT["Meter",1.0]]')),h}splitSegmentCrossingItegralThreshold(e,t,n){const s=100,i=20,r=400,h=(0,o.E)(this.m_a,this.m_eSquared,new _.P(0,_.o)),c=(0,o.E)(this.m_a,this.m_eSquared,new _.P(0,-_.o)),u=this.splitSegmentPassingThroughPole(e);for(let l of u){const e=l.getStartXY(),u=l.getEndXY(),g=(0,o.E)(this.m_a,this.m_eSquared,e),p=(0,o.E)(this.m_a,this.m_eSquared,u),d=new _.P,y=new m.d;let P=m.d.sqrDistance(h,g),E=m.d.sqrDistance(g,p);if(P<=s){if(!(E>r)){n.push(new a.L({start:e,end:u}));continue}y.assign(p.sub(g)),y.normalizeThis(),y.assign(g.add(y.mul(i))),d.assign((0,o.G)(this.m_a,this.m_eSquared,y)),n.push(new a.L({start:e,end:d})),e.assign(d)}if(g.assign((0,o.E)(this.m_a,this.m_eSquared,e)),P=m.d.sqrDistance(h,p),E=m.d.sqrDistance(g,p),P<=s){if(!(E>r)){n.push(new a.L({start:e,end:u}));continue}y.assign(p.sub(g)),y.normalizeThis(),y.assign(p.sub(y.mul(i))),d.assign((0,o.G)(this.m_a,this.m_eSquared,y)),n.push(new a.L({start:d,end:u})),u.assign(d)}if(g.assign((0,o.E)(this.m_a,this.m_eSquared,e)),p.assign((0,o.E)(this.m_a,this.m_eSquared,u)),P=m.d.sqrDistance(c,g),E=m.d.sqrDistance(g,p),P<=s){if(!(E>r)){n.push(new a.L({start:e,end:u}));continue}y.assign(p.sub(g)),y.normalizeThis(),y.assign(g.add(y.mul(i))),d.assign((0,o.G)(this.m_a,this.m_eSquared,y)),n.push(new a.L({start:e,end:d})),e.assign(d)}if(g.assign((0,o.E)(this.m_a,this.m_eSquared,e)),p.assign((0,o.E)(this.m_a,this.m_eSquared,u)),P=m.d.sqrDistance(c,p),E=m.d.sqrDistance(g,p),P<=s){if(!(E>r)){n.push(new a.L({start:e,end:u}));continue}y.assign(p.sub(g)),y.normalizeThis(),y.assign(p.sub(y.mul(i))),d.assign((0,o.G)(this.m_a,this.m_eSquared,y)),n.push(new a.L({start:d,end:u})),u.assign(d)}t.push(new a.L({start:e,end:u}))}}splitSegmentPassingThroughPole(e){const t={stack:[],error:void 0,hasError:!1};try{const n=[],s=new m.d,i=new m.d,r=new m.d,h=new _.P,c=20,u=3.124139361,g=10,d=e.getStartXY(),y=e.getEndXY(),P=(0,l.b)(t,new o.P,!1);if(o.A.geodeticDistance(this.m_a,this.m_eSquared,d.x,d.y,y.x,y.y,P,null,null,2),Math.abs(y.x-d.x)>u&&P.val>c){const e=new p(new _.P(0,90),d.divide(this.m_rpu),y.divide(this.m_rpu),this.m_inputGCS,2,2);let t=(0,o.I)(e.makeFunctor(),0,1,1e-10);if(t.second<=g&&t.first>0&&t.first<1)return s.assign((0,o.E)(this.m_a,this.m_eSquared,d)),i.assign((0,o.E)(this.m_a,this.m_eSquared,y)),(0,_.x)(s,i,t.first,r),h.assign((0,o.G)(this.m_a,this.m_eSquared,r)),n.push(new a.L({start:d,end:h})),n.push(new a.L({start:h,end:y})),n;if(e.setPointDistFrom(new _.P(0,-90)),t=(0,o.I)(e.makeFunctor(),0,1,1e-10),t.second<=g&&t.first>0&&t.first<1)return s.assign((0,o.E)(this.m_a,this.m_eSquared,d)),i.assign((0,o.E)(this.m_a,this.m_eSquared,y)),(0,_.x)(s,i,t.first,r),h.assign((0,o.G)(this.m_a,this.m_eSquared,r)),n.push(new a.L({start:d,end:h})),n.push(new a.L({start:h,end:y})),n}return n.push(new a.L({start:d,end:y})),n}catch(n){t.error=n,t.hasError=!0}finally{(0,l.c)(t)}}adaptiveIntegrationWithRomberg(e,t){const n=e.makeFunctor();let s=0,i=1,r=n(s),o=n(i);const _=1e-17,h=1e-14;let m=(s+i)/2,c=n(m),u=Math.abs(c-r),l=Math.abs(o-c),g=0;for(;g++<32&&(u/l<.1||l/u<.1);)u<l?(t.pe((0,a.x)(5,s,m,h,_,n)),s=m,r=c):(t.pe((0,a.x)(5,m,i,h,_,n)),i=m,o=c),m=(s+i)/2,c=Math.abs(n(m)),u=Math.abs(c-r),l=Math.abs(o-c);t.pe((0,a.x)(5,s,i,h,_,n))}loxodromeAreaHemi(e,t,n,s,i){const a=n.clone(),r=i.clone();let o,h,m,c,u,l,g,p,d,y,P,E,f,S,x,v;return a.make_negative&&a.changeSign(),r.make_negative&&r.changeSign(),P=s-t,1===Math.abs(a.sin_phi)||1===Math.abs(r.sin_phi)?e.half_qp*P:a.sin_phi===r.sin_phi?(y=.5*e.one_m_e_2*a.sin_phi*(1/a.one_m_e_2_sin_2_phi+(0,_.y)(e.e*a.sin_phi))*P,y):(x=Math.log(r.sin_half_phi_pf*a.sin_half_phi_pz/(r.sin_half_phi_pz*a.sin_half_phi_pf)),v=Math.log(r.sin_half_asin_e_sin_phi_pf*a.sin_half_asin_e_sin_phi_pz/(r.sin_half_asin_e_sin_phi_pz*a.sin_half_asin_e_sin_phi_pf)),1===this.m_eSquared?(u=0,o=.5*(x+r.sin_phi/r.one_m_e_2_sin_2_phi-a.sin_phi/a.one_m_e_2_sin_2_phi),h=0):(u=-2*e.atanh_e_over_e*(Math.log(r.one_p_sin_phi/a.one_p_sin_phi)-e.e*v),o=(x-e.e*v)/e.one_m_e_2,h=(Math.log(r.one_m_e_2_sin_2_phi/a.one_m_e_2_sin_2_phi)+u/e.atanh_e_over_e)/e.one_m_e_2),m=-v*(a.atanh_esin_phi+r.atanh_esin_phi),c=1/a.one_m_e_2_sin_2_phi-1/r.one_m_e_2_sin_2_phi,l=(0,_.z)(r.one_m_sin_phi/e.one_p_e,e.e)-(0,_.z)(a.one_m_sin_phi/e.one_p_e,e.e),g=(0,_.z)(r.one_p_sin_phi/e.one_p_e,e.e)-(0,_.z)(a.one_p_sin_phi/e.one_p_e,e.e),p=(0,_.z)(a.one_m_sin_phi/-e.one_m_e,e.e)-(0,_.z)(r.one_m_sin_phi/-e.one_m_e,e.e),d=(0,_.z)(a.one_p_sin_phi/-e.one_m_e,e.e)-(0,_.z)(r.one_p_sin_phi/-e.one_m_e,e.e),y=.25/o*(h+m+c+u+.5*(l+g+p+d)),y+=e.half_qp,E=.5*e.one_m_e_2*a.sin_phi*(1/a.one_m_e_2_sin_2_phi+(0,_.y)(e.e*a.sin_phi)),f=.5*e.one_m_e_2*r.sin_phi*(1/r.one_m_e_2_sin_2_phi+(0,_.y)(e.e*r.sin_phi)),f<E&&(S=E,E=f,f=S),y<E&&(y=E),y>f&&(y=f),y*=P,y)}loxodromeArea(e){const t=Math.PI/180;let n=0;const s={e:Number.NaN,one_p_e:Number.NaN,one_m_e:Number.NaN,one_m_e_2:Number.NaN,atanh_e_over_e:Number.NaN,half_qp:Number.NaN,f:Number.NaN,z:Number.NaN},i=D(),a=D();s.e=Math.sqrt(this.m_eSquared),s.one_p_e=1+s.e,s.one_m_e=1-s.e,s.one_m_e_2=1-this.m_eSquared,s.atanh_e_over_e=(0,_.y)(s.e),this.m_eSquared>=1?s.half_qp=1:s.half_qp=.5*(1+s.atanh_e_over_e*s.one_m_e_2),s.f=.25*Math.PI,s.z=.75*Math.PI,a.initialize(0,s.e,s.f,s.z);const r=e.getPathCount(),o=new _.P,h=new _.P,m=e.getImpl().getAttributeStreamRef(0);for(let _=0;_<r;_++){const r=e.getPathStart(_),c=e.getPathEnd(_);if(!(c-r<=1)){m.queryPoint2D(2*(c-1),o);for(let e=r;e<c;e++){m.queryPoint2D(2*e,h);const _=o.y*t,c=h.y*t;if(e===r?(i.initialize(_,s.e,s.f,s.z),i.make_negative=!1):i.assign(a),a.initialize(c,s.e,s.f,s.z),a.make_negative=!1,o.y*h.y<0){if(o.y>=90&&h.y<=-90||h.y>=90&&o.y<=-90)return Number.NaN;const e=D();e.initialize(0,s.e,s.f,s.z),e.make_negative=!1;const r=i.atanh_sin_phi-s.e*i.atanh_esin_phi,m=a.atanh_sin_phi-s.e*a.atanh_esin_phi,c=(m*o.x-r*h.x)/(m-r);_<0?(i.make_negative=!0,n-=this.loxodromeAreaHemi(s,o.x*t,i,c*t,e),i.make_negative=!1,n+=this.loxodromeAreaHemi(s,c*t,e,h.x*t,a)):(n+=this.loxodromeAreaHemi(s,o.x*t,i,c*t,e),a.make_negative=!0,n-=this.loxodromeAreaHemi(s,c*t,e,h.x*t,a),a.make_negative=!1)}else o.y>=0?n+=this.loxodromeAreaHemi(s,o.x*t,i,h.x*t,a):(i.make_negative=!0,a.make_negative=!0,n-=this.loxodromeAreaHemi(s,o.x*t,i,h.x*t,a),i.make_negative=!1,a.make_negative=!1);o.assign(h)}}}return this.m_a*n*this.m_a}calculate(e){if(e.isEmpty()||e.getDimension()<2)return 0;if(e.getGeometryType()===i.G.enumEnvelope){const t=new a.a;return t.addEnvelope(e,!1),this.calculate(t)}return this.m_inputSR!==this.m_inputGCS&&null===this.m_transformPCS2GCS&&(this.m_transformPCS2GCS=(0,o.D)(this.m_inputSR,this.m_inputGCS,null)),this.executePolygonGeodeticArea(e)}}class w{getOperatorType(){return 10311}supportsCurves(){return!0}accelerateGeometry(e,t,n){return!1}canAccelerateGeometry(e){return!1}execute(e,t,n,s){return(0,i.c)(e),4===n?(new S).execute(e,t,s):new b(t,n,s).calculate(e)}}},49262:(e,t,n)=>{n.d(t,{D:()=>f,m:()=>m,s:()=>y,w:()=>d});var s=n(35143),i=n(97799),a=n(63331),r=n(82103),o=n(26871),_=n(21557),h=n(91523);function m(){return{outPoint:new o.P,index:-1,t:Number.NaN}}function c(e,t,n){return{outPoint:e.clone(),index:t,t:n}}function u(e,t,n,s){e.outPoint.assign(t),e.index=n,e.t=s}function l(e,t){e.outPoint.assign(t.outPoint),e.index=t.index,e.t=t.t}function g(e,t,n,s){e.index=n,e.t=s,t.queryCoord2D(e.t,e.outPoint)}function p(e,t){const n=m();l(n,e),l(e,t),l(t,n)}function d(e,t,n,s,a,o){if(e.getGeometryType()===i.G.enumPolygon){for(;s.nextPath();)if(s.hasNextSegment()){const t=s.nextSegment();if(0!==(0,r.h)(e,t.getEndXY(),0))return u(a,t.getEndXY(),-1,Number.NaN),u(o,t.getEndXY(),-1,Number.NaN),!0}s.resetToFirstPath()}if(t.getGeometryType()===i.G.enumPolygon){for(;n.nextPath();)if(n.hasNextSegment()){const e=n.nextSegment();if(0!==(0,r.h)(t,e.getEndXY(),0))return u(a,e.getEndXY(),-1,Number.NaN),u(o,e.getEndXY(),-1,Number.NaN),!0}n.resetToFirstPath()}return!1}function y(e){const t=e.getPathCount(),n=(0,o.d)(e.getSegmentCount(),0);let s=0;for(let i=0;i<t;++i){const t=s+e.getSegmentCountPath(i);for(let a=s,r=e.getPathStart(i);a<t;++a,++r)n[a]=r;s=t}return(0,a.s)(e.getPointCount(),n),n}function P(e,t){return!!Number.isNaN(t)||e<=t}function E(e){const t=new a.a;return t.addEnvelope(e,!1),t}class f{constructor(e,t){if(this.m_env2DgeometryA=null,this.m_env2DgeometryB=null,this.m_progressCounter=0,this.m_progressTracker=t,this.m_maxSqrDistance=e*e,this.m_maxDistance=e,this.m_bIsNearCalc=!1,Number.isNaN(this.m_maxDistance)?this.m_maxDistance=Number.POSITIVE_INFINITY:this.m_maxDistance=e,this.m_maxSqrDistance=this.m_maxDistance*this.m_maxDistance,Number.isFinite(this.m_maxSqrDistance)){let e=Math.sqrt(this.m_maxSqrDistance);for(;e<this.m_maxDistance;)this.m_maxSqrDistance*=1+Number.EPSILON,e=Math.sqrt(this.m_maxSqrDistance)}}calculate(e,t,n,s){if((e.getGeometryType()!==h.P.type||t.getGeometryType()!==h.P.type)&&(this.m_env2DgeometryA=new _.Envelope2D,this.m_env2DgeometryB=new _.Envelope2D,e.queryEnvelope(this.m_env2DgeometryA),t.queryEnvelope(this.m_env2DgeometryB),!P(this.m_env2DgeometryA.distanceFromEnvelope(this.m_env2DgeometryB),this.m_maxDistance)))return Number.POSITIVE_INFINITY;const i=c(new o.P,(0,o.j)(),Number.NaN),a=c(new o.P,(0,o.j)(),Number.NaN),r=this._ExecuteBruteForce(e,t,i,a);return P(r,this.m_maxDistance)?(null!==n&&l(n,i),null!==s&&l(s,a),r):Number.POSITIVE_INFINITY}isNear(e,t){if(this.m_bIsNearCalc=!0,e.isEmpty()||t.isEmpty())return!1;if(e===t)return!0;let n=!0;if(e.getGeometryType()!==h.P.type&&e.getGeometryType()!==h.E.type||t.getGeometryType()!==h.P.type&&t.getGeometryType()!==h.E.type||(n=!1),n){if(this.m_env2DgeometryA=new _.Envelope2D,this.m_env2DgeometryB=new _.Envelope2D,e.queryEnvelope(this.m_env2DgeometryA),t.queryEnvelope(this.m_env2DgeometryB),!(this.m_env2DgeometryA.sqrMaxMinDistanceEnvelope(this.m_env2DgeometryB)>this.m_maxSqrDistance))return!0;if(this.m_env2DgeometryA.sqrDistanceEnvelope(this.m_env2DgeometryB,null,null)>this.m_maxSqrDistance)return!1}const s=c(new o.P,(0,o.j)(),Number.NaN),i=c(new o.P,(0,o.j)(),Number.NaN);return this._ExecuteBruteForce(e,t,s,i)<=this.m_maxDistance}progress_(){}_ExecuteBruteForce(e,t,n,s){switch(e.getGeometryType()){case i.G.enumPoint:return this.distancePointGeometry(e,t,n,s);case i.G.enumMultiPoint:return this.distanceMultipointGeometry(e,t,n,s);case i.G.enumEnvelope:return this.distanceEnvelopeGeometry(e,t,n,s);case i.G.enumPolyline:case i.G.enumPolygon:return this.distanceMultipathGeometry(e,t,n,s);default:return Number.NaN}}distancePointGeometry(e,t,n,s){switch(t.getGeometryType()){case i.G.enumPoint:return this.distancePointPoint(e,t,n,s);case i.G.enumMultiPoint:return this.distancePointMultipoint(e,t,n,s);case i.G.enumPolyline:case i.G.enumPolygon:return this.distancePointMultipath(e,t,n,s);case i.G.enumEnvelope:return this.distancePointEnvelope(e,t,n,s);default:return Number.NaN}}distancePointPoint(e,t,n,s){const i=e.getXY(),a=t.getXY();return u(n,i,0,0),u(s,a,0,0),Math.sqrt(o.P.sqrDistance(i,a))}distancePointMultipoint(e,t,n,s){const i=e.getXY();let a=this.m_maxSqrDistance,r=a,_=!1;const h=t.getPointCount(),m=new o.P;for(let c=0;c<h;++c)if(t.queryXY(c,m),r=o.P.sqrDistance(i,m),this.m_bIsNearCalc){if(r<=a)return 0}else if(!(r>a)&&(!_&&r===a||r<a)&&(a=r,u(n,i,0,0),u(s,m,c,0),_=!0,0===a))return 0;return _?Math.sqrt(a):Number.POSITIVE_INFINITY}distancePointMultipath(e,t,n,s){const a=!this.m_env2DgeometryA.isIntersecting(this.m_env2DgeometryB),h=e.getXY();if(!a&&t.getGeometryType()===i.G.enumPolygon&&0!==(0,r.h)(t,h,0))return u(n,h,0,0),u(s,h,-1,Number.NaN),0;t.getImpl().getAccelerators();let m=this.m_maxSqrDistance,c=m,l=-1;const g=new _.Envelope2D,p=t.querySegmentIterator();let d=!1;for(;p.nextPath();)for(;p.hasNextSegment();){const e=p.nextSegment();e.queryEnvelope(g);const t=g.sqrDistance(h);if(t>m)continue;if(!this.m_bIsNearCalc&&d&&t===m)continue;l=e.getClosestCoordinate(h,!1);const i=e.getCoord2D(l);if(c=o.P.sqrDistance(h,i),this.m_bIsNearCalc){if(c<=m)return 0}else if(!(c>m)&&(!d||c<m)&&(m=c,u(n,h,0,0),u(s,i,p.getStartPointIndex(),l),d=!0,0===m))return 0}return d?Math.sqrt(m):Number.POSITIVE_INFINITY}distancePointEnvelope(e,t,n,s){const i=e.getXY();u(n,i,0,0),u(s,i,-1,Number.NaN);const a=t.asEnvelope2D();return a.contains(i)?0:Math.sqrt(a.sqrDistance(i,s.outPoint))}distanceMultipointGeometry(e,t,n,s){switch(t.getGeometryType()){case i.G.enumPoint:{this.m_env2DgeometryB=(0,o.c)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB);const i=this.distancePointMultipoint(t,e,s,n);return this.m_env2DgeometryB=(0,o.c)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB),i}case i.G.enumMultiPoint:return this.distanceMultipointMultipoint(e,t,n,s,1,1);case i.G.enumPolyline:case i.G.enumPolygon:return this.distanceMultipointMultipath(e,t,n,s);case i.G.enumEnvelope:return this.distanceMultipointMultipath(e,E(t),n,s);default:return Number.NaN}}distanceMultipointMultipoint(e,t,n,i,a,r){const _={stack:[],error:void 0,hasError:!1};try{if(this.m_bIsNearCalc&&1===a&&1===r){const s=Math.trunc((0,o.s)(Math.sqrt(e.getPointCount())+1,1,(0,o.i)())),a=Math.trunc((0,o.s)(Math.sqrt(t.getPointCount())+1,1,(0,o.i)()));if((s>=4||a>=4)&&this.distanceMultipointMultipoint(e,t,n,i,s,a)<=this.m_maxSqrDistance)return 0}let h=this.m_maxSqrDistance;const m=[e],c=[t],l=this.swapGeometriesIfBGtA(m,c);l&&(this.m_env2DgeometryB=(0,o.c)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB),r=(0,o.c)(a,a=r),p(n,i)),(0,s.b)(_,(0,o.h)(()=>{p(n,i),this.m_env2DgeometryB=(0,o.c)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB)},!l),!1);const g=m[0].getImpl(),d=c[0].getImpl(),y=g.getPointCount(),P=d.getPointCount(),E=P>1;let f=!1;const S=new o.P,x=new o.P;for(let e=0;e<y;e+=a){if(g.queryXY(e,S),E){const e=this.m_env2DgeometryB.sqrDistance(S);if(this.m_bIsNearCalc){if(e>h)continue;if(this.m_env2DgeometryB.sqrMaxMinDistance(S)<=h)return 0}else if(e>=h)continue}for(let t=0;t<P;t+=r){d.queryXY(t,x);const s=o.P.sqrDistance(S,x);if(this.m_bIsNearCalc){if(s<=h)return 0}else if(!(s>h||f&&s===h)&&(!f||s<h)&&(u(n,S,e,0),u(i,x,t,0),f=!0,h=s,0===h))return f?Math.sqrt(h):Number.POSITIVE_INFINITY}}return f?Math.sqrt(h):Number.POSITIVE_INFINITY}catch(h){_.error=h,_.hasError=!0}finally{(0,s.c)(_)}}distanceMultipointMultipath(e,t,n,s){let a=!!this.m_env2DgeometryA.isIntersecting(this.m_env2DgeometryB)&&t.getGeometryType()===i.G.enumPolygon;const h=t.querySegmentIterator();h.stripAttributes();const m=new _.Envelope2D,c=new o.P;let l=this.m_maxSqrDistance;const g=e.getImpl(),p=g.getPointCount(),d=p>1;let y=!1;for(;h.nextPath();)for(;h.hasNextSegment();){const e=h.nextSegment();if(e.queryLooseEnvelope(m),d){const e=m.sqrDistanceEnvelope(this.m_env2DgeometryA,null,null);if(this.m_bIsNearCalc){if(e>l)continue}else if(e>l||y&&e===l)continue}for(let i=0;i<p;i++){if(g.queryXY(i,c),a&&0!==(0,r.h)(t,c,0))return u(n,c,-1,Number.NaN),u(s,c,i,0),0;{const e=m.sqrDistance(c);if(this.m_bIsNearCalc){if(e>l)continue}else if(e>l)continue}const o=e.getClosestCoordinate(c,!1),_=e.getCoord2D(o);c.subThis(_);const p=c.sqrLength();if(this.m_bIsNearCalc){if(p<=l)return 0}else if(!(p>l)&&(!y||p<l)&&(l=p,u(n,g.getXY(i),i,0),u(s,_,h.getStartPointIndex(),o),y=!0,0===l))return 0}a=!1}return y?Math.sqrt(l):Number.POSITIVE_INFINITY}distanceEnvelopeGeometry(e,t,n,s){switch(t.getGeometryType()){case i.G.enumPoint:return this.distancePointEnvelope(t,e,s,n);case i.G.enumMultiPoint:{this.m_env2DgeometryB=(0,o.c)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB);const i=this.distanceMultipointMultipath(t,E(e),s,n);return this.m_env2DgeometryB=(0,o.c)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB),i}case i.G.enumPolyline:case i.G.enumPolygon:return this.distanceMultipathMultipath(E(e),t,n,s);case i.G.enumEnvelope:return this.distanceEnvelopeEnvelope(e,t,n,s);default:return Number.NaN}}distanceEnvelopeEnvelope(e,t,n,s){n.t=Number.NaN,n.index=-1,s.t=Number.NaN,s.index=-1;const i=e.asEnvelope2D(),a=t.asEnvelope2D();return Math.sqrt(i.sqrDistanceEnvelope(a,n.outPoint,s.outPoint))}distanceMultipathGeometry(e,t,n,s){switch(t.getGeometryType()){case i.G.enumPoint:{this.m_env2DgeometryB=(0,o.c)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB);const i=this.distancePointMultipath(t,e,s,n);return this.m_env2DgeometryB=(0,o.c)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB),i}case i.G.enumMultiPoint:{this.m_env2DgeometryB=(0,o.c)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB);const i=this.distanceMultipointMultipath(t,e,s,n);return this.m_env2DgeometryB=(0,o.c)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB),i}case i.G.enumPolyline:case i.G.enumPolygon:return this.distanceMultipathMultipath(e,t,n,s);case i.G.enumEnvelope:return this.distanceMultipathMultipath(e,E(t),n,s);default:return Number.NaN}}distanceMultipathMultipath(e,t,n,i){const r={stack:[],error:void 0,hasError:!1};try{const h=[e],c=[t],u=this.swapGeometriesIfAGtB(h,c);u&&(this.m_env2DgeometryB=(0,o.c)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB),p(n,i)),(0,s.b)(r,(0,o.h)(()=>{p(n,i),this.m_env2DgeometryB=(0,o.c)(this.m_env2DgeometryA,this.m_env2DgeometryA=this.m_env2DgeometryB)},!u),!1);const P=h[0],E=c[0],f=P.querySegmentIterator();f.stripAttributes();const S=E.querySegmentIterator();if(S.stripAttributes(),this.m_bIsNearCalc&&this.m_env2DgeometryA.sqrMaxMinDistanceEnvelope(this.m_env2DgeometryB)<=this.m_maxSqrDistance)return 0;if(this.m_bIsNearCalc){const e=Math.trunc((0,o.s)(Math.sqrt(P.getPointCount())+1,1,(0,o.i)())),t=Math.trunc((0,o.s)(Math.sqrt(P.getPointCount())+1,1,(0,o.i)()));if(this.distanceMultipointMultipoint(P,E,n,i,e,t)<=this.m_maxSqrDistance)return 0}if(this.m_env2DgeometryA.isIntersecting(this.m_env2DgeometryB)){const e=m(),t=m();if(d(P,E,f,S,e,t))return l(n,e),l(i,t),0}const x=y(P),v=[],N=new a.S,A=new _.Envelope2D,D=new _.Envelope2D,M=new _.Envelope2D;let C=this.m_maxSqrDistance,T=!0,q=!1;for(let e=0,t=x.length;e<t;++e){P.querySegment(x[e],N,!0);const t=N.get();if(t.queryEnvelope(A),!(A.sqrDistanceEnvelope(this.m_env2DgeometryB,null,null)>C)){if(this.m_bIsNearCalc&&A.sqrMaxDistanceEnvelope(this.m_env2DgeometryB)<=C)return 0;for(;S.nextPath();){if(this.progress_(),T)E.queryPathEnvelope(S.getPathIndex(),M),v[S.getPathIndex()]=M.clone();else if(A.sqrDistanceEnvelope(v[S.getPathIndex()],null,null)>C)continue;for(;S.hasNextSegment();){const s=S.nextSegment();if(s.queryEnvelope(D),A.sqrDistanceEnvelope(D,null,null)<=C){const a=!A.isIntersecting(D),r=[0],o=[0];let _=t.distance(s,a,r,o);if(_*=_,this.m_bIsNearCalc&&_<=this.m_maxSqrDistance)return 0;if(_<C||_===C&&x[e]<n.index){if(q=!0,g(n,t,x[e],r[0]),g(i,s,S.getStartPointIndex(),o[0]),0===_)return 0;C=_}}}}S.resetToFirstPath(),T=!1}}return q?Math.sqrt(C):Number.POSITIVE_INFINITY}catch(h){r.error=h,r.hasError=!0}finally{(0,s.c)(r)}}swapGeometriesIfAGtB(e,t){return(0,i.v)(e[0])>(0,i.v)(t[0])&&(t[0]=(0,o.c)(e[0],e[0]=t[0]),!0)}swapGeometriesIfBGtA(e,t){return this.swapGeometriesIfAGtB(t,e)}}},68707:(e,t,n)=>{n.d(t,{G:()=>s,S:()=>i});class s{*[Symbol.iterator](){let e=this.next();for(;e;)yield e,e=this.next()}}class i extends s{constructor(e){super(),this.m_iGeom=-1,this.m_aGeoms=e?e.slice():[]}next(){if(this.m_iGeom<this.m_aGeoms.length-1){const e=this.m_aGeoms[++this.m_iGeom];return this.m_aGeoms[this.m_iGeom]=null,e}return null}tock(){return!1}getGeometryID(){return this.m_iGeom}getRank(){return 1}}},90465:(e,t,n)=>{n.d(t,{O:()=>p});var s=n(97799),i=n(82103),a=n(63331),r=n(26871),o=n(91523),_=n(21557),h=n(20265),m=n(88689);function c(){return{m_pGcs:new r.P,m_xyz:new o.d,m_factor:Number.NaN,m_geoLength:Number.NaN,setValues:u,setLength:l,assign:g}}function u(e,t,n,s){this.m_factor=e,this.m_pGcs.assign(t),this.m_xyz.assign(s),this.m_geoLength=n}function l(e){this.m_geoLength=e}function g(e){this.m_pGcs.assign(e.m_pGcs),this.m_xyz.assign(e.m_xyz),this.m_factor=e.m_factor,this.m_geoLength=e.m_geoLength}class p{getOperatorType(){return 10315}supportsCurves(){return!0}accelerateGeometry(e,t,n){return!1}canAccelerateGeometry(e){return!1}_ExecuteShapePreservingLength(e,t,n,s,a){if(e.hasNonLinearSegments()&&(e=(new h.O).execute(e,0,t.getTolerance(0),0,a)),t.isPannable()){let s=90,r=-90;if(1===n.getUnit().getUnitToBaseFactor()&&(s*=Math.PI/180,r*=Math.PI/180),2===t.getCoordinateSystemType()){let e=null;const n=[0,0,0,0];e=t.getPECoordSys(),n[0]=0,n[1]=s,n[2]=0,n[3]=r,i.B.geogToProj(e,2,n),s=n[1],r=n[3]}const o=new _.Envelope2D;e.queryEnvelope(o),o.ymin=r,o.ymax=s,e=(new m.O).execute(e,o,t,a)}else{const n=t.getPCSHorizon();if((e=(new i.g).execute(e,n,t,a))===n){const t=e.clone();e=t}}return e.isEmpty()?0:this._ExecuteIterativeApproach(e,t,n,s,1,a)}_ExecuteIterativeApproach(e,t,n,a,_,h){const m=(0,i.v)();n.querySpheroidData(m);const u=m.majorSemiAxis,l=m.e2,g=n.getUnit().getUnitToBaseFactor(),p=(0,r.k)(c,40),P=(0,r.d)(40,Number.NaN),E=c(),f=c();let S;const x=[0,0,0,0],v=t.getPECoordSys(),N=new r.P,A=new r.P,D=new r.P,M=new r.P,C=new r.P;let T=0;const q=e.querySegmentIterator();for(;q.nextPath();)for(;q.hasNextSegment();){const e=q.nextSegment();N.assign(e.getStartXY()),A.assign(e.getEndXY()),2===t.getCoordinateSystemType()?(x[0]=N.x,x[1]=N.y,x[2]=A.x,x[3]=A.y,i.B.projToGeog(v,2,x),D.x=x[0]*g,D.y=x[1]*g,M.x=x[2]*g,M.y=x[3]*g):(D.setCoordsPoint2D(N),M.setCoordsPoint2D(A),D.scale(g),M.scale(g));const n=new o.d,a=new o.d;d(u,l,D,n),d(u,l,M,a);let r=y(u,n,a);E.setValues(0,D,Number.NaN,n),f.setValues(1,M,r,a),S=_,p[0].assign(f),P[0]=_;let h=0;for(;;){h>128&&(0,s.d)("iterations exceeded");const n=.5*(E.m_factor+f.m_factor),a=e.getCoord2D(n);2===t.getCoordinateSystemType()?(x[0]=a.x,x[1]=a.y,i.B.projToGeog(v,1,x),C.x=x[0]*g,C.y=x[1]*g):(C.setCoordsPoint2D(a),C.scale(g)),D.setCoordsPoint2D(E.m_pGcs),M.setCoordsPoint2D(f.m_pGcs);const m=new o.d;d(u,l,C,m);const c=y(u,E.m_xyz,m),N=y(u,f.m_xyz,m);r=f.m_geoLength,Number.isNaN(r)&&(r=y(u,E.m_xyz,f.m_xyz));const A=c+N,q=S===_&&A>=20&&Math.abs(A-r)>1e-8*(r+A);if(h+2<40&&(q||Math.abs(A-r)>0&&S>0))f.setLength(N),p[h].assign(f),f.setValues(n,C,c,m),p[++h].assign(f),q?(S=_,P[h]=_):(S--,P[h-1]=S,P[h]=S);else{if(T+=A,0===h)break;E.assign(f),f.assign(p[--h]),S=P[h]}}}return T}execute(e,t,n){if(t&&0!==t.getCoordinateSystemType()||(0,s.a)(""),e.isEmpty()||e.getDimension()<1)return 0;let r=null;const o=t.getGCS();o!==t&&(r=(0,i.D)(t,o,null));const _=e.getGeometryType();if(_===s.G.enumEnvelope){const s=new a.a;return s.addEnvelope(e,!1),this._ExecuteShapePreservingLength(s,t,o,r,n)}if((0,s.f)(_)){const s=new a.P;return s.addSegment(e,!0),this._ExecuteShapePreservingLength(s,t,o,r,n)}return this._ExecuteShapePreservingLength(e,t,o,r,n)}}function d(e,t,n,s){s.assign((0,i.E)(e,t,n))}function y(e,t,n){const s=e,i=new o.d;i.setSub(t,n);const a=i.length();return 2*s*Math.asin(a/(2*s))}}}]);
//# sourceMappingURL=30987.d9bf3857.chunk.js.map