{"version":3,"file":"static/js/3595.4df7ebd5.chunk.js","mappings":"+gBAIoH,MAAMA,EAAEC,WAAAA,CAAYD,EAAEE,EAAEC,GAAGC,KAAKC,aAAaH,EAAEE,KAAKE,QAAQC,EAAAA,EAAEC,aAAaR,EAAES,EAAAA,GAAEC,aAAaN,KAAKO,OAAOR,EAAE,CAACS,OAAAA,GAAUR,KAAKE,QAAQO,SAAS,CAAC,eAAIC,GAAc,OAAOV,KAAKC,YAAY,CAAC,YAAIU,GAAW,OAAOX,KAAKY,SAAS,CAAC,SAAIC,GAAQ,OAAOb,KAAKc,MAAM,CAAC,UAAIC,GAAS,OAAOf,KAAKE,OAAO,CAAC,cAAIc,GAAa,OAAOhB,KAAKc,OAAOG,WAAWjB,KAAKE,QAAQc,UAAU,CAACE,SAAAA,CAAUf,EAAEE,EAAET,GAAM,IAAJE,EAACqB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAC,EAAG,MAAMpB,EAAE,IAAIuB,WAAWtB,KAAKa,MAAMV,EAAEH,KAAKU,aAAaL,EAAEF,GAAGH,KAAKU,aAAa,IAAIY,WAAW1B,EAAEiB,MAAMf,EAAEE,KAAKU,aAAaa,IAAIxB,EAAE,CAACyB,WAAAA,GAAcxB,KAAKE,QAAQuB,QAAQzB,KAAKc,OAAO,CAACY,aAAAA,CAAcvB,EAAEE,GAAG,MAAMT,EAAEO,EAAEH,KAAKC,aAAaH,EAAEO,EAAEL,KAAKC,aAAaD,KAAKE,QAAQyB,WAAW,IAAIL,WAAWtB,KAAKc,QAAQlB,EAAEA,EAAEE,EAAE,CAACS,MAAAA,CAAOJ,GAAG,MAAME,EAAEF,EAAEH,KAAKC,aAAaL,EAAE,IAAIgC,YAAYvB,GAAGL,KAAKc,SAASX,GAAGH,KAAKY,UAAU,IAAIU,WAAW1B,GAAG2B,IAAI,IAAID,WAAWtB,KAAKc,SAAS,IAAIQ,WAAW1B,GAAG2B,IAAI,IAAID,WAAWtB,KAAKc,QAAQe,SAAS,EAAE1B,EAAEH,KAAKC,gBAAgBD,KAAKc,OAAOlB,EAAEI,KAAKE,QAAQ4B,QAAQzB,GAAGL,KAAKY,UAAUT,CAAC,ECA5pB,MAAM4B,EAAElC,WAAAA,CAAYQ,GAAGL,KAAKgC,cAAc3B,EAAE4B,SAASC,EAAAA,EAAEC,sBAAsBpC,EAAAA,IAAGC,KAAKoC,cAAc/B,EAAE4B,SAASC,EAAAA,EAAEG,sBAAsBtC,EAAAA,IAAGC,KAAKsC,MAAMjC,EAAE4B,SAASC,EAAAA,EAAEK,cAAcC,EAAAA,IAAGxC,KAAKyC,YAAYpC,EAAE4B,SAASC,EAAAA,EAAEQ,oBAAoBF,EAAAA,IAAGxC,KAAK2C,iBAAiBtC,EAAE4B,SAASC,EAAAA,EAAEU,yBAAyBhD,EAAAA,IAAGI,KAAK6C,MAAMxC,EAAE4B,SAASC,EAAAA,EAAEY,cAAcC,EAAAA,IAAG/C,KAAKgD,sBAAsB3C,EAAE4B,SAASC,EAAAA,EAAEe,8BAA8BF,EAAAA,GAAE,EAAE,MAAMG,EAAErD,WAAAA,CAAYQ,EAAEP,GAAGE,KAAKmD,MAAM9C,EAAEL,KAAKoD,sBAAsBtD,EAAEE,KAAKqD,WAAW,EAAErD,KAAKsD,WAAW,EAAEtD,KAAKuD,YAAY,KAAKvD,KAAKwD,oBAAmB,EAAGxD,KAAKyD,WAAU,EAAGzD,KAAK0D,eAAe,EAAE1D,KAAK2D,UAAS,EAAG3D,KAAKY,UAAU,CAAC,CAACJ,OAAAA,GAAUR,KAAKE,SAASF,KAAKE,QAAQM,SAAS,CAAC,UAAIO,GAAS,OAAOf,KAAKE,QAAQa,MAAM,CAAC,QAAI6C,GAAO,OAAO5D,KAAK6D,KAAK,CAAC,YAAIlD,GAAW,OAAOX,KAAKY,SAAS,CAAC,QAAIkD,GAAO,MAAMzD,EAAEL,KAAKqD,WAAWvD,EAAEE,KAAKsD,WAAW,OAAOjD,GAAGP,EAAEO,EAAEP,EAAEO,EAAEL,KAAKY,UAAUd,CAAC,CAAC,WAAIiE,GAAU,OAAO/D,KAAKqD,aAAarD,KAAKsD,UAAU,CAAC,UAAIU,GAAS,OAAOhE,KAAKsD,cAActD,KAAKqD,WAAW,GAAGrD,KAAKY,SAAS,CAAC,aAAIqD,GAAY,OAAOjE,KAAKqD,UAAU,CAAC,aAAIa,GAAY,OAAOlE,KAAKsD,UAAU,CAAC,cAAIa,GAAa,OAAOnE,KAAKuD,WAAW,CAAC,cAAIvC,GAAY,IAAAoD,EAAAC,EAAC,OAA+B,QAA/BD,EAAmB,QAAnBC,EAAOrE,KAAKE,eAAO,IAAAmE,OAAA,EAAZA,EAAcrD,kBAAU,IAAAoD,EAAAA,EAAE,CAAC,CAACE,KAAAA,GAAQtE,KAAKqD,WAAW,EAAErD,KAAKsD,WAAW,EAAEtD,KAAKuD,YAAY,IAAI,CAACgB,gBAAAA,GAAmBvE,KAAKwD,oBAAmB,CAAE,CAACgB,WAAAA,IAAcC,EAAAA,EAAAA,KAAGzE,KAAKyD,UAAU,oBAAoBzD,KAAKyD,WAAU,EAAGzD,KAAK0D,eAAe1D,KAAKqD,UAAU,CAACqB,SAAAA,IAAYD,EAAAA,EAAAA,IAAEzE,KAAKyD,UAAU,gBAAgBzD,KAAK8D,KAAKzD,EAAAA,GAAEL,KAAKW,UAAUX,KAAK2E,UAAU3E,KAAK2D,UAAU3D,KAAKE,QAAQsB,cAAcxB,KAAK2D,UAAS,GAAI3D,KAAK4E,eAAe5E,KAAK0D,eAAe1D,KAAKqD,YAAYrD,KAAKyD,WAAU,CAAE,CAACoB,YAAAA,IAAeJ,EAAAA,EAAAA,IAAEzE,KAAKyD,UAAU,gBAAgBzD,KAAKgE,QAAQhE,KAAK8E,QAAQ,MAAMzE,EAAEL,KAAKiE,UAAU,OAAOjE,KAAKwD,qBAAqBxD,KAAKuD,YAAYlD,EAAEL,KAAKwD,oBAAmB,GAAIxD,KAAK+E,kBAAiBN,EAAAA,EAAAA,IAAEzE,KAAKqD,aAAarD,KAAKsD,WAAW,oBAAoBjD,CAAC,CAAC2E,QAAAA,IAAWP,EAAAA,EAAAA,IAAEzE,KAAKyD,UAAU,iBAAgBgB,EAAAA,EAAAA,IAAEzE,KAAK8D,KAAK,EAAE,gBAAgB,MAAMzD,EAAEL,KAAKsD,aAAatD,KAAKuD,YAAYvD,KAAKiF,iBAAiB5E,IAAIL,KAAKuD,YAAYvD,KAAKsD,WAAW,CAACwB,KAAAA,GAAQ,MAAMzE,EAAE6E,KAAKC,IAAIC,EAAEF,KAAKG,MAAMrF,KAAKY,UAAUd,EAAAA,KAAIE,KAAKsF,QAAQjF,EAAE,CAACsE,OAAAA,GAAU,MAAMtE,EAAE6E,KAAKC,IAAIC,EAAEF,KAAKG,MAAMrF,KAAKY,UAAUT,EAAAA,KAAIH,KAAKsF,QAAQjF,EAAE,CAACiF,OAAAA,CAAQjF,GAAG,IAAGoE,EAAAA,EAAAA,IAAEzE,KAAKyD,UAAU,gBAAgBpD,IAAIL,KAAKY,UAAU,OAAO,MAAMd,EAAE,IAAIyF,EAAEvF,KAAKmD,MAAMnD,KAAKoD,sBAAsBoC,OAAOnF,GAAG,GAAGL,KAAKE,QAAQ,CAACF,KAAKuD,cAAcvD,KAAKuD,aAAavD,KAAKuD,YAAYvD,KAAKY,UAAUZ,KAAKsD,YAAYtD,KAAKY,WAAW,MAAMP,EAAEL,KAAK8D,KAAK3D,EAAEH,KAAKyF,kBAAkB3F,IAAG2E,EAAAA,EAAAA,IAAEtE,IAAIE,EAAE,sBAAsBL,KAAKE,QAAQM,UAAUR,KAAKsD,WAAW,EAAEtD,KAAKqD,WAAWlD,EAAEH,KAAK0D,eAAe,CAAC,CAAC1D,KAAK2D,UAAS,EAAG3D,KAAKY,UAAUP,EAAEL,KAAKE,QAAQJ,EAAEE,KAAK6D,MAAM,IAAI9B,EAAE/B,KAAKoD,sBAAsBsC,WAAW1F,KAAKE,QAAQW,OAAO,CAAC4E,iBAAAA,CAAkBpF,GAAG,MAAMP,EAAEE,KAAKqD,WAAWlD,EAAEH,KAAKsD,WAAW,OAAOnD,EAAEL,GAAGE,KAAKE,QAAQgB,UAAUf,EAAEL,EAAEO,GAAGP,EAAEK,GAAGA,EAAEL,GAAGE,KAAKE,QAAQgB,UAAUf,EAAEH,KAAKY,UAAUP,GAAGP,EAAE,GAAGE,KAAKE,QAAQgB,UAAU,EAAEpB,EAAEO,EAAEL,KAAKY,UAAUT,GAAGL,GAAGE,KAAKY,UAAUT,IAAI,CAAC,CAAC4E,cAAAA,GAAmB,IAAJ1E,EAACc,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAC,EAAGnB,KAAKqD,YAAYrD,KAAKqD,WAAWhD,GAAGL,KAAKY,SAAS,CAACqE,cAAAA,GAAmB,IAAJ5E,EAACc,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAC,EAAGnB,KAAKsD,YAAYtD,KAAKsD,WAAWjD,GAAGL,KAAKY,SAAS,CAACgE,cAAAA,CAAevE,EAAEP,GAAGO,EAAEP,EAAEE,KAAKE,QAAQwB,cAAcrB,EAAEP,GAAGO,EAAEP,IAAIA,EAAE,GAAGE,KAAKE,QAAQwB,cAAc,EAAE5B,GAAGE,KAAKE,QAAQwB,cAAcrB,EAAEL,KAAKY,WAAW,EAAE,MAAMwE,EAAE,GCAppE,IAAIO,EAA+ZtF,KAAwQsF,IAAIA,EAAE,CAAC,IAA1QtF,EAAEuF,UAAU,GAAG,YAAYvF,EAAEA,EAAEwF,eAAe,GAAG,iBAAiBxF,EAAEA,EAAEyF,QAAQ,GAAG,UAAUzF,EAAEA,EAAE0F,UAAU,GAAG,YAAY1F,EAAEA,EAAE2F,iBAAiB,IAAI,mBAAmB3F,EAAEA,EAAE4F,OAAO,IAAI,SAAS5F,EAAEA,EAAE6F,kBAAkB,IAAI,oBAAoB7F,EAAEA,EAAE8F,OAAO,IAAI,SAAqB,MAAMC,EAAEvG,WAAAA,CAAYQ,GAAGL,KAAKqG,eAAehG,EAAE4B,SAASqE,EAAAA,EAAEC,eAAerE,EAAAA,IAAGlC,KAAKwG,gBAAgBnG,EAAE4B,SAASqE,EAAAA,EAAEG,gBAAgBvE,EAAAA,IAAGlC,KAAK0G,YAAYrG,EAAE4B,SAASqE,EAAAA,EAAEK,YAAYC,EAAAA,IAAG5G,KAAKsC,MAAMjC,EAAE4B,SAASqE,EAAAA,EAAE/D,cAAcgD,EAAAA,IAAGvF,KAAKyC,YAAYpC,EAAE4B,SAASqE,EAAAA,EAAE5D,oBAAoB6C,EAAAA,IAAGvF,KAAK6G,kBAAkBxG,EAAE4B,SAASqE,EAAAA,EAAEQ,kBAAkBC,EAAAA,IAAG/G,KAAKgH,eAAe3G,EAAE4B,SAASqE,EAAAA,EAAEW,eAAe7B,EAAAA,IAAGpF,KAAK2C,iBAAiBtC,EAAE4B,SAASqE,EAAAA,EAAEY,iBAAiBC,EAAAA,IAAGnH,KAAK6C,MAAMxC,EAAE4B,SAASqE,EAAAA,EAAEc,MAAMC,EAAAA,IAAGrH,KAAKgD,sBAAsB3C,EAAE4B,SAASqE,EAAAA,EAAEgB,UAAUD,EAAAA,IAAGrH,KAAKuH,MAAMlH,EAAE4B,SAASqE,EAAAA,EAAEkB,MAAMC,EAAAA,IAAGzH,KAAK0H,SAASrH,EAAE4B,SAASqE,EAAAA,EAAEqB,SAASF,EAAAA,GAAE,EAAE,IAAIG,EAAE,cAAczH,EAAAA,EAAEN,WAAAA,CAAYQ,EAAEF,GAAG0H,MAAMxH,GAAGL,KAAK8H,OAAO,IAAIhI,EAAAA,EAAEE,KAAKY,UAAU,EAAEZ,KAAK+H,MAAM,EAAE/H,KAAKgI,MAAM,EAAEhI,KAAKiI,qBAAqB,IAAIC,IAAIlI,KAAKmI,yBAAyB,IAAID,IAAIlI,KAAKoI,QAAt7C,SAAW/H,GAAG,IAAIF,GAAEkI,EAAAA,EAAAA,MAAIC,QAAQhC,EAAAA,EAAEC,gBAAgB+B,QAAQhC,EAAAA,EAAEG,iBAAiB8B,QAAQjC,EAAAA,EAAEW,gBAAgBuB,QAAQlC,EAAAA,EAAEK,aAAa8B,MAAMnC,EAAAA,EAAE/D,eAAekG,MAAMnC,EAAAA,EAAE5D,qBAAqBgG,MAAMpC,EAAAA,EAAEQ,mBAAmB,OAAOzG,EAAEsI,SAASrC,EAAAA,EAAEY,oBAAoB/G,EAAEA,EAAEyI,MAAMtC,EAAAA,EAAEY,mBAAmB7G,EAAEsI,SAASrC,EAAAA,EAAEc,SAASjH,EAAEA,EAAE0I,OAAOvC,EAAAA,EAAEc,QAAQ/G,EAAEsI,SAASrC,EAAAA,EAAEgB,aAAanH,EAAEA,EAAE0I,OAAOvC,EAAAA,EAAEgB,YAAYnH,EAAEA,EAAE2I,GAAGxC,EAAAA,EAAEkB,OAAOsB,GAAGxC,EAAAA,EAAEqB,UAAUxH,CAAC,CAA4iC4I,CAAE5I,GAAGH,KAAKY,UAAUoI,EAAEhJ,KAAKE,QAAQF,KAAKoI,QAAQa,aAAajJ,KAAKY,WAAWZ,KAAK6D,MAAM,IAAIuC,EAAEpG,KAAKE,QAAQ,CAAC,YAAIS,GAAW,OAAOX,KAAKY,SAAS,CAAC,QAAIkD,GAAO,OAAO9D,KAAK+H,KAAK,CAAC,QAAInE,GAAO,OAAO5D,KAAK6D,KAAK,CAACqF,WAAAA,GAAclJ,KAAK+H,MAAM,EAAE/H,KAAKY,WAAWZ,KAAK8E,QAAQ,MAAMzE,EAAEL,KAAKmJ,YAAY,OAAOnJ,KAAK6D,MAAM0D,MAAMhG,IAAIlB,EAAEsF,EAAEC,WAAW5F,KAAK+H,QAAQ/H,KAAK8H,OAAOsB,KAAK,qBAAqB/I,CAAC,CAACgJ,cAAAA,CAAehJ,GAAG,MAAMF,EAAEH,KAAK6D,MAAM0D,OAAM+B,EAAAA,EAAAA,IAAEjJ,GAAG,GAAGA,EAAEL,KAAKY,WAAW,KAAKT,EAAEoJ,IAAIlJ,GAAGsF,EAAEC,WAAW,2BAA2B5F,KAAKwJ,cAAcnJ,EAAEsF,EAAEQ,QAAQnG,KAAKyJ,eAAepJ,EAAEsF,EAAEM,QAAQjG,KAAK0J,aAAarJ,GAAGL,KAAK8H,OAAOsB,KAAK,oBAAoB,CAACM,YAAAA,CAAarJ,GAAG,MAAMF,EAAEH,KAAK6D,MAAM0D,OAAM+B,EAAAA,EAAAA,IAAEjJ,GAAG,GAAGA,EAAEL,KAAKY,WAAW,KAAKT,EAAEoJ,IAAIlJ,GAAGsF,EAAEC,WAAW,2BAA2BzF,EAAEoB,IAAIlB,EAAE,GAAGL,KAAK+H,OAAO,CAAC4B,iBAAAA,CAAkBtJ,EAAEF,GAAO,IAALJ,IAACoB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,KAAAA,UAAA,GAAKnB,KAAK6D,MAAMwC,eAAeuD,OAAOvJ,EAAEF,GAAGJ,GAAGC,KAAK6J,qBAAqBxJ,EAAE,CAACyJ,iBAAAA,CAAkBzJ,EAAEF,GAAGH,KAAK6D,MAAMwC,eAAe0D,OAAO1J,EAAEF,EAAE,CAAC6J,kBAAAA,CAAmB3J,EAAEF,GAAO,IAALJ,IAACoB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,KAAAA,UAAA,GAAKnB,KAAK6D,MAAM2C,gBAAgBoD,OAAOvJ,EAAEF,GAAGJ,GAAGC,KAAK6J,qBAAqBxJ,EAAE,CAAC4J,kBAAAA,CAAmB5J,EAAEF,GAAGH,KAAK6D,MAAM2C,gBAAgBuD,OAAO1J,EAAEF,EAAE,CAAC0J,oBAAAA,CAAqBxJ,GAAG,MAAMF,EAAEH,KAAK6D,MAAM9D,EAAEmK,EAAEpK,EAAEqK,EAAEhK,EAAEkG,eAAe0D,OAAO1J,EAAE+J,GAAGjK,EAAEqG,gBAAgBuD,OAAO1J,EAAEgK,GAAG,MAAM7H,GAAET,EAAAA,EAAAA,IAAEsI,EAAEA,EAAED,IAAGE,EAAAA,EAAAA,GAAEvK,EAAEyC,EAAE,IAAIA,EAAE,IAAIA,EAAE,KAAKrC,EAAEuG,YAAY6D,OAAOlK,EAAEN,IAAGyK,EAAAA,EAAAA,IAAE1K,EAAE0C,GAAGrC,EAAEmC,MAAMsH,OAAOvJ,EAAEP,GAAG,MAAMF,GAAE6K,EAAAA,EAAAA,IAAEP,EAAE1H,GAAG5C,EAAE8K,OAAOvK,EAAE0G,kBAAkBtF,IAAIlB,EAAE,EAAET,EAAE,IAAIO,EAAE0G,kBAAkBtF,IAAIlB,EAAE,EAAET,EAAE,KAAImD,EAAAA,EAAAA,IAAEjD,EAAEA,IAAG2E,EAAAA,EAAAA,IAAE3E,EAAEA,GAAGK,EAAEsC,YAAYmH,OAAOvJ,EAAEP,GAAGE,KAAKyJ,eAAepJ,EAAEsF,EAAEO,mBAAmBlG,KAAK8H,OAAOsB,KAAK,6BAA6B,CAACuB,MAAMtK,GAAG,CAACuK,iBAAAA,CAAkBvK,EAAEF,GAAG,MAAMJ,EAAEC,KAAK6D,MAAM9D,EAAEuC,MAAMyH,OAAO1J,EAAE8J,GAAGpK,EAAE2G,YAAYmE,OAAOxK,EAAE6J,GAAG/J,EAAE,GAAGgK,EAAE,GAAGhK,EAAE,GAAGgK,EAAE,GAAGhK,EAAE,GAAGgK,EAAE,GAAGhK,EAAE,GAAG,EAAEA,EAAE,GAAGgK,EAAE,GAAGhK,EAAE,GAAGgK,EAAE,GAAGhK,EAAE,GAAGgK,EAAE,GAAGhK,EAAE,GAAG,EAAEA,EAAE,GAAGgK,EAAE,GAAGhK,EAAE,GAAGgK,EAAE,GAAGhK,EAAE,IAAIgK,EAAE,GAAGhK,EAAE,IAAI,EAAEA,EAAE,IAAI+J,EAAE,GAAG/J,EAAE,IAAI+J,EAAE,GAAG/J,EAAE,IAAI+J,EAAE,GAAG/J,EAAE,IAAI,CAAC,CAAC2K,yBAAAA,CAA0BzK,EAAEF,GAAG,MAAMH,KAAK+K,sBAAsB/K,KAAK+K,qBAAqBC,eAAehL,KAAKK,EAAEF,EAAE,CAAC8K,yBAAAA,CAA0B5K,EAAEF,GAAG,OAAOH,KAAK4K,kBAAkBvK,EAAEF,GAAG,MAAMH,KAAK+K,sBAAsB/K,KAAK+K,qBAAqBC,eAAehL,KAAKK,EAAEF,GAAGA,CAAC,CAAC+K,yBAAAA,CAA0B7K,EAAEF,GAAGH,KAAK6D,MAAMwC,eAAe0D,OAAO1J,EAAEF,GAAG,MAAMH,KAAK+K,sBAAsB/K,KAAK+K,qBAAqBC,eAAehL,KAAKK,EAAEF,EAAE,CAACgL,yBAAAA,CAA0B9K,GAAG,IAAIF,EAAEH,KAAK6D,MAAMgD,kBAAkB0C,IAAIlJ,EAAE,GAAG,OAAO,MAAML,KAAK+K,uBAAuB/K,KAAK+K,qBAAqBK,YAAYlB,EAAElK,KAAKK,GAAGF,GAAG+E,KAAKC,IAAI+E,EAAE,GAAGA,EAAE,GAAGA,EAAE,KAAK/J,CAAC,CAACkL,4BAAAA,CAA6BhL,GAAG,IAAIF,EAAEH,KAAK6D,MAAMgD,kBAAkB0C,IAAIlJ,EAAE,GAAG,OAAO,MAAML,KAAK+K,uBAAuB/K,KAAK+K,qBAAqBK,YAAYlB,EAAElK,KAAKK,GAAGF,GAA46D,SAAWE,EAAEF,EAAEJ,GAAG,OAAOmF,KAAKC,IAAID,KAAKoG,IAAIjL,EAAEF,GAAG+E,KAAKoG,IAAIpG,KAAKC,IAAI9E,EAAEF,GAAGJ,GAAG,CAAn/DwL,CAAErB,EAAE,GAAGA,EAAE,GAAGA,EAAE,KAAK/J,CAAC,CAACqL,QAAAA,CAASnL,EAAEF,GAAGH,KAAK6D,MAAMvB,MAAMyH,OAAO1J,EAAEF,EAAE,CAACsL,mBAAAA,CAAoBpL,EAAEF,GAAGH,KAAK6D,MAAMlB,iBAAiB4H,OAAOlK,EAAEF,EAAE,CAACuL,mBAAAA,CAAoBrL,EAAEF,GAAGH,KAAK6D,MAAMlB,iBAAiBkI,OAAOxK,EAAEF,EAAE,CAACwL,QAAAA,CAAStL,EAAEF,GAAGH,KAAK6D,MAAMhB,MAAM0H,OAAOlK,EAAEF,EAAE,CAACyL,wBAAAA,CAAyBvL,EAAEF,GAAGH,KAAK6D,MAAMb,sBAAsBuH,OAAOlK,EAAEF,EAAE,CAAC0L,UAAAA,CAAWxL,EAAEF,GAAGA,IAAIH,KAAK8L,WAAWzL,KAAKL,KAAK+L,cAAc1L,EAAEsF,EAAEG,QAAQ3F,GAAGH,KAAK8H,OAAOsB,KAAK,8BAA8B,CAACuB,MAAMtK,IAAI,CAACyL,UAAAA,CAAWzL,GAAG,OAAOL,KAAKwJ,cAAcnJ,EAAEsF,EAAEG,QAAQ,CAACkG,YAAAA,CAAa3L,EAAEF,GAAG,MAAM8H,qBAAqBlI,GAAGC,KAAKF,EAAEC,EAAEwJ,IAAIlJ,GAAGF,EAAEA,IAAIL,IAAIC,EAAEwB,IAAIlB,EAAEF,GAAGH,KAAK+L,cAAc1L,EAAEsF,EAAEI,WAAU,GAAI/F,KAAK8H,OAAOsB,KAAK,+BAA+BtJ,IAAIC,EAAEkM,OAAO5L,GAAGL,KAAK+L,cAAc1L,EAAEsF,EAAEI,WAAU,GAAI/F,KAAK8H,OAAOsB,KAAK,8BAA8B,CAAC,uBAAI8C,GAAsB,OAAOlM,KAAKiI,oBAAoB,CAACkE,qBAAAA,CAAsB9L,GAAG,OAAOL,KAAKwJ,cAAcnJ,EAAEsF,EAAEI,UAAU,CAACqG,sBAAAA,CAAuB/L,GAAE,IAAAgM,EAAC,MAAMlM,EAAsC,QAArCkM,EAACrM,KAAKmI,yBAAyBoB,IAAIlJ,UAAE,IAAAgM,EAAAA,EAAE,KAAK,OAAOrM,KAAKmI,yBAAyB8D,OAAO5L,GAAGF,CAAC,CAACmM,gBAAAA,CAAiBjM,GAAE,IAAAkM,EAAC,MAAMpM,EAAiC,QAAhCoM,EAACvM,KAAKkM,oBAAoB3C,IAAIlJ,UAAE,IAAAkM,EAAAA,EAAE,KAAK,OAAOpM,EAAEH,KAAKmI,yBAAyB5G,IAAIlB,EAAEF,GAAGH,KAAKmI,yBAAyB8D,OAAO5L,GAAGF,CAAC,CAACqM,QAAAA,CAASnM,GAAG,OAAOL,KAAK6D,MAAM0D,MAAMgC,IAAIlJ,EAAE,CAACoM,WAAAA,CAAYpM,GAAG,OAAOL,KAAK6D,MAAM6D,SAAS6B,IAAIlJ,EAAE,CAACqM,UAAAA,CAAWrM,GAAG,IAAIF,EAAE,EAAE,IAAI,IAAIJ,EAAE,EAAEA,EAAEC,KAAKY,YAAYb,EAAGC,KAAKwM,SAASzM,GAAGM,KAAKF,EAAE,OAAOA,CAAC,CAACsJ,cAAAA,CAAepJ,EAAEF,GAAG,MAAMJ,EAAEC,KAAK6D,MAAM0D,MAAMpH,EAAEJ,EAAEwJ,IAAIlJ,GAAGF,EAAEJ,EAAEwB,IAAIlB,EAAEF,EAAE,CAACwM,gBAAAA,CAAiBtM,EAAEF,GAAG,MAAMJ,EAAEC,KAAK6D,MAAM0D,MAAMpH,EAAEJ,EAAEwJ,IAAIlJ,IAAIF,EAAEJ,EAAEwB,IAAIlB,EAAEF,EAAE,CAAC4L,aAAAA,CAAc1L,EAAEF,EAAEJ,GAAGA,EAAEC,KAAKyJ,eAAepJ,EAAEF,GAAGH,KAAK2M,iBAAiBtM,EAAEF,EAAE,CAACqJ,aAAAA,CAAcnJ,EAAEF,GAAG,SAASH,KAAK6D,MAAM0D,MAAMgC,IAAIlJ,GAAGF,EAAE,CAAC2E,KAAAA,GAAQ9E,KAAKY,UAAUsE,KAAKC,IAAI6D,EAAE9D,KAAKG,MAAMrF,KAAKY,UAAUb,EAAAA,KAAIC,KAAKE,QAAQF,KAAKoI,QAAQa,aAAajJ,KAAKY,WAAWgM,SAAS5M,KAAKE,SAASF,KAAK6D,MAAM,IAAIuC,EAAEpG,KAAKE,QAAQ,CAACiJ,SAAAA,GAAY,MAAM9I,EAAEL,KAAK6D,MAAM0D,MAAM,IAAIpH,EAAEH,KAAKgI,MAAM,KAAK3H,EAAEkJ,IAAIpJ,GAAGwF,EAAEC,WAAWzF,EAAEA,EAAE,IAAIH,KAAKY,UAAU,EAAET,EAAE,EAAE,OAAOH,KAAKgI,MAAM7H,EAAE,IAAIH,KAAKY,UAAU,EAAET,EAAE,EAAEA,CAAC,IAA8EE,EAAAA,EAAAA,GAAE,EAACmC,EAAAA,EAAAA,IAAE,CAACqK,eAAc,KAAMjF,EAAEkF,UAAU,4BAAuB,IAAQzM,EAAAA,EAAAA,GAAE,EAACmC,EAAAA,EAAAA,OAAKoF,EAAEkF,UAAU,aAAQ,IAAQzM,EAAAA,EAAAA,GAAE,EAACmC,EAAAA,EAAAA,IAAE,CAACuK,UAAS,KAAMnF,EAAEkF,UAAU,OAAO,MAAMlF,GAAEvH,EAAAA,EAAAA,GAAE,EAACT,EAAAA,EAAAA,GAAE,6DAA6DgI,GAAG,MAAMsC,GAAEhH,EAAAA,EAAAA,MAAIiH,GAAE6C,EAAAA,EAAAA,MAAI5C,GAAE6C,EAAAA,EAAAA,MAAI5C,GAAE4C,EAAAA,EAAAA,M,eCA30O,MAAMlK,UAAU0B,EAAAA,EAAE5E,WAAAA,CAAYM,EAAEP,GAAGiI,MAAOxH,IAAGN,EAAAA,EAAAA,GAAEC,KAAKkN,cAActJ,KAAKoD,eAAe6D,OAAOxK,EAAEL,KAAKmN,aAAc,CAACC,aAAa,KAAKpN,KAAKkN,cAAc/M,EAAEH,KAAKqN,gBAAgBzN,EAAEI,KAAKmN,YAAWrN,EAAAA,EAAAA,KAAIE,KAAKsN,UAASjN,EAAAA,EAAAA,KAAG,CAAC6I,WAAAA,CAAY7I,GAAG,MAAMN,EAAEC,KAAKkN,cAActJ,KAAKoD,eAAelH,EAAEE,KAAKkN,cAAcjC,0BAA0B5K,EAAEL,KAAKsN,WAAUnN,EAAAA,EAAAA,IAAEP,EAAAA,EAAAA,GAAEI,KAAKmN,YAAYnN,KAAKqN,gBAAgBE,OAAOzN,GAAGE,KAAKmN,WAAW,GAAGnN,KAAKqN,gBAAgBG,QAAOhL,EAAAA,EAAAA,IAAE1C,GAAGC,EAAEwK,OAAOlK,EAAEL,KAAKmN,YAAYnN,KAAKyN,IAAI,CAACpN,GAAG,CAACgJ,cAAAA,CAAehJ,GAAGL,KAAK0N,OAAO,CAACrN,GAAG,ECAtyB,MAAMF,EAAEN,WAAAA,CAAYM,EAAEL,GAAGE,KAAK2N,kBAAkBxN,EAAEH,KAAK4N,qBAAqB9N,CAAC,CAAC+N,WAAAA,CAAY1N,EAAEL,EAAEO,GAAG,MAAM0B,EAAE1B,EAAEyN,yBAAyB3N,GAAGP,EAAEI,KAAK2N,kBAAkB7N,EAAEiC,EAAE,IAAIhC,EAAE,EAAE,IAAI,IAAIyC,EAAE,EAAEA,EAAExC,KAAK4N,qBAAqBxM,SAASoB,EAAE5C,GAAGI,KAAK4N,qBAAqBpL,KAAKzC,EAAEyC,GAAG,OAAOzC,CAAC,E,sCCAiF,MAAMyC,GAAE3C,WAAAA,CAAY2C,EAAEO,GAAG,MAAMuH,EAAE9H,EAAEuL,cAAcC,KAAK5I,EAAErC,EAAEkL,SAAS/K,EAAEH,EAAEkL,SAASC,oBAAoBjB,EAAE/J,EAAEiL,SAASnO,KAAKoO,WAAW5L,EAAE6L,UAAUpB,EAAEqB,cAAc,CAACC,0BAAyB,IAAKvO,KAAKiO,SAAS7I,EAAEpF,KAAKmO,SAASlB,EAAEjN,KAAKwO,YAAY,IAAI5O,EAAAA,EAAEqN,EAAEjN,KAAKoO,YAAYpO,KAAKyO,mBAAmBvL,EAAEuL,mBAAmBzO,KAAK0O,IAAI3O,EAAAA,EAAEK,aAAakK,EAAExK,EAAAA,GAAEQ,YAAY4C,EAAEnC,QAAQf,KAAK2O,IAAI,IAAInE,GAAAA,EAAEF,EAAEjK,EAAAA,EAAE,IAAI6H,IAAI,CAAC,CAAC,YAAW/H,EAAAA,EAAAA,GAAE+C,EAAEuL,uBAAuB,IAAIvG,IAAI,CAAC,CAAC,WAAWlI,KAAK0O,QAAQ1O,KAAK4O,YAAY1L,EAAE2L,YAAY,CAACrO,OAAAA,GAAUR,KAAKwO,YAAY/N,UAAUT,KAAK0O,IAAIjO,UAAUT,KAAK2O,IAAIlO,SAAS,CAAC,gBAAIqO,GAAe,OAAO9O,KAAKiO,SAASa,YAAY,CAAC,iBAAIC,GAAgB,OAAO/O,KAAK4O,YAAY,CAAC,CAAC,cAAI5N,GAAa,OAAO,IAAIhB,KAAK0O,IAAI1N,WAAWhB,KAAK2O,IAAI3N,UAAU,CAACgO,SAAAA,CAAU7O,EAAEE,EAAET,EAAE4K,EAAEzK,EAAED,EAAE0C,EAAEO,GAAG,OAAO/C,KAAKiO,SAASe,UAAU7O,EAAEE,EAAET,EAAE4K,EAAEzK,EAAED,EAAE0C,EAAEO,EAAE,ECAnvB,MAAMP,GAAE,mBAAayM,CAAO9O,EAAEP,EAAEE,GAAG,MAAMC,QAAQmP,QAAQC,WAAWvP,EAAEwP,WAAWC,IAAK7E,GAAGrK,EAAEmP,WAAWC,SAAU,IAAI,IAAInK,GAAEjF,EAAEqK,GAAI1K,KAAMiC,EAAEhC,EAAEsP,IAAK7E,GAAG,cAAcA,EAAEgF,OAAOhF,EAAEiF,MAAM,MAAOC,OAAOlF,EAAAA,IAAG,IAAGzH,EAAAA,EAAAA,IAAEjD,IAAIiC,EAAEX,SAASrB,EAAEqB,OAAO,CAACW,EAAE4N,QAASnF,GAAGA,EAAEhK,YAAYH,EAAAA,EAAAA,IAAEP,GAAG,IAAI,MAAM0K,KAAKzK,EAAE,GAAG,aAAayK,EAAEgF,OAAO,MAAMhF,EAAEoF,MAAM,CAAC,OAAO,IAAIpN,GAAE5C,EAAEiQ,qBAAqB9N,EAAE,CAAClC,WAAAA,CAAY2K,EAAEzH,GAAG/C,KAAK6P,qBAAqBrF,EAAExK,KAAKoP,WAAWrM,CAAC,CAACvC,OAAAA,GAAUR,KAAKoP,WAAWO,QAASnF,GAAGA,EAAEhK,UAAW,CAACwO,SAAAA,CAAUxE,EAAEzH,EAAE1C,EAAEF,EAAEP,EAAEE,EAAEC,GAAGC,KAAKoP,WAAWO,QAAS5N,GAAGA,EAAEiN,UAAUxE,EAAEzH,EAAE1C,EAAEF,EAAEP,EAAEE,EAAEE,KAAKgH,eAAejH,GAAI,CAAC,eAAI+P,GAAc,GAAG,MAAM9P,KAAK+P,aAAa,CAAC,MAAMvF,GAAE5K,EAAAA,EAAAA,MAAII,KAAKoP,WAAWO,QAAS5M,IAAI,MAAMA,EAAE+L,gBAAehP,EAAAA,EAAAA,IAAE0K,EAAEzH,EAAE+L,aAAakB,QAAOlQ,EAAAA,EAAAA,IAAE0K,EAAEzH,EAAE+L,aAAamB,UAAWjQ,KAAK+P,aAAavF,CAAC,CAAC,OAAOxK,KAAK+P,YAAY,CAAC,kBAAI/I,GAAiB,GAAG,MAAMhH,KAAKqN,gBAAgB,CAAC,MAAM7C,EAAExK,KAAK8P,YAAY/M,GAAE5C,EAAAA,EAAAA,OAAIJ,EAAAA,EAAAA,IAAEyK,EAAEzH,GAAG/C,KAAKqN,gBAAgB,CAACE,OAAOxK,EAAEyK,OAAO,IAAGzL,EAAAA,EAAAA,IAAEyI,GAAG,CAAC,OAAOxK,KAAKqN,eAAe,CAAC,iBAAI0B,GAAgB,OAAO/O,KAAKoP,WAAWc,OAAQ,CAAC1F,EAAEzH,IAAIyH,EAAEzH,EAAEgM,cAAe,EAAE,E,2ECAslC,IAAIoB,GAAE,cAAc1F,EAAAA,GAAE5K,WAAAA,CAAYM,EAAEE,GAAGwH,MAAM1H,GAAGH,KAAKoQ,KAAK3I,EAAAA,EAAE4I,IAAIrQ,KAAKsQ,UAAS,EAAGtQ,KAAKuQ,QAAQ,GAAGvQ,KAAKwQ,2BAA2B,IAAIC,MAAMzQ,KAAK0Q,gCAAgC,IAAIxI,IAAIlI,KAAK2Q,eAAe,EAAE3Q,KAAK4Q,iBAAiB,EAAE5Q,KAAK6Q,aAAY,EAAG7Q,KAAK8Q,QAAQ,IAAIzI,EAAAA,EAAErI,KAAK+Q,+BAA+B,EAAE/Q,KAAKgR,gBAAe,EAAGhR,KAAKiR,SAAS,IAAI/I,IAAI,CAAC,CAACnB,EAAAA,EAAEmK,gBAAgB/Q,GAAGH,KAAKmR,UAAUhR,IAAI,CAAC4G,EAAAA,EAAEqK,qBAAqBjR,KAAKH,KAAKqR,yBAAyBrR,KAAKmR,UAAUhR,MAAMH,KAAKkN,cAAc,IAAI7F,EAAE,CAAC0D,qBAAqB5K,EAAE4K,sBAAsB5K,EAAEmR,gBAAgBtR,KAAKuR,WAAWlR,EAAEmR,aAAaC,GAAAA,GAAEC,aAAa1R,MAAM,CAAC2R,UAAAA,GAAa3R,KAAKoD,sBAA09S,SAAWjD,GAAG,IAAIE,GAAE6J,EAAAA,EAAAA,MAAI0H,MAAMjM,EAAAA,EAAExD,uBAAuByP,MAAMjM,EAAAA,EAAEtD,uBAAuBoG,MAAM9C,EAAAA,EAAEpD,eAAekG,MAAM9C,EAAAA,EAAEjD,qBAAqB,OAAO,MAAMvC,GAAGA,EAAEwI,SAAS,sBAAsBtI,EAAEA,EAAEuI,MAAMjD,EAAAA,EAAE/C,2BAA2B,MAAMzC,GAAGA,EAAEwI,SAAS,WAAWtI,EAAEA,EAAEwI,OAAOlD,EAAAA,EAAE7C,gBAAgB,MAAM3C,GAAGA,EAAEwI,SAAS,2BAA2BtI,EAAEA,EAAEwI,OAAOlD,EAAAA,EAAE1C,gCAAgC5C,CAAC,CAA/zTwR,CAAE7R,KAAKsR,gBAAgBtR,KAAK8R,yBAAwBxL,EAAAA,EAAAA,GAAEtG,KAAKoD,sBAAsB,GAAGpD,KAAKuR,WAAW,CAACvR,KAAKkN,cAAcpF,OAAOiK,GAAG,oBAAqB,IAAI/R,KAAKgS,uBAAwBhS,KAAKkN,cAAcpF,OAAOiK,GAAG,6BAA8BE,IAAa,IAAXtH,MAAMxK,GAAE8R,EAAIjS,KAAKgS,sBAAsBhS,KAAKkS,SAASC,6BAA6BhS,KAAMH,KAAKkN,cAAcpF,OAAOiK,GAAG,8BAA+BK,IAAa,IAAXzH,MAAMxK,GAAEiS,EAAIpS,KAAKgS,qBAAoB,GAAIhS,KAAKkS,SAASG,+BAA+BlS,KAAMH,KAAKkN,cAAcpF,OAAOiK,GAAG,6BAA8B,IAAI/R,KAAKgS,qBAAoB,KAAO,CAAC,0BAAIM,GAAyB,MAAM,CAACtS,KAAKwQ,8BAA8BxQ,KAAK0Q,gCAAgC6B,SAAS,CAAC,+CAAIC,GAA8C,MAAMrS,EAAE,CAACH,KAAKwQ,4BAA4B,IAAI,MAAMnQ,KAAKL,KAAK0Q,gCAAgCrQ,EAAE,KAAKoS,GAAAA,IAAGtS,EAAEuS,KAAKrS,EAAE,IAAI,OAAOF,CAAC,CAACwS,YAAAA,CAAaxS,GAAG,OAAOH,KAAK0Q,gCAAgCkC,IAAIzS,EAAE,CAAC,yBAAI0S,GAAwB,OAAO7S,KAAK8S,OAAOC,OAAO3R,OAAO,CAAC,CAAC,UAAI2R,GAAS,OAAO/S,KAAKuQ,OAAO,CAAC,mBAAIyC,GAAkB,OAAOhT,KAAKuQ,QAAQvQ,KAAKuQ,QAAQnP,OAAO,GAAG0O,WAAW,CAAC,sBAAImD,GAAqB,OAAOjT,KAAKuQ,QAAQvQ,KAAKuQ,QAAQnP,OAAO,GAAG4F,cAAc,CAAC,gBAAIkM,GAAe,OAAOlT,KAAKuQ,QAAQvQ,KAAKuQ,QAAQnP,OAAO,GAAGgO,WAAW,GAAGjB,QAAQ,CAAC,qBAAIgF,GAAoB,OAAOnT,KAAK6Q,WAAW,CAAC,qBAAIsC,CAAkBhT,GAAGH,KAAK6Q,YAAY1Q,CAAC,CAAC,gBAAIiT,GAAe,OAAOpT,KAAKkS,SAASkB,YAAY,CAAC,gBAAIC,GAAe,OAAOrT,KAAKkN,aAAa,CAAC,gBAAIoG,GAAe,OAAOtT,KAAKuQ,QAAQgD,KAAMpT,GAAGA,EAAEiP,WAAWmE,KAAMpT,GAAGA,EAAEgO,SAASmF,cAAgB,CAAC,cAAItS,GAAa,OAAOhB,KAAKsS,uBAAuBpC,OAAQ,CAAC/P,EAAEE,IAAIA,EAAE6P,OAAQ,CAAC/P,EAAEE,IAAIF,EAAEE,EAAEW,WAAYb,GAAIH,KAAKuQ,QAAQL,OAAQ,CAAC/P,EAAEE,IAAIF,EAAEE,EAAE+O,WAAWc,OAAQ,CAAC/P,EAAEE,IAAIF,EAAEE,EAAEW,WAAY,GAAI,GAAG,CAAC,eAAIwS,GAAc,MAAMrT,EAAEH,KAAKkN,cAAcpJ,KAAKzD,EAAE,GAAG,OAAOL,KAAKuQ,QAAQZ,QAAS,CAACxP,EAAEP,KAAK,MAAMmD,EAAE/C,KAAKsS,uBAAuB,GAAG1S,GAAGkE,KAAK9D,KAAKsS,uBAAuB,GAAG1S,GAAGkE,KAAK/D,EAAEI,EAAE4O,cAAc1O,EAAEqS,KAAK,CAACe,kBAAkB1Q,EAAE2Q,kBAAkB3Q,EAAEhD,EAAE4T,qBAAqB5T,MAAO,CAAC6T,eAAezT,EAAEsT,kBAAkBpT,EAAE6P,OAAQ,CAAC/P,EAAEE,IAAIF,EAAEE,EAAEoT,kBAAmB,GAAGC,kBAAkBrT,EAAE6P,OAAQ,CAAC/P,EAAEE,IAAIF,EAAEE,EAAEqT,kBAAmB,GAAGX,OAAO1S,EAAE,CAACwT,8BAAAA,GAAoC,IAAL1T,EAACgB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAC,GAAI,MAAM6M,KAAK3N,GAAGL,KAAK8T,SAAS/F,cAAc,OAAO/N,KAAK8S,OAAOC,OAAO1D,IAAKzP,IAAIO,EAAEuS,KAAK,IAAInH,EAAElL,EAAEL,KAAKoD,0BAA2BjD,CAAC,CAAC,6BAAM4T,CAAwB5T,EAAEP,GAAGI,KAAK8T,SAAS3T,EAAEH,KAAK6T,+BAA+B7T,KAAKwQ,4BAA4B,MAAMzN,QAAQmM,QAAQC,WAAWnP,KAAK8S,OAAOC,OAAO1D,IAAKhP,GAAG+J,GAAE6E,OAAO9O,EAAEE,EAAET,KAAMG,EAAEgD,EAAEsM,IAAKlP,GAAG,cAAcA,EAAEqP,OAAOrP,EAAEsP,MAAM,MAAOC,OAAOrP,EAAAA,IAAG,IAAGP,EAAAA,EAAAA,IAAEF,IAAIG,EAAEqB,SAAS2B,EAAE3B,OAAO,CAACrB,EAAE4P,QAASxP,GAAGA,EAAEK,YAAYgK,EAAAA,EAAAA,IAAE5K,GAAG,IAAI,MAAMO,KAAK4C,EAAE,GAAG,aAAa5C,EAAEqP,OAAO,MAAMrP,EAAEyP,MAAM,CAAC5P,KAAKuQ,QAAQxQ,EAAEC,KAAKgU,eAAh7G7T,KAAI,MAAME,EAAEF,EAAE8S,mBAAmBzF,OAAO5N,EAAEO,EAAE4S,OAAO1D,IAAKlP,GAAGA,EAAE0P,sBAAuB,OAAO,IAAIvG,EAAEjJ,EAAET,IAA41GqU,CAAEjU,KAAK,CAACkU,yBAAAA,GAA4BlU,KAAKmU,oBAAoBnU,KAAKuQ,QAAQZ,QAASxP,GAAGA,EAAEK,WAAYR,KAAKwQ,2BAA2Bb,QAASxP,GAAGA,EAAEK,WAAYR,KAAK0Q,gCAAgCf,QAASxP,GAAGA,EAAEwP,QAASxP,GAAGA,EAAEK,WAAa,CAAC6Q,qBAAAA,GAAwB,OAAOrR,KAAKuQ,QAAQgD,KAAMpT,GAAGA,EAAEiP,WAAWmE,KAAMpT,IAAI,MAAME,EAAEF,EAAEgO,SAAS8C,SAAS1H,IAAIxC,EAAAA,EAAEqK,sBAAsB,OAAQ,OAAD/Q,QAAC,IAADA,OAAC,EAADA,EAAI+F,EAAAA,EAAEgO,SAAW,CAACC,aAAAA,GAAgB,OAAOtR,EAAAA,EAAAA,IAAE/C,KAAK0Q,gCAAiCvQ,GAAGA,EAAEoT,KAAMpT,GAAGA,EAAE2D,KAAK,GAAK,CAACqN,SAAAA,CAAUhR,GAAG,OAAOA,IAAIiG,EAAAA,EAAEkO,WAAWtU,KAAKqU,mBAAmBlU,IAAIiG,EAAAA,EAAEmO,iBAAiBvU,KAAK2S,aAAaF,GAAAA,IAAG,CAAC+B,aAAAA,CAAcrU,GAAG,IAAI8M,EAAAA,EAAEwH,sCAAsC,CAAC,GAAGzU,KAAK6S,sBAAsB,CAAC,MAAMxS,EAAEF,EAAEuU,KAAKC,cAAcC,OAAO5U,KAAK8Q,SAAS9Q,KAAK8Q,QAAQlE,SAASzM,EAAEuU,KAAKC,eAAetU,GAAGL,KAAKgS,qBAAqB,CAAChS,KAAKgR,iBAAiBhR,KAAK6U,QAAQC,GAAAA,IAAG9U,KAAKgR,gBAAe,EAAG,CAAC,CAAC+D,iBAAAA,CAAkB5U,GAAG,IAAIH,KAAKkT,aAAa8B,UAAUhV,KAAKkT,aAAa+B,mBAAmB9U,EAAE+U,QAAQ,OAAO,KAAK,MAAM7U,EAAEL,KAAKmV,kBAAkBhV,GAAG,IAAIE,EAAE,OAAO,KAAK,MAAMT,EAAE,IAAI6Q,MAAM1N,EAAE/C,KAAK+S,OAAO,OAAO1S,EAAEsP,QAAStP,GAAG0C,EAAE4M,QAAS,CAAAyF,EAAgBrV,KAAC,IAAfqP,WAAWrM,GAAEqS,EAAA,OAAKrS,EAAE4M,QAAS5M,GAAGnD,EAAE8S,KAAK1S,KAAKqV,gBAAgBlV,EAAEE,EAAEN,GAAGgD,QAAUnD,CAAC,CAAC0V,MAAAA,CAAOnV,EAAEE,GAAG,MAAMT,EAAEI,KAAKmV,kBAAkBhV,GAAG,IAAIP,GAAG,MAAMS,EAAE,OAAO,IAAI0C,EAAE,EAAE5C,EAAE6N,KAAKuH,UAAU,MAAMxV,EAAEC,KAAK+S,OAAOnT,EAAE+P,QAAS/P,GAAGG,EAAE4P,QAAS,CAAA6F,EAAgBhT,KAAC,IAAf4M,WAAWrP,GAAEyV,EAAA,OAAKzV,EAAE4P,QAAS5P,GAAGC,KAAKyV,iBAAiBtV,EAAEE,EAAE0C,KAAKnD,EAAE4C,GAAGzC,EAAEyC,MAAQ,CAAC2S,iBAAAA,CAAkBhV,GAAG,MAAM+U,OAAO7U,EAAEqU,KAAK9U,GAAGO,EAAE4C,EAAE1C,IAAI+F,EAAAA,EAAEkO,UAAUvU,EAAEM,IAAI+F,EAAAA,EAAEmO,gBAAgB/R,GAAGO,IAAIhD,EAAED,EAAEO,IAAI+F,EAAAA,EAAEsP,uBAAuB,GAAGlT,EAAE,OAAO1C,EAAEE,KAAKsS,uBAAuBtS,KAAKwS,4CAA4C,MAAM9B,gCAAgClG,GAAGxK,KAAK,GAAGF,EAAE,CAAC,GAAGiD,EAAE,KAAA4S,EAAC,MAAMxV,EAAa,QAAZwV,EAAC/V,EAAEgW,iBAAS,IAAAD,OAAA,EAAXA,EAAaE,KAAK,IAAI1V,EAAE,OAAO,KAAK,MAAME,EAAEmK,EAAEjB,IAAIpJ,GAAG,OAAOE,EAAE,CAACA,GAAG,IAAI,CAAC,MAAMF,EAAEqK,EAAEjB,IAAIkJ,GAAAA,IAAG,OAAO1S,EAAEI,EAAE,CAACA,GAAG,KAAKsQ,MAAMqF,KAAKtL,EAAE+H,SAAS,CAAC,OAAO,IAAI,CAACvD,SAAAA,CAAU7O,EAAEE,EAAET,EAAEmD,GAAG,IAAI/C,KAAKkT,aAAa8B,SAAS,MAAMhV,KAAK+V,QAAQ,OAAO,MAAMhW,GAAE6G,EAAAA,EAAAA,OAAI1E,EAAAA,EAAAA,GAAEnC,EAAEgD,EAAEnD,GAAG,MAAM4C,EAAEzC,IAAIC,KAAKkN,cAAcjC,0BAA0BlL,EAAEiW,IAAG7V,EAAE8V,UAAU1U,IAAIyU,KAAG1L,EAAAA,EAAAA,GAAE4L,GAAEtW,EAAEO,EAAE8V,UAAUE,UAAS7L,EAAAA,EAAAA,GAAE8L,GAAErT,EAAE5C,EAAE8V,UAAUE,SAAS,MAAM3T,EAAExC,KAAKkN,cAAcV,SAASzM,GAAGD,EAAEE,KAAKkN,cAAcT,YAAY1M,GAAGyK,EAAExK,KAAKuQ,QAAQnP,QAAO+F,EAAAA,EAAAA,IAAE,KAAK3E,EAAE6T,EAAElQ,QAAQ,2BAA0BgB,EAAAA,EAAAA,IAAErH,GAAG,GAAGA,EAAE0K,EAAE,oBAAoBxK,KAAKuQ,QAAQzQ,GAAGkP,UAAU7O,EAAEE,EAAE6V,GAAEE,GAAErW,EAAEC,KAAKkS,SAAS1H,IAAIxK,KAAKkT,aAAaoD,WAAWC,eAAevW,KAAK+V,QAAQpG,QAAQnN,GAAGxC,KAAK+V,QAAQS,gBAAgB5W,EAAEG,EAAEyC,EAAE,CAACiU,iCAAAA,GAAoCzW,KAAKmU,oBAAoBnU,KAAKgS,qBAAqB,CAAC,WAAI+D,GAAU,GAAG,MAAM/V,KAAK0W,cAAc,KAAAC,EAAC,MAAMxW,EAAEH,KAAKkN,cAAc7M,EAAQ,QAAPsW,EAACxW,EAAEyD,YAAI,IAAA+S,OAAA,EAANA,EAAQpP,MAAM,IAAIlH,EAAE,OAAO,KAAKL,KAAK0W,cAAc,IAAIE,EAAEzW,EAAEH,KAAKiT,oBAAoB,IAAI,IAAIrT,EAAE,EAAEA,EAAEO,EAAEQ,WAAWf,EAAES,EAAEkJ,IAAI3J,GAAGyW,EAAElQ,QAAQnG,KAAK0W,cAAcxN,YAAYtJ,EAAE,CAAC,OAAOI,KAAK0W,aAAa,CAACvC,iBAAAA,GAAoBnU,KAAK0W,eAAclU,EAAAA,EAAAA,IAAExC,KAAK0W,cAAc,CAACG,eAAAA,CAAgB1W,GAAG,GAAG,MAAMH,KAAK+V,QAAQ,OAAO,IAAI1L,EAAAA,EAAE,MAAMhK,EAAEF,EAAE2W,YAAYlX,EAAEI,KAAK+V,QAAQgB,YAAY1W,EAAE0I,EAAAA,EAAEiO,WAAWC,cAAc9W,EAAE+W,SAASnU,EAAE/C,KAAK+V,QAAQgB,YAAY1W,EAAE0I,EAAAA,EAAEiO,WAAWG,cAAchX,EAAE+W,SAAS,GAAG,MAAMtX,GAAG,MAAMmD,EAAE,OAAO,IAAIsH,EAAAA,EAAE,MAAMtK,EAAEI,EAAEiX,IAAI5U,EAAExC,KAAKkN,cAActJ,KAAKpB,EAAEwE,eAAe6D,OAAOjL,EAAEyX,KAAGnV,EAAAA,EAAAA,GAAEmV,GAAEA,GAAEtX,GAAG,MAAMD,GAAEsF,EAAAA,EAAAA,GAAEiS,GAAEhX,GAAGgX,GAAE,GAAG7U,EAAEwE,eAAe6D,OAAO9H,EAAEsU,KAAGnV,EAAAA,EAAAA,GAAEmV,GAAEA,GAAEtX,GAAG,MAAMyK,GAAEpF,EAAAA,EAAAA,GAAEiS,GAAEhX,GAAGgX,GAAE,GAAG,OAAO,IAAIhN,EAAAA,EAAEvK,EAAE0K,EAAE,CAACwH,mBAAAA,GAAyB,IAAL7R,EAACgB,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,GAAKnB,KAAK+Q,+BAA+B,EAAE/Q,KAAK4Q,iBAAiB5Q,KAAK2Q,eAAexQ,IAAIH,KAAKgR,gBAAe,EAAGhR,KAAK8T,SAASwD,gBAAgB,CAACC,iBAAAA,GAAoBvX,KAAK+Q,gCAAgC/Q,KAAKsS,uBAAuB3C,QAASxP,GAAGA,EAAEwP,QAASxP,GAAGA,EAAEoE,oBAAsB,CAAC,WAAIiT,GAAU,OAAOxX,KAAKkN,cAAcpJ,KAAK,GAAG9D,KAAK+Q,8BAA8B,CAAC,CAAC8D,OAAAA,CAAQ1U,GAAG,MAAM0S,sBAAsBxS,EAAEyQ,QAAQ/N,EAAEiR,eAAexR,GAAGxC,KAAKA,KAAKsS,uBAAuB3C,QAASxP,GAAGA,EAAEwP,QAASxP,GAAGA,EAAEqE,gBAAkB,MAAM1E,EAAEE,KAAKkN,cAAc1C,EAAE1K,EAAE8D,KAAK,IAAIoJ,EAAElN,EAAEgE,KAAK,MAAM/B,EAAEjC,EAAEa,SAAS,IAAI8D,EAAEzE,KAAK2Q,eAAe,MAAMzO,EAAEgD,KAAKuS,KAAK1V,EAAE,MAAM2O,gCAAgCtL,GAAGpF,KAAK,IAAI,IAAIsK,EAAE,EAAEA,EAAE0C,IAAI7M,EAAEuX,OAAOpN,EAAE,CAAC7F,IAAIzE,KAAK4Q,kBAAkB5Q,KAAKuX,oBAAoB,MAAMjN,EAAEE,EAAEjD,MAAMgC,IAAI9E,GAAG,IAAImC,EAAE,EAAE,KAAK0D,EAAE+L,EAAEzQ,WAAW,CAACnB,EAAEA,EAAE,IAAI1C,EAAE,EAAE0C,EAAE,EAAEuI,IAAI,QAAQ,CAAC,MAAM9J,EAAEsH,EAAE9C,SAAS6B,IAAI9E,GAAG,GAAG6F,EAAE+L,EAAExQ,gBAAgB7F,KAAKwQ,2BAA2BtN,GAAG8B,WAAWsF,EAAE+L,EAAErQ,iBAAiB,CAAC,MAAM7F,EAAEL,EAAEsM,uBAAuB3H,GAAG,GAAGtE,EAAE,CAAC,MAAME,EAAE+E,EAAEmE,IAAIpJ,GAAG,IAAIE,EAAE,MAAM,IAAIT,EAAAA,EAAE,wBAAwB,iCAAiCS,EAAE6C,GAAG8B,WAAW3E,EAAEsX,MAAOxX,GAAGA,EAAE4D,WAAY1D,EAAEsP,QAASxP,GAAGA,EAAEK,WAAY4E,EAAE6G,OAAO9L,GAAG,CAAC,CAAC,GAAGmK,EAAE+L,EAAEpQ,OAAOnG,EAAE4J,aAAajF,QAAQ,GAAG6F,EAAE+L,EAAEvQ,QAAQ,CAAC,IAAI3F,EAAE,EAAE,GAAGE,IAAImK,EAAE9D,YAAYmE,OAAOpG,EAAEmT,IAAGzX,EAAEqC,EAAEqL,YAAY+J,GAAE9X,EAAEuL,6BAA6B5G,GAAG1B,IAAI6D,EAAE0D,IAAI+L,EAAElQ,OAAOkQ,EAAEnQ,mBAAmB/F,GAAG,EAAE,GAAGmK,EAAE+L,EAAEtQ,UAAU,CAAC,MAAM1F,EAAEP,EAAEwM,iBAAiB7H,GAAG,GAAGpE,EAAE,CAAC,MAAM0C,EAAEA,KAAK,MAAM5C,EAAEH,KAAK6T,iCAAiC,OAAO1T,EAAEwP,QAASxP,GAAGA,EAAEqE,eAAgBrE,GAAGqC,GAAEzC,EAAAA,EAAAA,IAAEqF,EAAE/E,EAAE0C,GAAG,GAAG5C,GAAGqC,EAAEpB,OAAO,MAAM,IAAIxB,EAAAA,EAAE,wBAAuB,iDAAAiY,OAAkD1X,IAAK2X,GAAEtV,EAAErC,GAAGqK,EAAE/F,EAAE,CAACmC,GAAGyP,EAAErQ,gBAAgB,MAAM8R,GAAE9X,KAAKwQ,2BAA2BrQ,GAAGqK,EAAE/F,GAAGmC,GAAGyP,EAAExQ,eAAe2E,EAAEjD,MAAMhG,IAAIkD,EAAEmC,GAAG4D,EAAE9C,SAASnG,IAAIkD,EAAEtE,EAAE,MAAMyG,EAAE0D,IAAI+L,EAAElQ,OAAOkQ,EAAEnQ,mBAAmBsE,EAAEjD,MAAMhG,IAAIkD,EAAEmC,GAAG,GAAG,MAAM5G,KAAK0W,cAAc,CAAC,MAAMvW,KAAKmK,EAAE+L,EAAElQ,QAAQ9F,KAAKuG,EAAEyP,EAAElQ,SAAShG,GAAGE,EAAEL,KAAK0W,cAAcxN,YAAYzE,GAAGtE,IAAIE,EAAEL,KAAK0W,cAAcrN,eAAe5E,GAAGtE,GAAGE,GAAGiK,EAAE+L,EAAEnQ,oBAAoBlG,KAAK0W,cAAcrN,eAAe5E,GAAGzE,KAAK0W,cAAcxN,YAAYzE,GAAG,CAACA,EAAEA,EAAE,IAAI1C,EAAE,EAAE0C,EAAE,EAAEA,EAAEvC,IAAI,GAAG/B,EAAE4X,cAAc,CAAC/X,KAAK2Q,eAAelM,EAAEzE,KAAKsS,uBAAuB3C,QAASxP,GAAGA,EAAEwP,QAASxP,GAAGA,EAAEuE,cAAgB1E,KAAK8T,SAASwD,eAAe,CAACjC,eAAAA,CAAgBlV,EAAEE,EAAET,GAAG,GAAG,IAAIS,EAAEyD,KAAK,OAAO,KAAK,MAAMf,EAAEnD,EAAE4O,YAAYwJ,KAAK7X,EAAE6N,KAAK7N,EAAEuU,KAAKuD,KAAK9X,EAAE+U,QAAQ,OAAQ,OAADnS,QAAC,IAADA,OAAC,EAADA,EAAGmV,UAAU/X,EAAEuU,KAAK,CAACe,gBAAAA,CAAiBtV,EAAEE,EAAET,EAAEmD,EAAEhD,GAAG,IAAIM,EAAE,OAAO,MAAMqU,KAAKlS,EAAEwL,KAAKlO,GAAGK,EAAEL,EAAEqY,0BAA0B,MAAM3N,EAAE1K,EAAEsY,cAAc/X,EAAEmC,EAAEO,EAAEoL,SAASmI,WAAW+B,IAAIvY,EAAEyV,QAAQxS,EAAE4L,KAAKtO,EAAEiY,yBAAyBvV,EAAE4L,KAAK1B,EAAAA,EAAEsL,yCAAyCpY,EAAE+U,SAAS9O,EAAAA,EAAEgO,QAAQ5J,EAAEgO,cAAc,gBAAgBC,GAAGvT,KAAKoG,IAAIvL,EAAE0Y,GAAGrX,OAAO,KAAKoJ,EAAEkO,aAAa,eAAevO,GAAAA,GAAEwO,UAAU,MAAM3L,EAAEpN,EAAEe,SAASoB,EAAEnC,EAAEqE,UAAUQ,EAAE7E,EAAEsE,UAAUhC,EAAEtC,EAAEuE,WAAWiB,EAAEpF,KAAK8R,wBAAwBxH,EAAEA,CAACnK,EAAEJ,MAAK6Y,EAAAA,GAAAA,IAAE9Y,EAAE8H,EAAAA,EAAEhI,EAAEmB,OAAOqE,EAAEjF,GAAGL,EAAE+Y,oBAAoBxY,EAAEyY,cAAc,EAAE/V,EAAE6L,YAAY7O,EAAEI,IAAG4Y,EAAAA,GAAAA,IAAEjZ,EAAE8H,EAAAA,EAAEhI,EAAEmB,OAAOqE,IAAIrC,EAAEoL,SAAS6K,aAAa,MAAM9W,EAAEH,EAAE0C,IAAG0C,EAAAA,EAAAA,IAAEjF,GAAGuC,GAAGvC,GAAGH,EAAE,sBAAsBuI,EAAEpI,EAAEH,GAAGuI,EAAE7F,EAAEvC,IAAIH,EAAE0C,IAAIvC,GAAGH,IAAGoF,EAAAA,EAAAA,IAAEjF,GAAG,GAAGA,GAAGH,EAAE,sBAAsBuI,EAAEpI,EAAEH,GAAGuI,EAAE7F,EAAEuI,GAAG1C,EAAE,EAAEpI,MAAKiF,EAAAA,EAAAA,IAAEjF,GAAGuC,GAAGvC,GAAG8K,EAAE,sBAAsB1C,EAAEpI,EAAE8K,GAAG1C,EAAE,EAAEvI,GAAGuI,EAAE7F,EAAEvC,KAAKH,EAAE0C,EAAE6F,EAAE7F,EAAE1C,GAAGA,EAAE0C,IAAI6F,EAAE,EAAEvI,GAAGuI,EAAE7F,EAAEuI,IAAIlN,EAAEyV,QAAQ,KAAK,GAAG,SAASuC,GAAE3X,EAAEE,EAAET,GAAG,MAAMmD,EAAE5C,EAAE0E,gBAA+B,SAAW1E,EAAEE,EAAET,EAAEmD,IAAGkW,EAAAA,GAAAA,IAAE9Y,EAAEuG,YAAYrG,EAAET,EAAEoC,cAAcpC,EAAEwC,cAAcW,GAAGnD,EAAE0C,MAAMsK,SAAS7J,EAAE5C,EAAEmC,MAAMjC,GAAGT,EAAE6C,YAAYmK,SAAS7J,EAAE5C,EAAEsC,YAAYpC,GAAGF,EAAE0C,OAAOjD,EAAEiD,OAAOjD,EAAEiD,MAAM+J,SAAS7J,EAAE5C,EAAE0C,MAAMxC,GAAGF,EAAE6C,uBAAuBpD,EAAEoD,uBAAuBpD,EAAEoD,sBAAsB4J,SAAS7J,EAAE5C,EAAE6C,sBAAsB3C,GAAGF,EAAEwC,kBAAkB/C,EAAE+C,kBAAkB/C,EAAE+C,iBAAiBiK,SAAS7J,EAAE5C,EAAEwC,iBAAiBtC,EAAE,CAA5Z6Y,CAAE7Y,EAAET,EAAEO,EAAEyD,KAAKb,EAAE,EAA0wB5C,EAAAA,EAAAA,GAAE,EAAC6M,EAAAA,EAAAA,IAAE,CAACH,eAAc,KAAMsD,GAAErD,UAAU,cAAS,IAAQ3M,EAAAA,EAAAA,GAAE,EAAC6M,EAAAA,EAAAA,IAAE,CAACH,eAAc,KAAMsD,GAAErD,UAAU,sBAAiB,IAAQ3M,EAAAA,EAAAA,GAAE,EAAC6M,EAAAA,EAAAA,IAAE,CAACH,eAAc,KAAMsD,GAAErD,UAAU,gBAAW,IAAQ3M,EAAAA,EAAAA,GAAE,EAAC6M,EAAAA,EAAAA,IAAE,CAACH,eAAc,KAAMsD,GAAErD,UAAU,4BAAuB,IAAQ3M,EAAAA,EAAAA,GAAE,EAAC6M,EAAAA,EAAAA,OAAKmD,GAAErD,UAAU,qBAAgB,IAAQ3M,EAAAA,EAAAA,GAAE,EAAC6M,EAAAA,EAAAA,OAAKmD,GAAErD,UAAU,wBAAmB,IAAQ3M,EAAAA,EAAAA,GAAE,EAAC6M,EAAAA,EAAAA,IAAE,CAACD,UAAS,KAAMoD,GAAErD,UAAU,wBAAwB,OAAM3M,EAAAA,EAAAA,GAAE,EAAC6M,EAAAA,EAAAA,OAAKmD,GAAErD,UAAU,qCAAgC,IAAQ3M,EAAAA,EAAAA,GAAE,EAAC6M,EAAAA,EAAAA,IAAE,CAACD,UAAS,KAAMoD,GAAErD,UAAU,UAAU,MAAMqD,IAAEhQ,EAAAA,EAAAA,GAAE,EAAC4B,EAAAA,EAAAA,GAAE,4DAA4DoO,IAAG,MAAMyH,IAAEhR,EAAAA,EAAAA,MAAIyQ,IAAEnU,EAAAA,EAAAA,MAAI8S,IAAEvR,EAAAA,EAAAA,MAAIyR,IAAEtP,EAAAA,EAAAA,MAAIwP,IAAExP,EAAAA,EAAAA,MAAI6R,GAAG,EAAClT,EAAAA,EAAAA,IAAE,EAAE,EAAE,EAAE,IAAGA,EAAAA,EAAAA,IAAE,EAAE,EAAE,EAAE,IAAGA,EAAAA,EAAAA,IAAE,EAAE,EAAE,EAAE,IAAGA,EAAAA,EAAAA,IAAE,EAAE,EAAE,EAAE,IAAGA,EAAAA,EAAAA,IAAE,EAAE,EAAE,EAAE,IAAI8S,GAAG,IAAIrP,GAAAA,C","sources":["../node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/BackedBufferObject.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/RenderInstanceData.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/InstanceData.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/InstanceOctree.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/LevelSelector.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/LodComponentData.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/LodLevel.js","../node_modules/@arcgis/core/views/3d/webgl-engine/lib/lodRendering/LodRenderer.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{BufferObject as e}from\"../../../../webgl/BufferObject.js\";import{Usage as t}from\"../../../../webgl/enums.js\";class r{constructor(r,i,s){this._elementSize=i,this._buffer=e.createVertex(r,t.STATIC_DRAW),this.resize(s)}destroy(){this._buffer.dispose()}get elementSize(){return this._elementSize}get capacity(){return this._capacity}get array(){return this._array}get buffer(){return this._buffer}get usedMemory(){return this._array.byteLength+this._buffer.usedMemory}copyRange(e,t,r,i=0){const s=new Uint8Array(this.array,e*this.elementSize,(t-e)*this.elementSize);new Uint8Array(r.array,i*this.elementSize).set(s)}transferAll(){this._buffer.setData(this._array)}transferRange(e,t){const r=e*this._elementSize,i=t*this._elementSize;this._buffer.setSubData(new Uint8Array(this._array),r,r,i)}resize(e){const t=e*this._elementSize,r=new ArrayBuffer(t);this._array&&(e>=this._capacity?new Uint8Array(r).set(new Uint8Array(this._array)):new Uint8Array(r).set(new Uint8Array(this._array).subarray(0,e*this._elementSize))),this._array=r,this._buffer.setSize(t),this._capacity=e}}export{r as default};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{reallocShrinkThreshold as t,reallocGrowthFactor as i,reallocShrinkFactor as e}from\"../../../../../core/arrayUtils.js\";import{BufferViewVec3f as s,BufferViewMat3f as a,BufferViewVec4f as r,BufferViewVec4u8 as n}from\"../../../../../geometry/support/buffer/BufferView.js\";import{assert as h}from\"../Util.js\";import{VertexAttribute as d}from\"../VertexAttribute.js\";import _ from\"./BackedBufferObject.js\";class c{constructor(t){this.modelOriginHi=t.getField(d.INSTANCEMODELORIGINHI,s),this.modelOriginLo=t.getField(d.INSTANCEMODELORIGINLO,s),this.model=t.getField(d.INSTANCEMODEL,a),this.modelNormal=t.getField(d.INSTANCEMODELNORMAL,a),this.featureAttribute=t.getField(d.INSTANCEFEATUREATTRIBUTE,r),this.color=t.getField(d.INSTANCECOLOR,n),this.objectAndLayerIdColor=t.getField(d.INSTANCEOBJECTANDLAYERIDCOLOR,n)}}class f{constructor(t,i){this._rctx=t,this._instanceBufferLayout=i,this._headIndex=0,this._tailIndex=0,this._firstIndex=null,this._captureFirstIndex=!0,this._updating=!1,this._prevHeadIndex=0,this._resized=!1,this._capacity=1}destroy(){this._buffer&&this._buffer.destroy()}get buffer(){return this._buffer.buffer}get view(){return this._view}get capacity(){return this._capacity}get size(){const t=this._headIndex,i=this._tailIndex;return t>=i?t-i:t+this._capacity-i}get isEmpty(){return this._headIndex===this._tailIndex}get isFull(){return this._tailIndex===(this._headIndex+1)%this._capacity}get headIndex(){return this._headIndex}get tailIndex(){return this._tailIndex}get firstIndex(){return this._firstIndex}get usedMemory(){return this._buffer?.usedMemory??0}reset(){this._headIndex=0,this._tailIndex=0,this._firstIndex=null}startUpdateCycle(){this._captureFirstIndex=!0}beginUpdate(){h(!this._updating,\"already updating\"),this._updating=!0,this._prevHeadIndex=this._headIndex}endUpdate(){h(this._updating,\"not updating\"),this.size<t*this.capacity&&this._shrink(),this._resized?(this._buffer.transferAll(),this._resized=!1):this._transferRange(this._prevHeadIndex,this._headIndex),this._updating=!1}allocateHead(){h(this._updating,\"not updating\"),this.isFull&&this._grow();const t=this.headIndex;return this._captureFirstIndex&&(this._firstIndex=t,this._captureFirstIndex=!1),this._incrementHead(),h(this._headIndex!==this._tailIndex,\"invalid pointers\"),t}freeTail(){h(this._updating,\"not updating\"),h(this.size>0,\"invalid size\");const t=this._tailIndex===this._firstIndex;this._incrementTail(),t&&(this._firstIndex=this._tailIndex)}_grow(){const t=Math.max(u,Math.floor(this._capacity*i));this._resize(t)}_shrink(){const t=Math.max(u,Math.floor(this._capacity*e));this._resize(t)}_resize(t){if(h(this._updating,\"not updating\"),t===this._capacity)return;const i=new _(this._rctx,this._instanceBufferLayout.stride,t);if(this._buffer){this._firstIndex&&(this._firstIndex=(this._firstIndex+this._capacity-this._tailIndex)%this._capacity);const t=this.size,e=this._compactInstances(i);h(e===t,\"invalid compaction\"),this._buffer.destroy(),this._tailIndex=0,this._headIndex=e,this._prevHeadIndex=0}this._resized=!0,this._capacity=t,this._buffer=i,this._view=new c(this._instanceBufferLayout.createView(this._buffer.array))}_compactInstances(t){const i=this._headIndex,e=this._tailIndex;return e<i?(this._buffer.copyRange(e,i,t),i-e):e>i?(this._buffer.copyRange(e,this._capacity,t),i>0&&this._buffer.copyRange(0,i,t,this._capacity-e),i+(this._capacity-e)):0}_incrementHead(t=1){this._headIndex=(this._headIndex+t)%this._capacity}_incrementTail(t=1){this._tailIndex=(this._tailIndex+t)%this._capacity}_transferRange(t,i){t<i?this._buffer.transferRange(t,i):t>i&&(i>0&&this._buffer.transferRange(0,i),this._buffer.transferRange(t,this._capacity))}}const u=64;export{f as RenderInstanceData,c as RenderInstanceDataView,u as initialCapacity};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as t}from\"../../../../../chunks/tslib.es6.js\";import e from\"../../../../../core/Accessor.js\";import{reallocGrowthFactor as s}from\"../../../../../core/arrayUtils.js\";import i from\"../../../../../core/Evented.js\";import{property as a}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/Logger.js\";import{subclass as r}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{fromMat4 as o,invert as n,transpose as h}from\"../../../../../core/libs/gl-matrix-2/math/mat3.js\";import{create as l}from\"../../../../../core/libs/gl-matrix-2/factories/mat3f64.js\";import{multiply as c}from\"../../../../../core/libs/gl-matrix-2/math/mat4.js\";import{create as g}from\"../../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{i as m}from\"../../../../../chunks/vec32.js\";import{create as f}from\"../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{BufferViewMat4f64 as d,BufferViewVec3f64 as p,BufferViewMat3f as _,BufferViewVec2f as T,BufferViewVec4f64 as u,BufferViewVec4f as L,BufferViewVec4u8 as O,BufferViewUint8 as A}from\"../../../../../geometry/support/buffer/BufferView.js\";import{scaleFromMatrix as E}from\"../../../support/mathUtils.js\";import{newLayout as v}from\"../../../support/buffer/InterleavedLayout.js\";import{assert as M}from\"../Util.js\";import{VertexAttribute as I}from\"../VertexAttribute.js\";import{initialCapacity as F}from\"./RenderInstanceData.js\";var S;function b(t){let e=v().mat4f64(I.LOCALTRANSFORM).mat4f64(I.GLOBALTRANSFORM).vec4f64(I.BOUNDINGSPHERE).vec3f64(I.MODELORIGIN).mat3f(I.INSTANCEMODEL).mat3f(I.INSTANCEMODELNORMAL).vec2f(I.MODELSCALEFACTORS);return t.includes(I.FEATUREATTRIBUTE)&&(e=e.vec4f(I.FEATUREATTRIBUTE)),t.includes(I.COLOR)&&(e=e.vec4u8(I.COLOR)),t.includes(I.OLIDCOLOR)&&(e=e.vec4u8(I.OLIDCOLOR)),e=e.u8(I.STATE).u8(I.LODLEVEL),e}!function(t){t[t.ALLOCATED=1]=\"ALLOCATED\",t[t.DEFAULT_ACTIVE=2]=\"DEFAULT_ACTIVE\",t[t.VISIBLE=4]=\"VISIBLE\",t[t.HIGHLIGHT=8]=\"HIGHLIGHT\",t[t.HIGHLIGHT_ACTIVE=16]=\"HIGHLIGHT_ACTIVE\",t[t.REMOVE=32]=\"REMOVE\",t[t.TRANSFORM_CHANGED=64]=\"TRANSFORM_CHANGED\",t[t.ACTIVE=18]=\"ACTIVE\"}(S||(S={}));class C{constructor(t){this.localTransform=t.getField(I.LOCALTRANSFORM,d),this.globalTransform=t.getField(I.GLOBALTRANSFORM,d),this.modelOrigin=t.getField(I.MODELORIGIN,p),this.model=t.getField(I.INSTANCEMODEL,_),this.modelNormal=t.getField(I.INSTANCEMODELNORMAL,_),this.modelScaleFactors=t.getField(I.MODELSCALEFACTORS,T),this.boundingSphere=t.getField(I.BOUNDINGSPHERE,u),this.featureAttribute=t.getField(I.FEATUREATTRIBUTE,L),this.color=t.getField(I.COLOR,O),this.objectAndLayerIdColor=t.getField(I.OLIDCOLOR,O),this.state=t.getField(I.STATE,A),this.lodLevel=t.getField(I.LODLEVEL,A)}}let R=class extends e{constructor(t,e){super(t),this.events=new i,this._capacity=0,this._size=0,this._next=0,this._highlightOptionsMap=new Map,this._highlightOptionsMapPrev=new Map,this._layout=b(e),this._capacity=F,this._buffer=this._layout.createBuffer(this._capacity),this._view=new C(this._buffer)}get capacity(){return this._capacity}get size(){return this._size}get view(){return this._view}addInstance(){this._size+1>this._capacity&&this._grow();const t=this._findSlot();return this._view.state.set(t,S.ALLOCATED),this._size++,this.events.emit(\"instances-changed\"),t}removeInstance(t){const e=this._view.state;M(t>=0&&t<this._capacity&&0!==(e.get(t)&S.ALLOCATED),\"invalid instance handle\"),this._getStateFlag(t,S.ACTIVE)?this._setStateFlags(t,S.REMOVE):this.freeInstance(t),this.events.emit(\"instances-changed\")}freeInstance(t){const e=this._view.state;M(t>=0&&t<this._capacity&&0!==(e.get(t)&S.ALLOCATED),\"invalid instance handle\"),e.set(t,0),this._size--}setLocalTransform(t,e,s=!0){this._view.localTransform.setMat(t,e),s&&this.updateModelTransform(t)}getLocalTransform(t,e){this._view.localTransform.getMat(t,e)}setGlobalTransform(t,e,s=!0){this._view.globalTransform.setMat(t,e),s&&this.updateModelTransform(t)}getGlobalTransform(t,e){this._view.globalTransform.getMat(t,e)}updateModelTransform(t){const e=this._view,s=y,i=H;e.localTransform.getMat(t,N),e.globalTransform.getMat(t,D);const a=c(D,D,N);m(s,a[12],a[13],a[14]),e.modelOrigin.setVec(t,s),o(i,a),e.model.setMat(t,i);const r=E(y,a);r.sort(),e.modelScaleFactors.set(t,0,r[1]),e.modelScaleFactors.set(t,1,r[2]),n(i,i),h(i,i),e.modelNormal.setMat(t,i),this._setStateFlags(t,S.TRANSFORM_CHANGED),this.events.emit(\"instance-transform-changed\",{index:t})}getModelTransform(t,e){const s=this._view;s.model.getMat(t,H),s.modelOrigin.getVec(t,y),e[0]=H[0],e[1]=H[1],e[2]=H[2],e[3]=0,e[4]=H[3],e[5]=H[4],e[6]=H[5],e[7]=0,e[8]=H[6],e[9]=H[7],e[10]=H[8],e[11]=0,e[12]=y[0],e[13]=y[1],e[14]=y[2],e[15]=1}applyShaderTransformation(t,e){null!=this.shaderTransformation&&this.shaderTransformation.applyTransform(this,t,e)}getCombinedModelTransform(t,e){return this.getModelTransform(t,e),null!=this.shaderTransformation&&this.shaderTransformation.applyTransform(this,t,e),e}getCombinedLocalTransform(t,e){this._view.localTransform.getMat(t,e),null!=this.shaderTransformation&&this.shaderTransformation.applyTransform(this,t,e)}getCombinedMaxScaleFactor(t){let e=this._view.modelScaleFactors.get(t,1);return null!=this.shaderTransformation&&(this.shaderTransformation.scaleFactor(y,this,t),e*=Math.max(y[0],y[1],y[2])),e}getCombinedMedianScaleFactor(t){let e=this._view.modelScaleFactors.get(t,0);return null!=this.shaderTransformation&&(this.shaderTransformation.scaleFactor(y,this,t),e*=w(y[0],y[1],y[2])),e}getModel(t,e){this._view.model.getMat(t,e)}setFeatureAttribute(t,e){this._view.featureAttribute.setVec(t,e)}getFeatureAttribute(t,e){this._view.featureAttribute.getVec(t,e)}setColor(t,e){this._view.color.setVec(t,e)}setObjectAndLayerIdColor(t,e){this._view.objectAndLayerIdColor.setVec(t,e)}setVisible(t,e){e!==this.getVisible(t)&&(this._setStateFlag(t,S.VISIBLE,e),this.events.emit(\"instance-visibility-changed\",{index:t}))}getVisible(t){return this._getStateFlag(t,S.VISIBLE)}setHighlight(t,e){const{_highlightOptionsMap:s}=this,i=s.get(t);e?e!==i&&(s.set(t,e),this._setStateFlag(t,S.HIGHLIGHT,!0),this.events.emit(\"instance-highlight-changed\")):i&&(s.delete(t),this._setStateFlag(t,S.HIGHLIGHT,!1),this.events.emit(\"instance-highlight-changed\"))}get highlightOptionsMap(){return this._highlightOptionsMap}getHighlightStateFlag(t){return this._getStateFlag(t,S.HIGHLIGHT)}geHighlightOptionsPrev(t){const e=this._highlightOptionsMapPrev.get(t)??null;return this._highlightOptionsMapPrev.delete(t),e}getHighlightName(t){const e=this.highlightOptionsMap.get(t)??null;return e?this._highlightOptionsMapPrev.set(t,e):this._highlightOptionsMapPrev.delete(t),e}getState(t){return this._view.state.get(t)}getLodLevel(t){return this._view.lodLevel.get(t)}countFlags(t){let e=0;for(let s=0;s<this._capacity;++s){this.getState(s)&t&&++e}return e}_setStateFlags(t,e){const s=this._view.state;e=s.get(t)|e,s.set(t,e)}_clearStateFlags(t,e){const s=this._view.state;e=s.get(t)&~e,s.set(t,e)}_setStateFlag(t,e,s){s?this._setStateFlags(t,e):this._clearStateFlags(t,e)}_getStateFlag(t,e){return!!(this._view.state.get(t)&e)}_grow(){this._capacity=Math.max(F,Math.floor(this._capacity*s)),this._buffer=this._layout.createBuffer(this._capacity).copyFrom(this._buffer),this._view=new C(this._buffer)}_findSlot(){const t=this._view.state;let e=this._next;for(;t.get(e)&S.ALLOCATED;)e=e+1===this._capacity?0:e+1;return this._next=e+1===this._capacity?0:e+1,e}};function w(t,e,s){return Math.max(Math.min(t,e),Math.min(Math.max(t,e),s))}t([a({constructOnly:!0})],R.prototype,\"shaderTransformation\",void 0),t([a()],R.prototype,\"_size\",void 0),t([a({readOnly:!0})],R.prototype,\"size\",null),R=t([r(\"esri.views.3d.webgl-engine.lib.lodRendering.InstanceData\")],R);const y=f(),H=l(),N=g(),D=g();export{R as InstanceData,C as InstanceDataView,S as StateFlags};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{create as t}from\"../../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{t as e}from\"../../../../../chunks/vec32.js\";import{w as s,c as i,a as r}from\"../../../../../chunks/sphere.js\";import{maxScale as a}from\"../../../support/mathUtils.js\";import h from\"../Octree.js\";class n extends h{constructor(e,r){super((t=>s(this._instanceData.view.boundingSphere.getVec(t,this._tmpSphere))),{maximumDepth:25}),this._instanceData=e,this._boundingSphere=r,this._tmpSphere=i(),this._tmpMat4=t()}addInstance(t){const s=this._instanceData.view.boundingSphere,i=this._instanceData.getCombinedModelTransform(t,this._tmpMat4);e(r(this._tmpSphere),this._boundingSphere.center,i),this._tmpSphere[3]=this._boundingSphere.radius*a(i),s.setVec(t,this._tmpSphere),this.add([t])}removeInstance(t){this.remove([t])}}export{n as InstanceOctree};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nclass e{constructor(e,i){this._worldSpaceRadius=e,this._minScreenSpaceRadii=i}selectLevel(e,i,t){const c=t.computeScreenPixelSizeAt(e),r=this._worldSpaceRadius*i/c;let s=0;for(let a=1;a<this._minScreenSpaceRadii.length;++a)r>=this._minScreenSpaceRadii[a]&&(s=a);return s}}export{e as LevelSelector};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{glLayout as e}from\"../../../support/buffer/glUtil.js\";import{Default3D as t}from\"../DefaultVertexAttributeLocations.js\";import{GLMaterials as r}from\"../GLMaterials.js\";import{VertexArrayObject as o}from\"../VertexArrayObject.js\";import{BufferObject as s}from\"../../../../webgl/BufferObject.js\";import{Usage as i}from\"../../../../webgl/enums.js\";class a{constructor(a,n){const m=a.renderContext.rctx,u=n.geometry,f=n.geometry.getRenderGeometry(),g=f.material;this._materials=a.materials,g.setParameters({instancedDoublePrecision:!0}),this.geometry=u,this.material=g,this.glMaterials=new r(g,this._materials),this.vertexBufferLayout=f.vertexBufferLayout,this.vbo=s.createVertex(m,i.STATIC_DRAW,f.buffer),this.vao=new o(m,t,new Map([[\"geometry\",e(f.vertexBufferLayout)]]),new Map([[\"geometry\",this.vbo]])),this.vertexCount=f.elementCount}destroy(){this.glMaterials.dispose(),this.vbo.dispose(),this.vao.dispose()}get boundingInfo(){return this.geometry.boundingInfo}get triangleCount(){return this.vertexCount/3}get usedMemory(){return 128+this.vbo.usedMemory+this.vao.usedMemory}intersect(e,t,r,o,s,i,a,n){return this.geometry.intersect(e,t,r,o,s,i,a,n)}}export{a as LodComponentData};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{isSome as o}from\"../../../../../core/arrayUtils.js\";import{isAborted as n,throwIfAborted as t}from\"../../../../../core/promiseUtils.js\";import{create as e}from\"../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{empty as r,expandWithVec3 as i,center as s,diameter as c}from\"../../../../../geometry/support/aaBoundingBox.js\";import{LodComponentData as u}from\"./LodComponentData.js\";class a{static async create(e,r,i){const s=await Promise.allSettled(r.components.map((o=>e.controller.schedule((()=>new u(e,o)),i)))),c=s.map((o=>\"fulfilled\"===o.status?o.value:null)).filter(o);if(n(i)||c.length!==s.length){c.forEach((o=>o.destroy())),t(i);for(const o of s)if(\"rejected\"===o.status)throw o.reason}return new a(r.minScreenSpaceRadius,c)}constructor(o,n){this.minScreenSpaceRadius=o,this.components=n}destroy(){this.components.forEach((o=>o.destroy()))}intersect(o,n,t,e,r,i,s){this.components.forEach((c=>c.intersect(o,n,t,e,r,i,this.boundingSphere,s)))}get boundingBox(){if(null==this._boundingBox){const o=r();this.components.forEach((n=>{null!=n.boundingInfo&&(i(o,n.boundingInfo.bbMin),i(o,n.boundingInfo.bbMax))})),this._boundingBox=o}return this._boundingBox}get boundingSphere(){if(null==this._boundingSphere){const o=this.boundingBox,n=e();s(o,n),this._boundingSphere={center:n,radius:.5*c(o)}}return this._boundingSphere}get triangleCount(){return this.components.reduce(((o,n)=>o+n.triangleCount),0)}}export{a as LodLevel};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import{isSome as t}from\"../../../../../core/arrayUtils.js\";import r from\"../../../../../core/Error.js\";import{someMap as n,getOrCreateMapValue as s}from\"../../../../../core/MapUtils.js\";import{destroyMaybe as a}from\"../../../../../core/maybe.js\";import{isAborted as i,throwIfAborted as o}from\"../../../../../core/promiseUtils.js\";import{property as l}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/has.js\";import\"../../../../../core/Logger.js\";import{subclass as c}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{create as h}from\"../../../../../core/libs/gl-matrix-2/factories/mat4f64.js\";import{d,e as u,t as m}from\"../../../../../chunks/vec32.js\";import{create as p}from\"../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{create as f,fromValues as _}from\"../../../../../core/libs/gl-matrix-2/factories/vec4f64.js\";import{debugFlags as g}from\"../../../support/debugFlags.js\";import{glLayout as I}from\"../../../support/buffer/glUtil.js\";import{newLayout as y}from\"../../../support/buffer/InterleavedLayout.js\";import v from\"../../../webgl/RenderCamera.js\";import{ShaderOutput as C}from\"../../core/shaderLibrary/ShaderOutput.js\";import{AsyncRenderPlugin as E}from\"../../effects/RenderPlugin.js\";import{Default3D as R}from\"../DefaultVertexAttributeLocations.js\";import{DepthRange as D}from\"../DepthRange.js\";import{IntersectorType as A}from\"../IntersectorType.js\";import b from\"../Octree.js\";import{RenderSlot as T}from\"../RenderSlot.js\";import{assert as L}from\"../Util.js\";import{VertexAttribute as S}from\"../VertexAttribute.js\";import{InstanceData as O,StateFlags as j}from\"./InstanceData.js\";import{InstanceOctree as x}from\"./InstanceOctree.js\";import{LevelSelector as M}from\"./LevelSelector.js\";import{LodLevel as N}from\"./LodLevel.js\";import{RenderInstanceData as w}from\"./RenderInstanceData.js\";import{colorMixModes as H}from\"../../materials/internal/MaterialUtil.js\";import{encodeDoubleVec3 as U}from\"../../materials/renderers/utils.js\";import{DefaultMaterialDrawParameters as F}from\"../../shaders/DefaultMaterialTechnique.js\";import{defaultHighlightName as V}from\"../../../../support/HighlightDefaults.js\";import{TaskPriority as B,noBudget as q}from\"../../../../support/Scheduler.js\";import{bindVertexBufferLayout as G,unbindVertexBufferLayout as P}from\"../../../../webgl/Util.js\";const z=e=>{const t=e.baseBoundingSphere.radius,r=e.levels.map((e=>e.minScreenSpaceRadius));return new M(t,r)};let k=class extends E{constructor(e,t){super(e),this.type=A.LOD,this.isGround=!1,this._levels=[],this._defaultRenderInstanceData=new Array,this._highlightRenderInstanceDataMap=new Map,this._instanceIndex=0,this._cycleStartIndex=0,this._slicePlane=!1,this._camera=new v,this._updateCyclesWithStaticCamera=-1,this._needFullCycle=!1,this.produces=new Map([[T.OPAQUE_MATERIAL,e=>this._produces(e)],[T.TRANSPARENT_MATERIAL,e=>!!this._hasTransparentLevels()&&this._produces(e)]]),this._instanceData=new O({shaderTransformation:e.shaderTransformation},e.optionalFields),this.addHandles(t.registerTask(B.LOD_RENDERER,this))}initialize(){this._instanceBufferLayout=Y(this.optionalFields),this._glInstanceBufferLayout=I(this._instanceBufferLayout,1),this.addHandles([this._instanceData.events.on(\"instances-changed\",(()=>this._requestUpdateCycle())),this._instanceData.events.on(\"instance-transform-changed\",(({index:e})=>{this._requestUpdateCycle(),this.metadata.notifyGraphicGeometryChanged(e)})),this._instanceData.events.on(\"instance-visibility-changed\",(({index:e})=>{this._requestUpdateCycle(!0),this.metadata.notifyGraphicVisibilityChanged(e)})),this._instanceData.events.on(\"instance-highlight-changed\",(()=>this._requestUpdateCycle(!0)))])}get _allRenderInstanceData(){return[this._defaultRenderInstanceData,...this._highlightRenderInstanceDataMap.values()]}get _allRenderInstanceDataExceptHighlightShadow(){const e=[this._defaultRenderInstanceData];for(const t of this._highlightRenderInstanceDataMap)t[0]!==V&&e.push(t[1]);return e}hasHighlight(e){return this._highlightRenderInstanceDataMap.has(e)}get _enableLevelSelection(){return this.symbol.levels.length>1}get levels(){return this._levels}get baseBoundingBox(){return this._levels[this._levels.length-1].boundingBox}get baseBoundingSphere(){return this._levels[this._levels.length-1].boundingSphere}get baseMaterial(){return this._levels[this._levels.length-1].components[0].material}get slicePlaneEnabled(){return this._slicePlane}set slicePlaneEnabled(e){this._slicePlane=e}get layerViewUid(){return this.metadata.layerViewUid}get instanceData(){return this._instanceData}get hasEmissions(){return this._levels.some((e=>e.components.some((e=>e.material.hasEmissions))))}get usedMemory(){return this._allRenderInstanceData.reduce(((e,t)=>t.reduce(((e,t)=>e+t.usedMemory),e)),this._levels.reduce(((e,t)=>e+t.components.reduce(((e,t)=>e+t.usedMemory),0)),0))}get renderStats(){const e=this._instanceData.size,t=[];return this._levels.forEach(((e,r)=>{const n=this._allRenderInstanceData[0][r].size+this._allRenderInstanceData[1][r].size,s=e.triangleCount;t.push({renderedInstances:n,renderedTriangles:n*s,trianglesPerInstance:s})})),{totalInstances:e,renderedInstances:t.reduce(((e,t)=>e+t.renderedInstances),0),renderedTriangles:t.reduce(((e,t)=>e+t.renderedTriangles),0),levels:t}}_createRenderInstanceDataArray(e=[]){const{rctx:t}=this._context.renderContext;return this.symbol.levels.map((r=>{e.push(new w(t,this._instanceBufferLayout))})),e}async initializeRenderContext(e,r){this._context=e,this._createRenderInstanceDataArray(this._defaultRenderInstanceData);const n=await Promise.allSettled(this.symbol.levels.map((t=>N.create(e,t,r)))),s=n.map((e=>\"fulfilled\"===e.status?e.value:null)).filter(t);if(i(r)||s.length!==n.length){s.forEach((e=>e.destroy())),o(r);for(const e of n)if(\"rejected\"===e.status)throw e.reason}this._levels=s,this._levelSelector=z(this)}uninitializeRenderContext(){this._invalidateOctree(),this._levels.forEach((e=>e.destroy())),this._defaultRenderInstanceData.forEach((e=>e.destroy())),this._highlightRenderInstanceDataMap.forEach((e=>e.forEach((e=>e.destroy()))))}_hasTransparentLevels(){return this._levels.some((e=>e.components.some((e=>{const t=e.material.produces.get(T.TRANSPARENT_MATERIAL);return t?.(C.Color)}))))}hasHighlights(){return n(this._highlightRenderInstanceDataMap,(e=>e.some((e=>e.size>0))))}_produces(e){return(e!==C.Highlight||this.hasHighlights())&&(e!==C.ShadowHighlight||this.hasHighlight(V))}prepareRender(e){if(!g.LOD_INSTANCE_RENDERER_DISABLE_UPDATES){if(this._enableLevelSelection){const t=e.bind.contentCamera.equals(this._camera);this._camera.copyFrom(e.bind.contentCamera),t||this._requestUpdateCycle()}this._needFullCycle&&(this.runTask(q),this._needFullCycle=!1)}}acquireTechniques(e){if(!this.baseMaterial.visible||!this.baseMaterial.isVisibleForOutput(e.output))return null;const t=this._getInstanceDatas(e);if(!t)return null;const r=new Array,n=this.levels;return t.forEach((t=>n.forEach((({components:n},s)=>n.forEach((n=>r.push(this._beginComponent(e,t[s],n)))))))),r}render(e,t){const r=this._getInstanceDatas(e);if(!r||null==t)return;let n=0;e.rctx.bindVAO();const s=this.levels;r.forEach((r=>s.forEach((({components:s},a)=>s.forEach((s=>this._renderComponent(e,t[n++],r[a],s,a)))))))}_getInstanceDatas(e){const{output:t,bind:r}=e,n=t===C.Highlight,s=t===C.ShadowHighlight,a=!n&&!s,i=t!==C.ShadowExcludeHighlight;if(a)return i?this._allRenderInstanceData:this._allRenderInstanceDataExceptHighlightShadow;const{_highlightRenderInstanceDataMap:o}=this;if(i){if(n){const e=r.highlight?.name;if(!e)return null;const t=o.get(e);return t?[t]:null}const e=o.get(V);return s?e?[e]:null:Array.from(o.values())}return null}intersect(e,t,r,n){if(!this.baseMaterial.visible||null==this._octree)return;const s=p();d(s,n,r);const a=s=>{this._instanceData.getCombinedModelTransform(s,Z),e.transform.set(Z),m($,r,e.transform.inverse),m(X,n,e.transform.inverse);const a=this._instanceData.getState(s),i=this._instanceData.getLodLevel(s),o=this._levels.length;L(0!==(a&j.ACTIVE),\"invalid instance state\"),L(i>=0&&i<o,\"invaid lod level\"),this._levels[i].intersect(e,t,$,X,s,this.metadata,o)};this.baseMaterial.parameters.verticalOffset?this._octree.forEach(a):this._octree.forEachAlongRay(r,s,a)}notifyShaderTransformationChanged(){this._invalidateOctree(),this._requestUpdateCycle()}get _octree(){if(null==this._octreeCached){const e=this._instanceData,t=e.view?.state;if(!t)return null;this._octreeCached=new x(e,this.baseBoundingSphere);for(let r=0;r<e.capacity;++r)t.get(r)&j.ACTIVE&&this._octreeCached.addInstance(r)}return this._octreeCached}_invalidateOctree(){this._octreeCached=a(this._octreeCached)}queryDepthRange(e){if(null==this._octree)return new D;const t=e.viewForward,r=this._octree.findClosest(t,b.DepthOrder.FRONT_TO_BACK,e.frustum),n=this._octree.findClosest(t,b.DepthOrder.BACK_TO_FRONT,e.frustum);if(null==r||null==n)return new D;const s=e.eye,a=this._instanceData.view;a.boundingSphere.getVec(r,Q),d(Q,Q,s);const i=u(Q,t)-Q[3];a.boundingSphere.getVec(n,Q),d(Q,Q,s);const o=u(Q,t)+Q[3];return new D(i,o)}_requestUpdateCycle(e=!1){this._updateCyclesWithStaticCamera=-1,this._cycleStartIndex=this._instanceIndex,e&&(this._needFullCycle=!0,this._context.requestRender())}_startUpdateCycle(){this._updateCyclesWithStaticCamera++,this._allRenderInstanceData.forEach((e=>e.forEach((e=>e.startUpdateCycle()))))}get running(){return this._instanceData.size>0&&this._updateCyclesWithStaticCamera<1}runTask(e){const{_enableLevelSelection:t,_camera:n,_levelSelector:a}=this;this._allRenderInstanceData.forEach((e=>e.forEach((e=>e.beginUpdate()))));const i=this._instanceData,o=i.view;let l=i.size;const c=i.capacity;let h=this._instanceIndex;const d=Math.ceil(c/500),{_highlightRenderInstanceDataMap:u}=this;for(let m=0;m<l&&!e.done;++m){h===this._cycleStartIndex&&this._startUpdateCycle();const m=o.state.get(h);let p=0;if(!(m&j.ALLOCATED)){h=h+1===c?0:h+1,l++;continue}const f=o.lodLevel.get(h);if(m&j.DEFAULT_ACTIVE&&this._defaultRenderInstanceData[f].freeTail(),m&j.HIGHLIGHT_ACTIVE){const e=i.geHighlightOptionsPrev(h);if(e){const t=u.get(e);if(!t)throw new r(\"internal:lod-renderer\",\"Internal error in lodRenderer\");t[f].freeTail(),t.every((e=>e.isEmpty))&&(t.forEach((e=>e.destroy())),u.delete(e))}}if(m&j.REMOVE)i.freeInstance(h);else if(m&j.VISIBLE){let e=0;if(t&&(o.modelOrigin.getVec(h,J),e=a.selectLevel(J,i.getCombinedMedianScaleFactor(h),n)),p=m&~(j.ACTIVE|j.TRANSFORM_CHANGED),e>=0)if(m&j.HIGHLIGHT){const t=i.getHighlightName(h);if(t){const n=()=>{const e=this._createRenderInstanceDataArray();return e.forEach((e=>e.beginUpdate())),e},a=s(u,t,n);if(e>=a.length)throw new r(\"internal:lod-renderer\",`LodRenderer internal error - missing lodLevel ${e}`);W(a[e],o,h)}p|=j.HIGHLIGHT_ACTIVE}else W(this._defaultRenderInstanceData[e],o,h),p|=j.DEFAULT_ACTIVE;o.state.set(h,p),o.lodLevel.set(h,e)}else p=m&~(j.ACTIVE|j.TRANSFORM_CHANGED),o.state.set(h,p);if(null!=this._octreeCached){const e=!!(m&j.ACTIVE),t=!!(p&j.ACTIVE);!e&&t?this._octreeCached.addInstance(h):e&&!t?this._octreeCached.removeInstance(h):e&&t&&m&j.TRANSFORM_CHANGED&&(this._octreeCached.removeInstance(h),this._octreeCached.addInstance(h))}h=h+1===c?0:h+1,h%d===0&&e.madeProgress()}this._instanceIndex=h,this._allRenderInstanceData.forEach((e=>e.forEach((e=>e.endUpdate())))),this._context.requestRender()}_beginComponent(e,t,r){if(0===t.size)return null;const n=r.glMaterials.load(e.rctx,e.bind.slot,e.output);return n?.beginSlot(e.bind)}_renderComponent(e,t,r,n,s){if(!t)return;const{bind:a,rctx:i}=e;i.runAppleAmdDriverHelper();const o=i.bindTechnique(t,a,n.material.parameters,te);i.bindVAO(n.vao),t.ensureAttributeLocations(n.vao),g.LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL&&e.output===C.Color&&(o.setUniform4fv(\"externalColor\",ee[Math.min(s,ee.length-1)]),o.setUniform1i(\"colorMixMode\",H.replace));const l=r.capacity,c=r.headIndex,h=r.tailIndex,d=r.firstIndex,u=this._glInstanceBufferLayout,m=(e,s)=>{G(i,R,r.buffer,u,e),i.drawArraysInstanced(t.primitiveType,0,n.vertexCount,s-e),P(i,R,r.buffer,u)};n.material.transparent&&null!=d?c>h?(L(d>=h&&d<=c,\"invalid firstIndex\"),m(d,c),m(h,d)):c<h&&(d<=c?(L(d>=0&&d<=c,\"invalid firstIndex\"),m(d,c),m(h,l),m(0,d)):(L(d>=h&&d<=l,\"invalid firstIndex\"),m(d,l),m(0,c),m(h,d))):c>h?m(h,c):c<h&&(m(0,c),m(h,l)),i.bindVAO(null)}};function W(e,t,r){const n=e.allocateHead();K(t,r,e.view,n)}function K(e,t,r,n){U(e.modelOrigin,t,r.modelOriginHi,r.modelOriginLo,n),r.model.copyFrom(n,e.model,t),r.modelNormal.copyFrom(n,e.modelNormal,t),e.color&&r.color&&r.color.copyFrom(n,e.color,t),e.objectAndLayerIdColor&&r.objectAndLayerIdColor&&r.objectAndLayerIdColor.copyFrom(n,e.objectAndLayerIdColor,t),e.featureAttribute&&r.featureAttribute&&r.featureAttribute.copyFrom(n,e.featureAttribute,t)}function Y(e){let t=y().vec3f(S.INSTANCEMODELORIGINHI).vec3f(S.INSTANCEMODELORIGINLO).mat3f(S.INSTANCEMODEL).mat3f(S.INSTANCEMODELNORMAL);return null!=e&&e.includes(\"featureAttribute\")&&(t=t.vec4f(S.INSTANCEFEATUREATTRIBUTE)),null!=e&&e.includes(\"color\")&&(t=t.vec4u8(S.INSTANCECOLOR)),null!=e&&e.includes(\"objectAndLayerIdColor\")&&(t=t.vec4u8(S.INSTANCEOBJECTANDLAYERIDCOLOR)),t}e([l({constructOnly:!0})],k.prototype,\"symbol\",void 0),e([l({constructOnly:!0})],k.prototype,\"optionalFields\",void 0),e([l({constructOnly:!0})],k.prototype,\"metadata\",void 0),e([l({constructOnly:!0})],k.prototype,\"shaderTransformation\",void 0),e([l()],k.prototype,\"_instanceData\",void 0),e([l()],k.prototype,\"_cycleStartIndex\",void 0),e([l({readOnly:!0})],k.prototype,\"_enableLevelSelection\",null),e([l()],k.prototype,\"_updateCyclesWithStaticCamera\",void 0),e([l({readOnly:!0})],k.prototype,\"running\",null),k=e([c(\"esri.views.3d.webgl-engine.lib.lodRendering.LodRenderer\")],k);const J=p(),Q=f(),Z=h(),$=p(),X=p(),ee=[_(1,0,1,1),_(0,0,1,1),_(0,1,0,1),_(1,1,0,1),_(1,0,0,1)],te=new F;export{k as LodRenderer};\n"],"names":["r","constructor","i","s","this","_elementSize","_buffer","e","createVertex","t","STATIC_DRAW","resize","destroy","dispose","elementSize","capacity","_capacity","array","_array","buffer","usedMemory","byteLength","copyRange","arguments","length","undefined","Uint8Array","set","transferAll","setData","transferRange","setSubData","ArrayBuffer","subarray","setSize","c","modelOriginHi","getField","d","INSTANCEMODELORIGINHI","modelOriginLo","INSTANCEMODELORIGINLO","model","INSTANCEMODEL","a","modelNormal","INSTANCEMODELNORMAL","featureAttribute","INSTANCEFEATUREATTRIBUTE","color","INSTANCECOLOR","n","objectAndLayerIdColor","INSTANCEOBJECTANDLAYERIDCOLOR","f","_rctx","_instanceBufferLayout","_headIndex","_tailIndex","_firstIndex","_captureFirstIndex","_updating","_prevHeadIndex","_resized","view","_view","size","isEmpty","isFull","headIndex","tailIndex","firstIndex","_this$_buffer$usedMem","_this$_buffer","reset","startUpdateCycle","beginUpdate","h","endUpdate","_shrink","_transferRange","allocateHead","_grow","_incrementHead","freeTail","_incrementTail","Math","max","u","floor","_resize","_","stride","_compactInstances","createView","S","ALLOCATED","DEFAULT_ACTIVE","VISIBLE","HIGHLIGHT","HIGHLIGHT_ACTIVE","REMOVE","TRANSFORM_CHANGED","ACTIVE","C","localTransform","I","LOCALTRANSFORM","globalTransform","GLOBALTRANSFORM","modelOrigin","MODELORIGIN","p","modelScaleFactors","MODELSCALEFACTORS","T","boundingSphere","BOUNDINGSPHERE","FEATUREATTRIBUTE","L","COLOR","O","OLIDCOLOR","state","STATE","A","lodLevel","LODLEVEL","R","super","events","_size","_next","_highlightOptionsMap","Map","_highlightOptionsMapPrev","_layout","v","mat4f64","vec4f64","vec3f64","mat3f","vec2f","includes","vec4f","vec4u8","u8","b","F","createBuffer","addInstance","_findSlot","emit","removeInstance","M","get","_getStateFlag","_setStateFlags","freeInstance","setLocalTransform","setMat","updateModelTransform","getLocalTransform","getMat","setGlobalTransform","getGlobalTransform","y","H","N","D","m","setVec","o","E","sort","index","getModelTransform","getVec","applyShaderTransformation","shaderTransformation","applyTransform","getCombinedModelTransform","getCombinedLocalTransform","getCombinedMaxScaleFactor","scaleFactor","getCombinedMedianScaleFactor","min","w","getModel","setFeatureAttribute","getFeatureAttribute","setColor","setObjectAndLayerIdColor","setVisible","getVisible","_setStateFlag","setHighlight","delete","highlightOptionsMap","getHighlightStateFlag","geHighlightOptionsPrev","_this$_highlightOptio","getHighlightName","_this$highlightOption","getState","getLodLevel","countFlags","_clearStateFlags","copyFrom","constructOnly","prototype","readOnly","l","g","_instanceData","_tmpSphere","maximumDepth","_boundingSphere","_tmpMat4","center","radius","add","remove","_worldSpaceRadius","_minScreenSpaceRadii","selectLevel","computeScreenPixelSizeAt","renderContext","rctx","geometry","getRenderGeometry","material","_materials","materials","setParameters","instancedDoublePrecision","glMaterials","vertexBufferLayout","vbo","vao","vertexCount","elementCount","boundingInfo","triangleCount","intersect","create","Promise","allSettled","components","map","controller","schedule","status","value","filter","forEach","reason","minScreenSpaceRadius","boundingBox","_boundingBox","bbMin","bbMax","reduce","k","type","LOD","isGround","_levels","_defaultRenderInstanceData","Array","_highlightRenderInstanceDataMap","_instanceIndex","_cycleStartIndex","_slicePlane","_camera","_updateCyclesWithStaticCamera","_needFullCycle","produces","OPAQUE_MATERIAL","_produces","TRANSPARENT_MATERIAL","_hasTransparentLevels","optionalFields","addHandles","registerTask","B","LOD_RENDERER","initialize","vec3f","Y","_glInstanceBufferLayout","on","_requestUpdateCycle","_ref","metadata","notifyGraphicGeometryChanged","_ref2","notifyGraphicVisibilityChanged","_allRenderInstanceData","values","_allRenderInstanceDataExceptHighlightShadow","V","push","hasHighlight","has","_enableLevelSelection","symbol","levels","baseBoundingBox","baseBoundingSphere","baseMaterial","slicePlaneEnabled","layerViewUid","instanceData","hasEmissions","some","renderStats","renderedInstances","renderedTriangles","trianglesPerInstance","totalInstances","_createRenderInstanceDataArray","_context","initializeRenderContext","_levelSelector","z","uninitializeRenderContext","_invalidateOctree","Color","hasHighlights","Highlight","ShadowHighlight","prepareRender","LOD_INSTANCE_RENDERER_DISABLE_UPDATES","bind","contentCamera","equals","runTask","q","acquireTechniques","visible","isVisibleForOutput","output","_getInstanceDatas","_ref3","_beginComponent","render","bindVAO","_ref4","_renderComponent","ShadowExcludeHighlight","_r$highlight","highlight","name","from","_octree","Z","transform","$","inverse","X","j","parameters","verticalOffset","forEachAlongRay","notifyShaderTransformationChanged","_octreeCached","_e$view","x","queryDepthRange","viewForward","findClosest","DepthOrder","FRONT_TO_BACK","frustum","BACK_TO_FRONT","eye","Q","requestRender","_startUpdateCycle","running","ceil","done","every","J","concat","W","madeProgress","load","slot","beginSlot","runAppleAmdDriverHelper","bindTechnique","te","ensureAttributeLocations","LOD_INSTANCE_RENDERER_COLORIZE_BY_LEVEL","setUniform4fv","ee","setUniform1i","replace","G","drawArraysInstanced","primitiveType","P","transparent","U","K"],"sourceRoot":""}