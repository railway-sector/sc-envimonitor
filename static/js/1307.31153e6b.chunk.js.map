{"version":3,"file":"static/js/1307.31153e6b.chunk.js","mappings":"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","sources":["../node_modules/@arcgis/core/views/3d/webgl-engine/effects/laserlines/LaserlineTechnique.js","../node_modules/@arcgis/core/views/3d/webgl-engine/effects/laserlines/LaserlinePathTechnique.js","../node_modules/@arcgis/core/views/3d/webgl-engine/effects/laserlines/LaserlinePathData.js","../node_modules/@arcgis/core/views/3d/webgl-engine/effects/laserlines/LaserlinePathTechniqueConfiguration.js","../node_modules/@arcgis/core/views/3d/webgl-engine/effects/laserlines/LaserlineTechniqueConfiguration.js","../node_modules/@arcgis/core/views/3d/webgl-engine/effects/laserlines/LaserLineRenderer.js","../node_modules/@arcgis/core/views/3d/interactive/visualElements/LaserlineVisualElement.js","../node_modules/@arcgis/core/views/3d/webgl-engine/core/shaderLibrary/Laserline.glsl.js","../node_modules/@arcgis/core/chunks/Laserlines.glsl.js","../node_modules/@arcgis/core/chunks/LaserlinePath.glsl.js"],"sourcesContent":["/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{deg2rad as e}from\"../../../../../core/mathUtils.js\";import{fromValues as t,create as s}from\"../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{create as i}from\"../../../../../geometry/support/lineSegment.js\";import{ReloadableShaderModule as r}from\"../../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as o}from\"../../core/shaderTechnique/ShaderTechnique.js\";import{L as l}from\"../../../../../chunks/Laserlines.glsl.js\";import{NoParameters as n}from\"../../../../webgl/NoParameters.js\";class a extends n{constructor(){super(...arguments),this.innerColor=t(1,1,1),this.innerWidth=1,this.glowColor=t(1,.5,0),this.glowWidth=8,this.glowFalloff=8,this.globalAlpha=.75,this.globalAlphaContrastBoost=2,this.angleCutoff=e(6),this.pointDistanceOrigin=s(),this.pointDistanceTarget=s(),this.lineVerticalPlaneSegment=i(),this.intersectsLineSegment=i(),this.intersectsLineRadius=3,this.heightManifoldTarget=s(),this.lineStartWorld=s(),this.lineEndWorld=s()}}class h extends o{constructor(e,t){super(e,t,new r(l,(()=>import(\"../../shaders/Laserlines.glsl.js\"))))}}export{a as LaserlinePassParameters,h as LaserlineTechnique};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{create as e}from\"../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{ReloadableShaderModule as r}from\"../../core/shaderTechnique/ReloadableShaderModule.js\";import{ShaderTechnique as s}from\"../../core/shaderTechnique/ShaderTechnique.js\";import{LaserlinePassParameters as o}from\"./LaserlineTechnique.js\";import{VertexAttribute as t}from\"../../lib/VertexAttribute.js\";import{L as i}from\"../../../../../chunks/LaserlinePath.glsl.js\";class a extends o{constructor(){super(...arguments),this.origin=e()}}class c extends s{constructor(e,s){super(e,s,new r(i,(()=>import(\"../../shaders/LaserlinePath.glsl.js\"))),n)}}const n=new Map([[t.START,0],[t.END,1],[t.EXTRUDE,2],[t.START_UP,3],[t.END_UP,4]]);export{a as LaserlinePathPassParameters,c as LaserlinePathTechnique,n as vertexAttributeLocations};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{i as e,d as t}from\"../../../../../chunks/vec32.js\";import{create as r}from\"../../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{newDoubleArray as s}from\"../../../../../geometry/support/DoubleArray.js\";import{ViewingMode as i}from\"../../../../ViewingMode.js\";import{glLayout as o}from\"../../../support/buffer/glUtil.js\";import{newLayout as f}from\"../../../support/buffer/InterleavedLayout.js\";import{vertexAttributeLocations as n}from\"./LaserlinePathTechnique.js\";import{VertexArrayObject as u}from\"../../lib/VertexArrayObject.js\";import{VertexAttribute as a}from\"../../lib/VertexAttribute.js\";import{BufferObject as l}from\"../../../../webgl/BufferObject.js\";import{PrimitiveType as c,Usage as h}from\"../../../../webgl/enums.js\";class _{constructor(e){this._renderCoordsHelper=e,this._buffers=null,this._origin=r(),this._dirty=!1,this._count=0,this._vao=null}set vertices(e){const t=s(3*e.length);let r=0;for(const s of e)t[r++]=s[0],t[r++]=s[1],t[r++]=s[2];this.buffers=[t]}set buffers(t){if(this._buffers=t,this._buffers.length>0){const t=this._buffers[0],r=3*Math.floor(t.length/3/2);e(this._origin,t[r],t[r+1],t[r+2])}else e(this._origin,0,0,0);this._dirty=!0}get origin(){return this._origin}draw(e){const t=this._ensureVAO(e);null!=t&&(e.bindVAO(t),e.drawArrays(c.TRIANGLES,0,this._count))}dispose(){null!=this._vao&&this._vao.dispose()}get _layout(){return this._renderCoordsHelper.viewingMode===i.Global?b:g}_ensureVAO(e){return null==this._buffers?null:(this._vao??=this._createVAO(e,this._buffers),this._ensureVertexData(this._vao,this._buffers),this._vao)}_createVAO(e,t){const r=this._createDataBuffer(t);return this._dirty=!1,new u(e,n,new Map([[\"data\",o(this._layout)]]),new Map([[\"data\",l.createVertex(e,h.STATIC_DRAW,r)]]))}_ensureVertexData(e,t){if(!this._dirty)return;const r=this._createDataBuffer(t);e.vertexBuffers.get(\"data\")?.setData(r),this._dirty=!1}_createDataBuffer(r){const s=r.reduce(((e,t)=>e+d(t)),0);this._count=s;const i=this._layout.createBuffer(s),o=this._origin;let f=0,n=0;const u=\"startUp\"in i?this._setUpVectors.bind(this,i):void 0;for(const a of r){for(let r=0;r<a.length;r+=3){const s=e(m,a[r],a[r+1],a[r+2]);0===r?n=this._renderCoordsHelper.getAltitude(s):this._renderCoordsHelper.setAltitude(s,n);const l=f+2*r;u?.(r,l,a,s);const c=t(m,s,o);if(r<a.length-3){for(let e=0;e<6;e++)i.start.setVec(l+e,c);i.extrude.setValues(l,0,-1),i.extrude.setValues(l+1,1,-1),i.extrude.setValues(l+2,1,1),i.extrude.setValues(l+3,0,-1),i.extrude.setValues(l+4,1,1),i.extrude.setValues(l+5,0,1)}if(r>0)for(let e=-6;e<0;e++)i.end.setVec(l+e,c)}f+=d(a)}return i.buffer}_setUpVectors(e,t,r,s,i){const o=this._renderCoordsHelper.worldUpAtPosition(i,p);if(t<s.length-3)for(let f=0;f<6;f++)e.startUp.setVec(r+f,o);if(t>0)for(let f=-6;f<0;f++)e.endUp.setVec(r+f,o)}}function d(e){return 3*(2*(e.length/3-1))}const p=r(),m=r(),b=f().vec3f(a.START).vec3f(a.END).vec2f(a.EXTRUDE).vec3f(a.START_UP).vec3f(a.END_UP),g=f().vec3f(a.START).vec3f(a.END).vec2f(a.EXTRUDE);export{_ as LaserlinePathData};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as o}from\"../../../../../chunks/tslib.es6.js\";import{ShaderTechniqueConfiguration as r,parameter as t}from\"../../core/shaderTechnique/ShaderTechniqueConfiguration.js\";class e extends r{constructor(){super(...arguments),this.contrastControlEnabled=!1,this.spherical=!1}}o([t()],e.prototype,\"contrastControlEnabled\",void 0),o([t()],e.prototype,\"spherical\",void 0);export{e as LaserlinePathTechniqueConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import{parameter as i}from\"../../core/shaderTechnique/ShaderTechniqueConfiguration.js\";import{LaserlinePathTechniqueConfiguration as t}from\"./LaserlinePathTechniqueConfiguration.js\";class n extends t{constructor(){super(...arguments),this.heightManifoldEnabled=!1,this.pointDistanceEnabled=!1,this.lineVerticalPlaneEnabled=!1,this.intersectsLineEnabled=!1}}e([i()],n.prototype,\"heightManifoldEnabled\",void 0),e([i()],n.prototype,\"pointDistanceEnabled\",void 0),e([i()],n.prototype,\"lineVerticalPlaneEnabled\",void 0),e([i()],n.prototype,\"intersectsLineEnabled\",void 0);export{n as LaserlineTechniqueConfiguration};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{_ as e}from\"../../../../../chunks/tslib.es6.js\";import\"../../../../../core/has.js\";import{disposeMaybe as t}from\"../../../../../core/maybe.js\";import{property as i}from\"../../../../../core/accessorSupport/decorators/property.js\";import\"../../../../../core/Logger.js\";import\"../../../../../core/RandomLCG.js\";import{subclass as n}from\"../../../../../core/accessorSupport/decorators/subclass.js\";import{c as s,f as r}from\"../../../../../chunks/vec32.js\";import{fromRay as a,create as o,getStart as l,getEnd as h}from\"../../../../../geometry/support/clipRay.js\";import{intersectClipRay as c}from\"../../../../../geometry/support/frustum.js\";import{copy as d}from\"../../../../../geometry/support/lineSegment.js\";import{wrap as p}from\"../../../../../geometry/support/ray.js\";import{ViewingMode as u}from\"../../../../ViewingMode.js\";import{InternalRenderCategory as m}from\"../../../webgl.js\";import g from\"../../../webgl/RenderNode.js\";import{Blit as _}from\"../blit/Blit.js\";import{LaserlinePathData as P}from\"./LaserlinePathData.js\";import{LaserlinePathPassParameters as f,LaserlinePathTechnique as b}from\"./LaserlinePathTechnique.js\";import{LaserlinePathTechniqueConfiguration as E}from\"./LaserlinePathTechniqueConfiguration.js\";import{LaserlineTechnique as D}from\"./LaserlineTechnique.js\";import{LaserlineTechniqueConfiguration as q}from\"./LaserlineTechniqueConfiguration.js\";import{RenderRequestType as T}from\"../../lib/basicInterfaces.js\";import{updateParameters as L}from\"../../materials/internal/MaterialUtil.js\";import{BlitMode as V}from\"../../shaders/CompositingTechniqueConfiguration.js\";import{FramebufferBit as C}from\"../../../../webgl/enums.js\";let j=class extends g{constructor(e){super(e),this.isDecoration=!0,this.produces=m.LASERLINES,this.consumes={required:[m.LASERLINES,\"normals\"]},this.requireGeometryDepth=!0,this._configuration=new q,this._pathTechniqueConfiguration=new E,this._heightManifoldEnabled=!1,this._pointDistanceEnabled=!1,this._lineVerticalPlaneEnabled=!1,this._intersectsLineEnabled=!1,this._intersectsLineInfinite=!1,this._pathVerticalPlaneEnabled=!1,this._passParameters=new f;const t=e.view.stage.renderView.techniques,i=new E;i.contrastControlEnabled=e.contrastControlEnabled,t.precompile(b,i)}initialize(){this._passParameters.renderCoordsHelper=this.view.renderCoordsHelper,this._pathTechniqueConfiguration.spherical=this.view.state.viewingMode===u.Global,this._pathTechniqueConfiguration.contrastControlEnabled=this.contrastControlEnabled,this._techniques.precompile(b,this._pathTechniqueConfiguration),this._blit=new _(this._techniques,V.PremultipliedAlpha)}destroy(){this._pathVerticalPlaneData=t(this._pathVerticalPlaneData),this._blit=null}get _techniques(){return this.view.stage.renderView.techniques}get heightManifoldEnabled(){return this._heightManifoldEnabled}set heightManifoldEnabled(e){this._heightManifoldEnabled!==e&&(this._heightManifoldEnabled=e,this.requestRender(T.UPDATE))}get heightManifoldTarget(){return this._passParameters.heightManifoldTarget}set heightManifoldTarget(e){s(this._passParameters.heightManifoldTarget,e),this.requestRender(T.UPDATE)}get pointDistanceEnabled(){return this._pointDistanceEnabled}set pointDistanceEnabled(e){e!==this._pointDistanceEnabled&&(this._pointDistanceEnabled=e,this.requestRender(T.UPDATE))}get pointDistanceTarget(){return this._passParameters.pointDistanceTarget}set pointDistanceTarget(e){s(this._passParameters.pointDistanceTarget,e),this.requestRender(T.UPDATE)}get pointDistanceOrigin(){return this._passParameters.pointDistanceOrigin}set pointDistanceOrigin(e){s(this._passParameters.pointDistanceOrigin,e),this.requestRender(T.UPDATE)}get lineVerticalPlaneEnabled(){return this._lineVerticalPlaneEnabled}set lineVerticalPlaneEnabled(e){e!==this._lineVerticalPlaneEnabled&&(this._lineVerticalPlaneEnabled=e,this.requestRender(T.UPDATE))}get lineVerticalPlaneSegment(){return this._passParameters.lineVerticalPlaneSegment}set lineVerticalPlaneSegment(e){d(e,this._passParameters.lineVerticalPlaneSegment),this.requestRender(T.UPDATE)}get intersectsLineEnabled(){return this._intersectsLineEnabled}set intersectsLineEnabled(e){e!==this._intersectsLineEnabled&&(this._intersectsLineEnabled=e,this.requestRender(T.UPDATE))}get intersectsLineSegment(){return this._passParameters.intersectsLineSegment}set intersectsLineSegment(e){d(e,this._passParameters.intersectsLineSegment),this.requestRender(T.UPDATE)}get intersectsLineInfinite(){return this._intersectsLineInfinite}set intersectsLineInfinite(e){e!==this._intersectsLineInfinite&&(this._intersectsLineInfinite=e,this.requestRender(T.UPDATE))}get pathVerticalPlaneEnabled(){return this._pathVerticalPlaneEnabled}set pathVerticalPlaneEnabled(e){e!==this._pathVerticalPlaneEnabled&&(this._pathVerticalPlaneEnabled=e,null!=this._pathVerticalPlaneData&&this.requestRender(T.UPDATE))}set pathVerticalPlaneVertices(e){null==this._pathVerticalPlaneData&&(this._pathVerticalPlaneData=new P(this._passParameters.renderCoordsHelper)),this._pathVerticalPlaneData.vertices=e,this.pathVerticalPlaneEnabled&&this.requestRender(T.UPDATE)}set pathVerticalPlaneBuffers(e){null==this._pathVerticalPlaneData&&(this._pathVerticalPlaneData=new P(this._passParameters.renderCoordsHelper)),this._pathVerticalPlaneData.buffers=e,this.pathVerticalPlaneEnabled&&this.requestRender(T.UPDATE)}setParameters(e){L(this._passParameters,e)&&this.requestRender(T.UPDATE)}precompile(){this._acquireTechnique()}render(e){const t=e.find((({name:e})=>e===this.produces));if(this.isDecoration&&!this.bindParameters.decorations||null==this._blit)return t;const i=this.renderingContext,n=e.find((({name:e})=>\"normals\"===e));this._passParameters.normals=n?.getTexture();const s=()=>{(this.heightManifoldEnabled||this.pointDistanceEnabled||this.lineVerticalPlaneSegment||this.intersectsLineEnabled)&&this._renderUnified(),this.pathVerticalPlaneEnabled&&this._renderPath()};if(!this.contrastControlEnabled)return i.bindFramebuffer(t.fbo),s(),t;this._passParameters.colors=t.getTexture();const r=this.fboCache.acquire(t.fbo.width,t.fbo.height,\"laser lines\");return i.bindFramebuffer(r.fbo),i.setClearColor(0,0,0,0),i.clear(C.COLOR|C.DEPTH),s(),i.unbindTexture(t.getTexture()),this._blit.blend(i,r,t,this.bindParameters)||this.requestRender(T.UPDATE),r.release(),t}_acquireTechnique(){return this._configuration.heightManifoldEnabled=this.heightManifoldEnabled,this._configuration.lineVerticalPlaneEnabled=this.lineVerticalPlaneEnabled,this._configuration.pointDistanceEnabled=this.pointDistanceEnabled,this._configuration.intersectsLineEnabled=this.intersectsLineEnabled,this._configuration.contrastControlEnabled=this.contrastControlEnabled,this._configuration.spherical=this.view.state.viewingMode===u.Global,this._techniques.get(D,this._configuration)}_renderUnified(){if(!this._updatePassParameters())return;const e=this._acquireTechnique();if(e.compiled){const t=this.renderingContext;t.bindTechnique(e,this.bindParameters,this._passParameters),t.screen.draw()}else this.requestRender(T.UPDATE)}_renderPath(){if(null==this._pathVerticalPlaneData)return;const e=this._techniques.get(b,this._pathTechniqueConfiguration);if(e.compiled){const t=this.renderingContext;this._passParameters.origin=this._pathVerticalPlaneData.origin,t.bindTechnique(e,this.bindParameters,this._passParameters),this._pathVerticalPlaneData.draw(t)}else this.requestRender(T.UPDATE)}_updatePassParameters(){if(!this._intersectsLineEnabled)return!0;const e=this.bindParameters.camera,t=this._passParameters;if(this._intersectsLineInfinite){if(a(p(t.intersectsLineSegment.origin,t.intersectsLineSegment.vector),w),w.c0=-Number.MAX_VALUE,!c(e.frustum,w))return!1;l(w,t.lineStartWorld),h(w,t.lineEndWorld)}else s(t.lineStartWorld,t.intersectsLineSegment.origin),r(t.lineEndWorld,t.intersectsLineSegment.origin,t.intersectsLineSegment.vector);return!0}get test(){}};e([i({constructOnly:!0})],j.prototype,\"contrastControlEnabled\",void 0),e([i()],j.prototype,\"isDecoration\",void 0),e([i()],j.prototype,\"produces\",void 0),e([i()],j.prototype,\"consumes\",void 0),j=e([n(\"esri.views.3d.webgl-engine.effects.laserlines.LaserLineRenderer\")],j);const w=o();export{j as LaserLineRenderer};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport\"../../../../core/has.js\";import{c as e}from\"../../../../chunks/vec32.js\";import{create as t,clone as i}from\"../../../../core/libs/gl-matrix-2/factories/vec3f64.js\";import{create as n,fromValues as s,copy as r}from\"../../../../geometry/support/lineSegment.js\";import{VisualElement as l}from\"./VisualElement.js\";import{LaserLineRenderer as a}from\"../../webgl-engine/effects/laserlines/LaserLineRenderer.js\";import{d as h}from\"../../../../chunks/Laserlines.glsl.js\";class c extends l{constructor(e){super(e),this._angleCutoff=h,this._style={},this._heightManifoldTarget=t(),this._heightManifoldEnabled=!1,this._intersectsLine=n(),this._intersectsLineEnabled=!1,this._intersectsLineInfinite=!1,this._lineVerticalPlaneSegment=null,this._pathVerticalPlaneBuffers=null,this._pointDistanceLine=null,this.applyProperties(e)}get testData(){}createResources(){this._ensureRenderer()}destroyResources(){this._disposeRenderer()}updateVisibility(){this._syncRenderer(),this._syncHeightManifold(),this._syncIntersectsLine(),this._syncPathVerticalPlane(),this._syncLineVerticalPlane(),this._syncPointDistance()}get angleCutoff(){return this._angleCutoff}set angleCutoff(e){this._angleCutoff!==e&&(this._angleCutoff=e,this._syncAngleCutoff())}get style(){return this._style}set style(e){this._style=e,this._syncStyle()}get heightManifoldTarget(){return this._heightManifoldEnabled?this._heightManifoldTarget:null}set heightManifoldTarget(t){null!=t?(e(this._heightManifoldTarget,t),this._heightManifoldEnabled=!0):this._heightManifoldEnabled=!1,this._syncRenderer(),this._syncHeightManifold()}set intersectsWorldUpAtLocation(e){if(null==e)return void(this.intersectsLine=null);const t=this.view.renderCoordsHelper.worldUpAtPosition(e,_);this.intersectsLine=s(e,t),this.intersectsLineInfinite=!0}get intersectsLine(){return this._intersectsLineEnabled?this._intersectsLine:null}set intersectsLine(e){null!=e?(r(e,this._intersectsLine),this._intersectsLineEnabled=!0):this._intersectsLineEnabled=!1,this._syncIntersectsLine(),this._syncRenderer()}get intersectsLineInfinite(){return this._intersectsLineInfinite}set intersectsLineInfinite(e){this._intersectsLineInfinite=e,this._syncIntersectsLineInfinite()}get lineVerticalPlaneSegment(){return this._lineVerticalPlaneSegment}set lineVerticalPlaneSegment(e){this._lineVerticalPlaneSegment=null!=e?r(e):null,this._syncLineVerticalPlane(),this._syncRenderer()}get pathVerticalPlane(){return this._pathVerticalPlaneBuffers}set pathVerticalPlane(e){this._pathVerticalPlaneBuffers=e,this._syncPathVerticalPlane(),this._syncLineVerticalPlane(),this._syncPointDistance(),this._syncRenderer()}get pointDistanceLine(){return this._pointDistanceLine}set pointDistanceLine(e){this._pointDistanceLine=null!=e?{origin:i(e.origin),target:e.target?i(e.target):null}:null,this._syncPointDistance(),this._syncRenderer()}get isDecoration(){return this._isDecoration}set isDecoration(e){this._isDecoration=e,this._renderer&&(this._renderer.isDecoration=e)}_syncRenderer(){this.attached&&this.visible&&(this._intersectsLineEnabled||this._heightManifoldEnabled||null!=this._pointDistanceLine||null!=this._pathVerticalPlaneBuffers)?this._ensureRenderer():this._disposeRenderer()}_ensureRenderer(){null==this._renderer&&(this._renderer=new a({view:this.view,contrastControlEnabled:!0,isDecoration:this.isDecoration}),this._syncStyle(),this._syncHeightManifold(),this._syncIntersectsLine(),this._syncIntersectsLineInfinite(),this._syncPathVerticalPlane(),this._syncLineVerticalPlane(),this._syncPointDistance(),this._syncAngleCutoff())}_syncStyle(){null!=this._renderer&&this._renderer.setParameters(this._style)}_syncAngleCutoff(){this._renderer?.setParameters({angleCutoff:this._angleCutoff})}_syncHeightManifold(){null!=this._renderer&&(this._renderer.heightManifoldEnabled=this._heightManifoldEnabled&&this.visible,this._heightManifoldEnabled&&(this._renderer.heightManifoldTarget=this._heightManifoldTarget))}_syncIntersectsLine(){null!=this._renderer&&(this._renderer.intersectsLineEnabled=this._intersectsLineEnabled&&this.visible,this._intersectsLineEnabled&&(this._renderer.intersectsLineSegment=this._intersectsLine))}_syncIntersectsLineInfinite(){null!=this._renderer&&(this._renderer.intersectsLineInfinite=this._intersectsLineInfinite)}_syncPathVerticalPlane(){null!=this._renderer&&(this._renderer.pathVerticalPlaneEnabled=null!=this._pathVerticalPlaneBuffers&&this.visible,null!=this._pathVerticalPlaneBuffers&&(this._renderer.pathVerticalPlaneBuffers=this._pathVerticalPlaneBuffers))}_syncLineVerticalPlane(){null!=this._renderer&&(this._renderer.lineVerticalPlaneEnabled=null!=this._lineVerticalPlaneSegment&&this.visible,null!=this._lineVerticalPlaneSegment&&(this._renderer.lineVerticalPlaneSegment=this._lineVerticalPlaneSegment))}_syncPointDistance(){if(null==this._renderer)return;const e=this._pointDistanceLine,t=null!=e;this._renderer.pointDistanceEnabled=t&&null!=e.target&&this.visible,t&&(this._renderer.pointDistanceOrigin=e.origin,null!=e.target&&(this._renderer.pointDistanceTarget=e.target))}_disposeRenderer(){null!=this._renderer&&this.view.stage&&(this._renderer.destroy(),this._renderer=null)}forEachMaterial(){}}const _=t();export{c as LaserlineVisualElement};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{ReadDepth as o}from\"./output/ReadDepth.glsl.js\";import{BlendColorsPremultiplied as e}from\"./util/BlendColorsPremultiplied.glsl.js\";import{CameraSpace as l}from\"./util/CameraSpace.glsl.js\";import{Float3PassUniform as t}from\"../shaderModules/Float3PassUniform.js\";import{FloatPassUniform as r}from\"../shaderModules/FloatPassUniform.js\";import{glsl as a}from\"../shaderModules/glsl.js\";import{Texture2DBindUniform as n}from\"../shaderModules/Texture2DBindUniform.js\";import{Texture2DPassUniform as i}from\"../shaderModules/Texture2DPassUniform.js\";function p(p,d){const s=p.fragment;s.include(o),p.include(l),s.include(e),s.uniforms.add(new r(\"globalAlpha\",(o=>o.globalAlpha)),new t(\"glowColor\",(o=>o.glowColor)),new r(\"glowWidth\",((o,e)=>o.glowWidth*e.camera.pixelRatio)),new r(\"glowFalloff\",(o=>o.glowFalloff)),new t(\"innerColor\",(o=>o.innerColor)),new r(\"innerWidth\",((o,e)=>o.innerWidth*e.camera.pixelRatio)),new n(\"depthMap\",(o=>o.depth?.attachment)),new i(\"normalMap\",(o=>o.normals))),s.code.add(a`vec4 premultipliedColor(vec3 rgb, float alpha) {\nreturn vec4(rgb * alpha, alpha);\n}`),s.code.add(a`vec4 laserlineProfile(float dist) {\nif (dist > glowWidth) {\nreturn vec4(0.0);\n}\nfloat innerAlpha = (1.0 - smoothstep(0.0, innerWidth, dist));\nfloat glowAlpha = pow(max(0.0, 1.0 - dist / glowWidth), glowFalloff);\nreturn blendColorsPremultiplied(\npremultipliedColor(innerColor, innerAlpha),\npremultipliedColor(glowColor, glowAlpha)\n);\n}`),s.code.add(a`bool laserlineReconstructFromDepth(out vec3 pos, out vec3 normal, out float angleCutoffAdjust, out float depthDiscontinuityAlpha) {\nfloat depth = depthFromTexture(depthMap, uv);\nif (depth == 1.0) {\nreturn false;\n}\nfloat linearDepth = linearizeDepth(depth);\npos = reconstructPosition(gl_FragCoord.xy, linearDepth);\nfloat minStep = 6e-8;\nfloat depthStep = clamp(depth + minStep, 0.0, 1.0);\nfloat linearDepthStep = linearizeDepth(depthStep);\nfloat depthError = abs(linearDepthStep - linearDepth);\nvec3 normalReconstructed = normalize(cross(dFdx(pos), dFdy(pos)));\nvec3 normalFromTexture = normalize(texture(normalMap, uv).xyz * 2.0 - 1.0);\nfloat blendFactor = smoothstep(0.15, 0.2, depthError);\nnormal = normalize(mix(normalReconstructed, normalFromTexture, blendFactor));\nangleCutoffAdjust = mix(0.0, 0.004, blendFactor);\nfloat ddepth = fwidth(linearDepth);\ndepthDiscontinuityAlpha = 1.0 - smoothstep(0.0, 0.01, -ddepth / linearDepth);\nreturn true;\n}`),d.contrastControlEnabled?s.uniforms.add(new i(\"frameColor\",((o,e)=>o.colors)),new r(\"globalAlphaContrastBoost\",(o=>o.globalAlphaContrastBoost))).code.add(a`float rgbToLuminance(vec3 color) {\nreturn dot(vec3(0.2126, 0.7152, 0.0722), color);\n}\nvec4 laserlineOutput(vec4 color) {\nfloat backgroundLuminance = rgbToLuminance(texture(frameColor, uv).rgb);\nfloat alpha = clamp(globalAlpha * max(backgroundLuminance * globalAlphaContrastBoost, 1.0), 0.0, 1.0);\nreturn color * alpha;\n}`):s.code.add(a`vec4 laserlineOutput(vec4 color) {\nreturn color * globalAlpha;\n}`)}export{p as Laserline};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{deg2rad as e}from\"../core/mathUtils.js\";import{set as i}from\"../core/libs/gl-matrix-2/math/vec2.js\";import{create as t}from\"../core/libs/gl-matrix-2/factories/vec2f64.js\";import{t as n,d as a,n as o,l as r,j as l,c as s,h as c,f as d}from\"./vec32.js\";import{create as f}from\"../core/libs/gl-matrix-2/factories/vec3f64.js\";import{t as p}from\"./vec42.js\";import{create as g}from\"../core/libs/gl-matrix-2/factories/vec4f64.js\";import{pointAt as h}from\"../geometry/support/lineSegment.js\";import{fromPositionAndNormal as m,create as u}from\"../geometry/support/plane.js\";import{a as w,c as x}from\"./sphere.js\";import{Laserline as v}from\"../views/3d/webgl-engine/core/shaderLibrary/Laserline.glsl.js\";import{ScreenSpacePass as P}from\"../views/3d/webgl-engine/core/shaderLibrary/ScreenSpacePass.glsl.js\";import{Float2PassUniform as b}from\"../views/3d/webgl-engine/core/shaderModules/Float2PassUniform.js\";import{Float3BindUniform as D}from\"../views/3d/webgl-engine/core/shaderModules/Float3BindUniform.js\";import{Float3PassUniform as M}from\"../views/3d/webgl-engine/core/shaderModules/Float3PassUniform.js\";import{Float4PassUniform as S}from\"../views/3d/webgl-engine/core/shaderModules/Float4PassUniform.js\";import{FloatBindUniform as C}from\"../views/3d/webgl-engine/core/shaderModules/FloatBindUniform.js\";import{FloatPassUniform as L}from\"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";import{glsl as j}from\"../views/3d/webgl-engine/core/shaderModules/glsl.js\";import{ShaderBuilder as A}from\"../views/webgl/ShaderBuilder.js\";const V=e(6);function y(e){const i=new A;i.include(P),i.include(v,e);const t=i.fragment;if(e.lineVerticalPlaneEnabled||e.heightManifoldEnabled)if(t.uniforms.add(new L(\"maxPixelDistance\",((i,t)=>e.heightManifoldEnabled?2*t.camera.computeScreenPixelSizeAt(i.heightManifoldTarget):2*t.camera.computeScreenPixelSizeAt(i.lineVerticalPlaneSegment.origin)))),t.code.add(j`float planeDistancePixels(vec4 plane, vec3 pos) {\nfloat dist = dot(plane.xyz, pos) + plane.w;\nfloat width = fwidth(dist);\ndist /= min(width, maxPixelDistance);\nreturn abs(dist);\n}`),e.spherical){const e=(e,i,t)=>n(e,i.heightManifoldTarget,t.camera.viewMatrix),i=(e,i)=>n(e,[0,0,0],i.camera.viewMatrix);t.uniforms.add(new S(\"heightManifoldOrigin\",((t,n)=>(e(F,t,n),i(H,n),a(H,H,F),o(G,H),G[3]=r(H),G))),new D(\"globalOrigin\",(e=>i(F,e))),new L(\"cosSphericalAngleThreshold\",((e,i)=>1-Math.max(2,l(i.camera.eye,e.heightManifoldTarget)*i.camera.perRenderPixelRatio)/r(e.heightManifoldTarget)))),t.code.add(j`float globeDistancePixels(float posInGlobalOriginLength) {\nfloat dist = abs(posInGlobalOriginLength - heightManifoldOrigin.w);\nfloat width = fwidth(dist);\ndist /= min(width, maxPixelDistance);\nreturn abs(dist);\n}\nfloat heightManifoldDistancePixels(vec4 heightPlane, vec3 pos) {\nvec3 posInGlobalOriginNorm = normalize(globalOrigin - pos);\nfloat cosAngle = dot(posInGlobalOriginNorm, heightManifoldOrigin.xyz);\nvec3 posInGlobalOrigin = globalOrigin - pos;\nfloat posInGlobalOriginLength = length(posInGlobalOrigin);\nfloat sphericalDistance = globeDistancePixels(posInGlobalOriginLength);\nfloat planarDistance = planeDistancePixels(heightPlane, pos);\nreturn cosAngle < cosSphericalAngleThreshold ? sphericalDistance : planarDistance;\n}`)}else t.code.add(j`float heightManifoldDistancePixels(vec4 heightPlane, vec3 pos) {\nreturn planeDistancePixels(heightPlane, pos);\n}`);if(e.pointDistanceEnabled&&(t.uniforms.add(new L(\"maxPixelDistance\",((e,i)=>2*i.camera.computeScreenPixelSizeAt(e.pointDistanceTarget)))),t.code.add(j`float sphereDistancePixels(vec4 sphere, vec3 pos) {\nfloat dist = distance(sphere.xyz, pos) - sphere.w;\nfloat width = fwidth(dist);\ndist /= min(width, maxPixelDistance);\nreturn abs(dist);\n}`)),e.intersectsLineEnabled&&t.uniforms.add(new C(\"perScreenPixelRatio\",(e=>e.camera.perScreenPixelRatio))).code.add(j`float lineDistancePixels(vec3 start, vec3 dir, float radius, vec3 pos) {\nfloat dist = length(cross(dir, pos - start)) / (length(pos) * perScreenPixelRatio);\nreturn abs(dist) - radius;\n}`),(e.lineVerticalPlaneEnabled||e.intersectsLineEnabled)&&t.code.add(j`bool pointIsWithinLine(vec3 pos, vec3 start, vec3 end) {\nvec3 dir = end - start;\nfloat t2 = dot(dir, pos - start);\nfloat l2 = dot(dir, dir);\nreturn t2 >= 0.0 && t2 <= l2;\n}`),t.main.add(j`vec3 pos;\nvec3 normal;\nfloat angleCutoffAdjust;\nfloat depthDiscontinuityAlpha;\nif (!laserlineReconstructFromDepth(pos, normal, angleCutoffAdjust, depthDiscontinuityAlpha)) {\nfragColor = vec4(0.0);\nreturn;\n}\nvec4 color = vec4(0.0);`),e.heightManifoldEnabled){t.uniforms.add(new b(\"angleCutoff\",(e=>O(e))),new S(\"heightPlane\",((e,i)=>R(e.heightManifoldTarget,e.renderCoordsHelper.worldUpAtPosition(e.heightManifoldTarget,F),i.camera.viewMatrix))));const i=e.spherical?j`normalize(globalOrigin - pos)`:j`heightPlane.xyz`;t.main.add(j`\n      vec2 angleCutoffAdjusted = angleCutoff - angleCutoffAdjust;\n      // Fade out laserlines on flat surfaces\n      float heightManifoldAlpha = 1.0 - smoothstep(angleCutoffAdjusted.x, angleCutoffAdjusted.y, abs(dot(normal, ${i})));\n      vec4 heightManifoldColor = laserlineProfile(heightManifoldDistancePixels(heightPlane, pos));\n      color = max(color, heightManifoldColor * heightManifoldAlpha);`)}return e.pointDistanceEnabled&&(t.uniforms.add(new b(\"angleCutoff\",(e=>O(e))),new S(\"pointDistanceSphere\",((e,i)=>E(e,i)))),t.main.add(j`float pointDistanceSphereDistance = sphereDistancePixels(pointDistanceSphere, pos);\nvec4 pointDistanceSphereColor = laserlineProfile(pointDistanceSphereDistance);\nfloat pointDistanceSphereAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, abs(dot(normal, normalize(pos - pointDistanceSphere.xyz))));\ncolor = max(color, pointDistanceSphereColor * pointDistanceSphereAlpha);`)),e.lineVerticalPlaneEnabled&&(t.uniforms.add(new b(\"angleCutoff\",(e=>O(e))),new S(\"lineVerticalPlane\",((e,i)=>z(e,i))),new M(\"lineVerticalStart\",((e,i)=>I(e,i))),new M(\"lineVerticalEnd\",((e,i)=>T(e,i)))),t.main.add(j`if (pointIsWithinLine(pos, lineVerticalStart, lineVerticalEnd)) {\nfloat lineVerticalDistance = planeDistancePixels(lineVerticalPlane, pos);\nvec4 lineVerticalColor = laserlineProfile(lineVerticalDistance);\nfloat lineVerticalAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, abs(dot(normal, lineVerticalPlane.xyz)));\ncolor = max(color, lineVerticalColor * lineVerticalAlpha);\n}`)),e.intersectsLineEnabled&&(t.uniforms.add(new b(\"angleCutoff\",(e=>O(e))),new M(\"intersectsLineStart\",((e,i)=>n(F,e.lineStartWorld,i.camera.viewMatrix))),new M(\"intersectsLineEnd\",((e,i)=>n(F,e.lineEndWorld,i.camera.viewMatrix))),new M(\"intersectsLineDirection\",((e,i)=>(s(G,e.intersectsLineSegment.vector),G[3]=0,o(F,p(G,G,i.camera.viewMatrix))))),new L(\"intersectsLineRadius\",(e=>e.intersectsLineRadius))),t.main.add(j`if (pointIsWithinLine(pos, intersectsLineStart, intersectsLineEnd)) {\nfloat intersectsLineDistance = lineDistancePixels(intersectsLineStart, intersectsLineDirection, intersectsLineRadius, pos);\nvec4 intersectsLineColor = laserlineProfile(intersectsLineDistance);\nfloat intersectsLineAlpha = 1.0 - smoothstep(angleCutoff.x, angleCutoff.y, 1.0 - abs(dot(normal, intersectsLineDirection)));\ncolor = max(color, intersectsLineColor * intersectsLineAlpha);\n}`)),t.main.add(j`fragColor = laserlineOutput(color * depthDiscontinuityAlpha);`),i}function O(t){return i(U,Math.cos(t.angleCutoff),Math.cos(Math.max(0,t.angleCutoff-e(2))))}function E(e,i){return n(w(N),e.pointDistanceOrigin,i.camera.viewMatrix),N[3]=l(e.pointDistanceOrigin,e.pointDistanceTarget),N}function z(e,i){const t=h(e.lineVerticalPlaneSegment,.5,F),n=e.renderCoordsHelper.worldUpAtPosition(t,W),a=o(H,e.lineVerticalPlaneSegment.vector),r=c(F,n,a);return o(r,r),R(e.lineVerticalPlaneSegment.origin,r,i.camera.viewMatrix)}function I(e,i){const t=s(F,e.lineVerticalPlaneSegment.origin);return e.renderCoordsHelper.setAltitude(t,0),n(t,t,i.camera.viewMatrix)}function T(e,i){const t=d(F,e.lineVerticalPlaneSegment.origin,e.lineVerticalPlaneSegment.vector);return e.renderCoordsHelper.setAltitude(t,0),n(t,t,i.camera.viewMatrix)}function R(e,i,t){return n(_,e,t),s(G,i),G[3]=0,p(G,G,t),m(_,G,B)}const U=t(),F=f(),G=g(),W=f(),H=f(),_=f(),B=u(),N=x(),$=Object.freeze(Object.defineProperty({__proto__:null,build:y,defaultAngleCutoff:V},Symbol.toStringTag,{value:\"Module\"}));export{$ as L,y as b,V as d};\n","/*\nAll material copyright ESRI, All Rights Reserved, unless otherwise specified.\nSee https://js.arcgis.com/4.33/esri/copyright.txt for details.\n*/\nimport{translate as e}from\"../core/libs/gl-matrix-2/math/mat4.js\";import{create as t}from\"../core/libs/gl-matrix-2/factories/mat4f64.js\";import{set as o}from\"../core/libs/gl-matrix-2/math/vec2.js\";import{create as r}from\"../core/libs/gl-matrix-2/factories/vec2f64.js\";import{Laserline as a}from\"../views/3d/webgl-engine/core/shaderLibrary/Laserline.glsl.js\";import{Float2BindUniform as i}from\"../views/3d/webgl-engine/core/shaderModules/Float2BindUniform.js\";import{FloatBindUniform as n}from\"../views/3d/webgl-engine/core/shaderModules/FloatBindUniform.js\";import{FloatPassUniform as s}from\"../views/3d/webgl-engine/core/shaderModules/FloatPassUniform.js\";import{If as l,glsl as d}from\"../views/3d/webgl-engine/core/shaderModules/glsl.js\";import{Matrix4BindUniform as c}from\"../views/3d/webgl-engine/core/shaderModules/Matrix4BindUniform.js\";import{Matrix4PassUniform as m}from\"../views/3d/webgl-engine/core/shaderModules/Matrix4PassUniform.js\";import{VertexAttribute as v}from\"../views/3d/webgl-engine/lib/VertexAttribute.js\";import{ShaderBuilder as p}from\"../views/webgl/ShaderBuilder.js\";function w(t){const r=new p;r.include(a,t);const{vertex:w,fragment:u}=r;w.uniforms.add(new m(\"modelView\",((t,{camera:o})=>e(f,o.viewMatrix,t.origin))),new c(\"proj\",(({camera:e})=>e.projectionMatrix)),new s(\"glowWidth\",((e,{camera:t})=>e.glowWidth*t.pixelRatio)),new i(\"pixelToNDC\",(({camera:e})=>o(g,2/e.fullViewport[2],2/e.fullViewport[3])))),r.attributes.add(v.START,\"vec3\"),r.attributes.add(v.END,\"vec3\"),t.spherical&&(r.attributes.add(v.START_UP,\"vec3\"),r.attributes.add(v.END_UP,\"vec3\")),r.attributes.add(v.EXTRUDE,\"vec2\"),r.varyings.add(\"uv\",\"vec2\"),r.varyings.add(\"vViewStart\",\"vec3\"),r.varyings.add(\"vViewEnd\",\"vec3\"),r.varyings.add(\"vViewSegmentNormal\",\"vec3\"),r.varyings.add(\"vViewStartNormal\",\"vec3\"),r.varyings.add(\"vViewEndNormal\",\"vec3\");const h=!t.spherical;return w.main.add(d`\n    vec3 pos = mix(start, end, extrude.x);\n\n    vec4 viewPos = modelView * vec4(pos, 1);\n    vec4 projPos = proj * viewPos;\n    vec2 ndcPos = projPos.xy / projPos.w;\n\n    // in planar we hardcode the up vectors to be Z-up */\n    ${l(h,d`vec3 startUp = vec3(0, 0, 1);`)}\n    ${l(h,d`vec3 endUp = vec3(0, 0, 1);`)}\n\n    // up vector corresponding to the location of the vertex, selecting either startUp or endUp */\n    vec3 up = extrude.y * mix(startUp, endUp, extrude.x);\n    vec3 viewUp = (modelView * vec4(up, 0)).xyz;\n\n    vec4 projPosUp = proj * vec4(viewPos.xyz + viewUp, 1);\n    vec2 projUp = normalize(projPosUp.xy / projPosUp.w - ndcPos);\n\n    // extrude ndcPos along projUp to the edge of the screen\n    vec2 lxy = abs(sign(projUp) - ndcPos);\n    ndcPos += length(lxy) * projUp;\n\n    vViewStart = (modelView * vec4(start, 1)).xyz;\n    vViewEnd = (modelView * vec4(end, 1)).xyz;\n\n    vec3 viewStartEndDir = vViewEnd - vViewStart;\n\n    vec3 viewStartUp = (modelView * vec4(startUp, 0)).xyz;\n\n    // the normal of the plane that aligns with the segment and the up vector\n    vViewSegmentNormal = normalize(cross(viewStartUp, viewStartEndDir));\n\n    // the normal orthogonal to the segment normal and the start up vector\n    vViewStartNormal = -normalize(cross(vViewSegmentNormal, viewStartUp));\n\n    // the normal orthogonal to the segment normal and the end up vector\n    vec3 viewEndUp = (modelView * vec4(endUp, 0)).xyz;\n    vViewEndNormal = normalize(cross(vViewSegmentNormal, viewEndUp));\n\n    // Add enough padding in the X screen space direction for \"glow\"\n    float xPaddingPixels = sign(dot(vViewSegmentNormal, viewPos.xyz)) * (extrude.x * 2.0 - 1.0) * glowWidth;\n    ndcPos.x += xPaddingPixels * pixelToNDC.x;\n\n    // uv is used to read back depth to reconstruct the position at the fragment\n    uv = ndcPos * 0.5 + 0.5;\n\n    gl_Position = vec4(ndcPos, 0, 1);\n  `),u.uniforms.add(new n(\"perScreenPixelRatio\",(e=>e.camera.perScreenPixelRatio))),u.code.add(d`float planeDistance(vec3 planeNormal, vec3 planeOrigin, vec3 pos) {\nreturn dot(planeNormal, pos - planeOrigin);\n}\nfloat segmentDistancePixels(vec3 segmentNormal, vec3 startNormal, vec3 endNormal, vec3 pos, vec3 start, vec3 end) {\nfloat distSegmentPlane = planeDistance(segmentNormal, start, pos);\nfloat distStartPlane = planeDistance(startNormal, start, pos);\nfloat distEndPlane = planeDistance(endNormal, end, pos);\nfloat dist = max(max(distStartPlane, distEndPlane), abs(distSegmentPlane));\nfloat width = fwidth(distSegmentPlane);\nfloat maxPixelDistance = length(pos) * perScreenPixelRatio * 2.0;\nfloat pixelDist = dist / min(width, maxPixelDistance);\nreturn abs(pixelDist);\n}`),u.main.add(d`fragColor = vec4(0.0);\nvec3 dEndStart = vViewEnd - vViewStart;\nif (dot(dEndStart, dEndStart) < 1e-5) {\nreturn;\n}\nvec3 pos;\nvec3 normal;\nfloat angleCutoffAdjust;\nfloat depthDiscontinuityAlpha;\nif (!laserlineReconstructFromDepth(pos, normal, angleCutoffAdjust, depthDiscontinuityAlpha)) {\nreturn;\n}\nfloat distance = segmentDistancePixels(\nvViewSegmentNormal,\nvViewStartNormal,\nvViewEndNormal,\npos,\nvViewStart,\nvViewEnd\n);\nvec4 color = laserlineProfile(distance);\nfloat alpha = (1.0 - smoothstep(0.995 - angleCutoffAdjust, 0.999 - angleCutoffAdjust, abs(dot(normal, vViewSegmentNormal))));\nfragColor = laserlineOutput(color * alpha * depthDiscontinuityAlpha);`),r}const g=r(),f=t(),u=Object.freeze(Object.defineProperty({__proto__:null,build:w},Symbol.toStringTag,{value:\"Module\"}));export{u as L,w as b};\n"],"names":["a","n","constructor","super","arguments","this","innerColor","t","innerWidth","glowColor","glowWidth","glowFalloff","globalAlpha","globalAlphaContrastBoost","angleCutoff","e","pointDistanceOrigin","s","pointDistanceTarget","lineVerticalPlaneSegment","i","intersectsLineSegment","intersectsLineRadius","heightManifoldTarget","lineStartWorld","lineEndWorld","h","o","r","l","origin","c","Map","START","END","EXTRUDE","START_UP","END_UP","_","_renderCoordsHelper","_buffers","_origin","_dirty","_count","_vao","vertices","length","buffers","Math","floor","draw","_ensureVAO","bindVAO","drawArrays","TRIANGLES","dispose","_layout","viewingMode","Global","b","g","_this$_vao","_createVAO","_ensureVertexData","_createDataBuffer","u","createVertex","STATIC_DRAW","_e$vertexBuffers$get","vertexBuffers","get","setData","reduce","d","createBuffer","f","_setUpVectors","bind","m","getAltitude","setAltitude","start","setVec","extrude","setValues","end","buffer","worldUpAtPosition","p","startUp","endUp","vec3f","vec2f","contrastControlEnabled","spherical","prototype","heightManifoldEnabled","pointDistanceEnabled","lineVerticalPlaneEnabled","intersectsLineEnabled","j","isDecoration","produces","LASERLINES","consumes","required","requireGeometryDepth","_configuration","q","_pathTechniqueConfiguration","E","_heightManifoldEnabled","_pointDistanceEnabled","_lineVerticalPlaneEnabled","_intersectsLineEnabled","_intersectsLineInfinite","_pathVerticalPlaneEnabled","_passParameters","view","stage","renderView","techniques","precompile","initialize","renderCoordsHelper","state","_techniques","_blit","V","PremultipliedAlpha","destroy","_pathVerticalPlaneData","requestRender","T","UPDATE","intersectsLineInfinite","pathVerticalPlaneEnabled","pathVerticalPlaneVertices","P","pathVerticalPlaneBuffers","setParameters","L","_acquireTechnique","render","find","_ref","name","bindParameters","decorations","renderingContext","_ref2","normals","getTexture","_renderUnified","_renderPath","bindFramebuffer","fbo","colors","fboCache","acquire","width","height","setClearColor","clear","C","COLOR","DEPTH","unbindTexture","blend","release","D","_updatePassParameters","compiled","bindTechnique","screen","camera","vector","w","c0","Number","MAX_VALUE","frustum","test","constructOnly","_angleCutoff","_style","_heightManifoldTarget","_intersectsLine","_lineVerticalPlaneSegment","_pathVerticalPlaneBuffers","_pointDistanceLine","applyProperties","testData","createResources","_ensureRenderer","destroyResources","_disposeRenderer","updateVisibility","_syncRenderer","_syncHeightManifold","_syncIntersectsLine","_syncPathVerticalPlane","_syncLineVerticalPlane","_syncPointDistance","_syncAngleCutoff","style","_syncStyle","intersectsWorldUpAtLocation","intersectsLine","_syncIntersectsLineInfinite","pathVerticalPlane","pointDistanceLine","target","_isDecoration","_renderer","attached","visible","_this$_renderer","forEachMaterial","fragment","include","uniforms","add","pixelRatio","_o$depth","depth","attachment","code","_templateObject","_taggedTemplateLiteral","_templateObject2","_templateObject3","_templateObject4","_templateObject5","y","A","v","computeScreenPixelSizeAt","viewMatrix","S","F","H","G","max","eye","perRenderPixelRatio","perScreenPixelRatio","_templateObject6","main","_templateObject7","O","R","_templateObject8","_templateObject9","_templateObject0","N","_templateObject1","W","z","M","I","_templateObject10","_templateObject11","_templateObject12","U","cos","B","x","$","Object","freeze","defineProperty","__proto__","build","defaultAngleCutoff","Symbol","toStringTag","value","vertex","projectionMatrix","_ref3","_ref4","fullViewport","attributes","varyings"],"sourceRoot":""}