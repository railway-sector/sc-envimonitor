"use strict";(self.webpackChunksc_envimonitor=self.webpackChunksc_envimonitor||[]).push([[75472],{2144:(e,t,n)=>{n.d(t,{b:()=>a});var r=n(18690),i=n(54901),o=n(50346),s=n(75540);class a{constructor(){this._currentOperationSignal=(0,s.v)(null)}get currentOperationType(){var e,t;return null!==(e=null===(t=this._currentOperationSignal.value)||void 0===t?void 0:t.type)&&void 0!==e?e:null}destroy(){this.stop()}async start(e,t,n){const s=this._currentOperationSignal.value;null===s||void 0===s||s.stop();const a=new AbortController,l=null===n||void 0===n?void 0:n.signal,u=AbortSignal.any([a.signal,l].filter(r.Ru)),c=(0,o.Tw)();let p=!1;const h=()=>{p||(p=!0,c.reject((0,o.NK)()))},d={type:e,resolve:e=>{p||(p=!0,c.resolve(e))},reject:h,promise:c.promise,stop:()=>a.abort(),handles:[]};this._currentOperationSignal.value=d,d.handles.push((0,o.u7)(l,()=>{a.abort()}),(0,o.u7)(u,()=>{(0,i.a0)(d.handles),p||h()}));try{return s&&(await s.promise.catch(()=>{}),(0,o.Te)(u)),await t(d,u),await c.promise}finally{(0,i.a0)(d.handles),this._currentOperationSignal.value===d&&(this._currentOperationSignal.value=null)}}stop(){var e;null===(e=this._currentOperationSignal.value)||void 0===e||e.stop()}}},10600:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(27106);function i(e){return function(){return new o(e.apply(this,arguments))}}function o(e){var t,n;function i(t,n){try{var s=e[t](n),a=s.value,l=a instanceof r.A;Promise.resolve(l?a.v:a).then(function(n){if(l){var r="return"===t?"return":"next";if(!a.k||n.done)return i(r,n);n=e[r](n).value}o(s.done?"return":"normal",n)},function(e){i("throw",e)})}catch(e){o("throw",e)}}function o(e,r){switch(e){case"return":t.resolve({value:r,done:!0});break;case"throw":t.reject(r);break;default:t.resolve({value:r,done:!1})}(t=t.next)?i(t.key,t.arg):n=null}this._invoke=function(e,r){return new Promise(function(o,s){var a={key:e,arg:r,resolve:o,reject:s,next:null};n?n=n.next=a:(t=n=a,i(e,r))})},"function"!=typeof e.return&&(this.return=void 0)}o.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},o.prototype.next=function(e){return this._invoke("next",e)},o.prototype.throw=function(e){return this._invoke("throw",e)},o.prototype.return=function(e){return this._invoke("return",e)}},19495:(e,t,n)=>{function r(e){var t,n,r,o=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);o--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new i(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function i(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return i=function(e){this.s=e,this.n=e.next},i.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new i(e)}n.d(t,{A:()=>r})},19747:(e,t,n)=>{n.d(t,{c:()=>o});var r=n(31633),i=n(44568);function o(e){var t,n,o,s,a;const l="metric";if(null==e)return l;const u=e.map,c=null!==(t=u&&"portalItem"in u?null===(n=u.portalItem)||void 0===n?void 0:n.portal:null)&&void 0!==t?t:i.A.getDefault();switch(null!==(o=null===(s=c.user)||void 0===s?void 0:s.units)&&void 0!==o?o:c.units){case l:return l;case"english":return"imperial"}return null!==(a=(0,r.jM)(e.spatialReference))&&void 0!==a?a:l}},27106:(e,t,n)=>{function r(e,t){this.v=e,this.k=t}n.d(t,{A:()=>r})},27631:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(50076);class i extends r.A{constructor(e,t,n){super(e,t,n),this.name="unknown",this.name=e}}},38983:(e,t,n)=>{function r(e,t,n){n=n||2;var r,o,a,l,u,c,h,d=t&&t.length,v=d?t[0]*n:e.length,f=i(e,0,v,n,!0),y=[];if(!f||f.next===f.prev)return y;if(d&&(f=p(e,t,f,n)),e.length>80*n){r=a=e[0],o=l=e[1];for(var m=n;m<v;m+=n)(u=e[m])<r&&(r=u),(c=e[m+1])<o&&(o=c),u>a&&(a=u),c>l&&(l=c);h=0!==(h=Math.max(a-r,l-o))?1/h:0}return s(f,y,n,r,o,h),y}function i(e,t,n,r,i){var o,s;if(i===k(e,t,n,r)>0)for(o=t;o<n;o+=r)s=P(o,e[o],e[o+1],s);else for(o=n-r;o>=t;o-=r)s=P(o,e[o],e[o+1],s);if(s&&M(s,s.next)){var a=s.next;A(s),s=a}return s}function o(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!M(r,r.next)&&0!==_(r.prev,r,r.next))r=r.next;else{var i=r.prev;if(A(r),(r=t=i)===r.next)break;n=!0}}while(n||r!==t);return t}function s(e,t,n,r,i,p,h){if(e){!h&&p&&y(e,r,i,p);for(var d,v,f=e;e.prev!==e.next;)if(d=e.prev,v=e.next,p?l(e,r,i,p):a(e))t.push(d.i/n),t.push(e.i/n),t.push(v.i/n),A(e),e=v.next,f=v.next;else if((e=v)===f){h?1===h?s(e=u(o(e),t,n),t,n,r,i,p,2):2===h&&c(e,t,n,r,i,p):s(o(e),t,n,r,i,p,1);break}}}function a(e){var t=e.prev,n=e,r=e.next;if(_(t,n,r)>=0)return!1;for(var i=e.next.next;i!==e.prev;){if(x(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)&&_(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function l(e,t,n,r){var i=e.prev,o=e,s=e.next;if(_(i,o,s)>=0)return!1;for(var a=i.x<o.x?i.x<s.x?i.x:s.x:o.x<s.x?o.x:s.x,l=i.y<o.y?i.y<s.y?i.y:s.y:o.y<s.y?o.y:s.y,u=i.x>o.x?i.x>s.x?i.x:s.x:o.x>s.x?o.x:s.x,c=i.y>o.y?i.y>s.y?i.y:s.y:o.y>s.y?o.y:s.y,p=m(a,l,t,n,r),h=m(u,c,t,n,r),d=e.prevZ,v=e.nextZ;d&&d.z>=p&&v&&v.z<=h;){if(d!==e.prev&&d!==e.next&&x(i.x,i.y,o.x,o.y,s.x,s.y,d.x,d.y)&&_(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,v!==e.prev&&v!==e.next&&x(i.x,i.y,o.x,o.y,s.x,s.y,v.x,v.y)&&_(v.prev,v,v.next)>=0)return!1;v=v.nextZ}for(;d&&d.z>=p;){if(d!==e.prev&&d!==e.next&&x(i.x,i.y,o.x,o.y,s.x,s.y,d.x,d.y)&&_(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;v&&v.z<=h;){if(v!==e.prev&&v!==e.next&&x(i.x,i.y,o.x,o.y,s.x,s.y,v.x,v.y)&&_(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0}function u(e,t,n){var r=e;do{var i=r.prev,s=r.next.next;!M(i,s)&&C(i,r,r.next,s)&&R(i,s)&&R(s,i)&&(t.push(i.i/n),t.push(r.i/n),t.push(s.i/n),A(r),A(r.next),r=e=s),r=r.next}while(r!==e);return o(r)}function c(e,t,n,r,i,a){var l=e;do{for(var u=l.next.next;u!==l.prev;){if(l.i!==u.i&&w(l,u)){var c=Z(l,u);return l=o(l,l.next),c=o(c,c.next),s(l,t,n,r,i,a),void s(c,t,n,r,i,a)}u=u.next}l=l.next}while(l!==e)}function p(e,t,n,r){var s,a,l,u=[];for(s=0,a=t.length;s<a;s++)(l=i(e,t[s]*r,s<a-1?t[s+1]*r:e.length,r,!1))===l.next&&(l.steiner=!0),u.push(g(l));for(u.sort(h),s=0;s<u.length;s++)n=o(n=v(u[s],n),n.next);return n}function h(e,t){return e.x-t.x}function d(e){if(e.next.prev===e)return e;let t=e;for(;;){const n=t.next;if(n.prev===t||n===t||n===e)break;t=n}return t}function v(e,t){var n=function(e,t){var n,r=t,i=e.x,o=e.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=i&&a>s){if(s=a,a===i){if(o===r.y)return r;if(o===r.next.y)return r.next}n=r.x<r.next.x?r:r.next}}r=r.next}while(r!==t);if(!n)return null;if(i===s)return n;var l,u=n,c=n.x,p=n.y,h=1/0;r=n;do{i>=r.x&&r.x>=c&&i!==r.x&&x(o<p?i:s,o,c,p,o<p?s:i,o,r.x,r.y)&&(l=Math.abs(o-r.y)/(i-r.x),R(r,e)&&(l<h||l===h&&(r.x>n.x||r.x===n.x&&f(n,r)))&&(n=r,h=l)),r=r.next}while(r!==u);return n}(e,t);if(!n)return t;var r=Z(n,e),i=o(n,n.next);let s=d(r);return o(s,s.next),i=d(i),d(t===n?i:t)}function f(e,t){return _(e.prev,e,t.prev)<0&&_(t.next,e,e.next)<0}function y(e,t,n,r){var i=e;do{null===i.z&&(i.z=m(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){var t,n,r,i,o,s,a,l,u=1;do{for(n=e,e=null,o=null,s=0;n;){for(s++,r=n,a=0,t=0;t<u&&(a++,r=r.nextZ);t++);for(l=u;a>0||l>0&&r;)0!==a&&(0===l||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;n=r}o.nextZ=null,u*=2}while(s>1)}(i)}function m(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-n)*i)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*i)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function g(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function x(e,t,n,r,i,o,s,a){return(i-s)*(t-a)-(e-s)*(o-a)>=0&&(e-s)*(r-a)-(n-s)*(t-a)>=0&&(n-s)*(o-a)-(i-s)*(r-a)>=0}function w(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&C(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(R(e,t)&&R(t,e)&&function(e,t){var n=e,r=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&i<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(_(e.prev,e,t.prev)||_(e,t.prev,t))||M(e,t)&&_(e.prev,e,e.next)>0&&_(t.prev,t,t.next)>0)}function _(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function M(e,t){return e.x===t.x&&e.y===t.y}function C(e,t,n,r){var i=S(_(e,t,n)),o=S(_(e,t,r)),s=S(_(n,r,e)),a=S(_(n,r,t));return i!==o&&s!==a||!(0!==i||!b(e,n,t))||!(0!==o||!b(e,r,t))||!(0!==s||!b(n,e,r))||!(0!==a||!b(n,t,r))}function b(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function S(e){return e>0?1:e<0?-1:0}function R(e,t){return _(e.prev,e,e.next)<0?_(e,t,e.next)>=0&&_(e,e.prev,t)>=0:_(e,t,e.prev)<0||_(e,e.next,t)<0}function Z(e,t){var n=new E(e.i,e.x,e.y),r=new E(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function P(e,t,n,r){var i=new E(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function A(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function E(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function k(e,t,n,r){for(var i=0,o=t,s=n-r;o<n;o+=r)i+=(e[s]-e[o])*(e[o+1]+e[s+1]),s=o;return i}n.d(t,{e:()=>r}),r.deviation=function(e,t,n,r){var i=t&&t.length,o=i?t[0]*n:e.length,s=Math.abs(k(e,0,o,n));if(i)for(var a=0,l=t.length;a<l;a++){var u=t[a]*n,c=a<l-1?t[a+1]*n:e.length;s-=Math.abs(k(e,u,c,n))}var p=0;for(a=0;a<r.length;a+=3){var h=r[a]*n,d=r[a+1]*n,v=r[a+2]*n;p+=Math.abs((e[h]-e[v])*(e[d+1]-e[h+1])-(e[h]-e[d])*(e[v+1]-e[h+1]))}return 0===s&&0===p?0:Math.abs((p-s)/s)},r.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var s=0;s<t;s++)n.vertices.push(e[i][o][s]);i>0&&(r+=e[i-1].length,n.holes.push(r))}return n}},40615:(e,t,n)=>{n.d(t,{Q:()=>m});var r=n(6326),i=n(91967),o=n(68134),s=n(46053),a=(n(81806),n(76460),n(47249),n(87990)),l=n(45564),u=n(69098),c=n(56002),p=n(19247),h=n(57919),d=n(31633);function v(e,t,n){return null==e?null:(0,d.oU)(e*t,"meters",n)}function f(e,t,n){return null==e?null:(0,d.oU)(e*t,"meters",n)}let y=class extends u.Pw{constructor(e){super(e),this._getSamplesMemoized=(0,c.B)((e,t)=>function(e,t){if(null==e||null==t)return null;const{samples:n,spatialReference:r}=e,{distance:i,elevation:o}=t,s=(0,d.GA)(r),a=(0,d.G9)(r),l=n.length,u=new Array(l);for(let c=0;c<l;++c){const e=n[c],t=e.sampledZ,r=e.coordinate;u[c]={x:r[0],y:r[1],z:t,distance:v(e.distance,s,i),elevation:f(t,a,o)}}return u}(e,t)),this._getStatisticsMemoized=(0,c.B)((e,t)=>function(e,t){if(null==e||null==t||null==e.statistics||null==e.spatialReference)return null;const{distance:n,elevation:r}=t,{statistics:i,spatialReference:o}=e,s=(0,d.GA)(o),a=(0,d.G9)(o);return{maxDistance:v(i.maxDistance,s,n),minElevation:f(i.minElevation,a,r),maxElevation:f(i.maxElevation,a,r),avgElevation:f(i.avgElevation,a,r),elevationGain:f(i.elevationGain,a,r),elevationLoss:f(i.elevationLoss,a,r),maxPositiveSlope:i.maxPositiveSlope,maxNegativeSlope:i.maxNegativeSlope,avgPositiveSlope:i.avgPositiveSlope,avgNegativeSlope:i.avgNegativeSlope}}(e,t)),this.rawResult=null}get available(){const{computation:e}=this;return e.profile.enabled&&e.available}get profile(){return this.computation.profile}get progress(){return(0,h.xi)(null!=this.rawResult&&this.computation.profile.enabled?this.rawResult.progress:0)}get samples(){return this._getSamplesMemoized(this.rawResult,this.computation.controller.effectiveDisplayUnits)}get statistics(){return this._getStatisticsMemoized(this.rawResult,this.computation.controller.effectiveDisplayUnits)}get hoveredPoint(){if(!this.computation.profile.enabled)return null;const e=this.computation.controller.analysisViewData.hoveredPosition;if(null==e)return null;const{rawResult:t,samples:n}=this;if(null==n||null==t)return null;const r=n.length;if(0===r)return null;const i=n[r-1].distance,o=(0,h.qX)(n,e*i,e=>e.distance);if(null==o)return null;const{x:s,y:a,z:l}=o;return null==l?null:new p.A({x:s,y:a,z:l,spatialReference:t.spatialReference})}};(0,r.Cg)([(0,s.MZ)()],y.prototype,"available",null),(0,r.Cg)([(0,s.MZ)({readOnly:!0})],y.prototype,"profile",null),(0,r.Cg)([(0,s.MZ)({readOnly:!0})],y.prototype,"progress",null),(0,r.Cg)([(0,s.MZ)()],y.prototype,"samples",null),(0,r.Cg)([(0,s.MZ)()],y.prototype,"statistics",null),(0,r.Cg)([(0,s.MZ)({constructOnly:!0})],y.prototype,"computation",void 0),(0,r.Cg)([(0,s.MZ)()],y.prototype,"rawResult",void 0),(0,r.Cg)([(0,s.MZ)()],y.prototype,"hoveredPoint",null),y=(0,r.Cg)([(0,a.$)("esri.views.analysis.ElevationProfile.ElevationProfileResult")],y);let m=class extends i.A{constructor(e){super(e),this.result=new y({computation:this}),this.numSamplesForPreview=30,this.numSamplesPerChunk=200}initialize(){this.addHandles([(0,o.wB)(()=>{const{geometry:e,elevationInfo:t}=this.controller.analysis;return[e,t]},()=>this.onInvalidate(this),o.OH)])}setResult(e){this.result.rawResult=e}clearResult(){this.setResult(null)}get progress(){return this.result.progress}get hoveredPoint(){return this.result.hoveredPoint}get available(){return!0}get minDemResolution(){return(0,l.zj)().defaultDemResolution}};(0,r.Cg)([(0,s.MZ)({constructOnly:!0})],m.prototype,"controller",void 0),(0,r.Cg)([(0,s.MZ)({constructOnly:!0})],m.prototype,"profile",void 0),(0,r.Cg)([(0,s.MZ)({constructOnly:!0})],m.prototype,"onInvalidate",void 0),(0,r.Cg)([(0,s.MZ)()],m.prototype,"result",void 0),(0,r.Cg)([(0,s.MZ)({readOnly:!0})],m.prototype,"progress",null),(0,r.Cg)([(0,s.MZ)()],m.prototype,"hoveredPoint",null),(0,r.Cg)([(0,s.MZ)()],m.prototype,"available",null),(0,r.Cg)([(0,s.MZ)()],m.prototype,"numSamplesForPreview",void 0),(0,r.Cg)([(0,s.MZ)()],m.prototype,"numSamplesPerChunk",void 0),(0,r.Cg)([(0,s.MZ)({readOnly:!0})],m.prototype,"minDemResolution",null),m=(0,r.Cg)([(0,a.$)("esri.views.analysis.ElevationProfile.ElevationProfileLineComputation")],m)},42151:(e,t,n)=>{n.d(t,{E5:()=>h,ZP:()=>y});var r=n(18690),i=n(94967),o=n(99809),s=n(60008),a=n(4336),l=n(20664),u=n(9392),c=n(19247);function p(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return null!=n?[e,t,n]:[e,t]}function h(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return null!=n?{x:e,y:t,z:n}:{x:e,y:t}}class d{constructor(e){this.spatialReference=e}mapToLocalMultiple(e){return e.map(e=>this.mapToLocal(e)).filter(r.Ru)}get doUnnormalization(){return!1}}class v extends d{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;super(t),this._defaultZ=n,this.transform=(0,o.vt)(),this.transformInv=(0,o.vt)(),this.transform=(0,o.o8)(e),(0,i.B8)(this.transformInv,this.transform)}makeMapPoint(e,t){return p(e,t,this._defaultZ)}mapToLocal(e){return h(this.transform[0]*e[0]+this.transform[2]*e[1]+this.transform[4],this.transform[1]*e[0]+this.transform[3]*e[1]+this.transform[5])}localToMap(e){return p(this.transformInv[0]*e.x+this.transformInv[2]*e.y+this.transformInv[4],this.transformInv[1]*e.x+this.transformInv[3]*e.y+this.transformInv[5],this._defaultZ)}}class f extends d{constructor(e,t){super(e.spatialReference),this.view=e,this.defaultZ=null,this.pWS=(0,u.vt)(),this.tangentFrameUpWS=(0,u.vt)(),this.tangentFrameRightWS=(0,u.vt)(),this.tangentFrameForwardWS=(0,u.vt)(),this.localFrameRightWS=(0,u.vt)(),this.localFrameUpWS=(0,u.vt)(),this.worldToLocalTransform=(0,a.vt)(),this.localToWorldTransform=(0,a.vt)(),this.scale=1,this.scale=e.resolution,this.referenceMapPoint=t,this.defaultZ=t.hasZ?t.z:null;const n=e.state.camera.viewRight;this.view.renderCoordsHelper.toRenderCoords(this.referenceMapPoint,this.pWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,0,this.tangentFrameRightWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,1,this.tangentFrameUpWS),this.view.renderCoordsHelper.worldBasisAtPosition(this.pWS,2,this.tangentFrameForwardWS);const r=(0,u.vt)();(0,l.h)(r,this.tangentFrameForwardWS,(0,l.f)(n,this.tangentFrameForwardWS)),(0,l.e)(this.localFrameRightWS,n,r),(0,l.n)(this.localFrameRightWS,this.localFrameRightWS),(0,l.i)(this.localFrameUpWS,this.tangentFrameForwardWS,this.localFrameRightWS),(0,s.Yc)(this.worldToLocalTransform,this.localFrameRightWS,this.tangentFrameRightWS),(0,s.B8)(this.localToWorldTransform,this.worldToLocalTransform)}get doUnnormalization(){return"global"===this.view.viewingMode}makeMapPoint(e,t){return p(e,t,this.defaultZ)}mapToLocal(e){const t=(0,u.vt)();this.view.renderCoordsHelper.toRenderCoords(new c.A({x:e[0],y:e[1],spatialReference:this.spatialReference}),t),(0,l.v)(t,t,this.worldToLocalTransform);const n=this.view.renderCoordsHelper.fromRenderCoords(t,new c.A({spatialReference:this.view.spatialReference}));return null!=n?h(n.x/this.scale,n.y/this.scale):null}localToMap(e){const t=(0,u.vt)();this.view.renderCoordsHelper.toRenderCoords(new c.A({x:e.x*this.scale,y:e.y*this.scale,spatialReference:this.spatialReference}),t),(0,l.v)(t,t,this.localToWorldTransform);const n=this.view.renderCoordsHelper.fromRenderCoords(t,new c.A({spatialReference:this.view.spatialReference}));return null!=n?p(n.x,n.y,this.defaultZ):null}}function y(e,t){if("2d"===e.type)return new v(e.state.transform,e.spatialReference,t.length>2?t[2]:null);if("3d"===e.type){const n=t.length>2?new c.A({x:t[0],y:t[1],z:t[2],spatialReference:e.spatialReference}):new c.A({x:t[0],y:t[1],spatialReference:e.spatialReference});return new f(e,n)}return null}},43825:(e,t,n)=>{n.d(t,{V:()=>E});var r=n(89379),i=n(19495),o=n(6326),s=n(91967),a=n(18690),l=n(98773),u=n(80674),c=n(54901),p=n(53084),h=n(53521),d=n(43927),v=n(30726),f=n(50346),y=n(68134),m=n(79468),g=n(31633),x=n(46053),w=(n(81806),n(76460),n(87990)),_=n(71630),M=n(12482),C=n(19747),b=n(731),S=n(45564),R=n(27631),Z=n(47453),P=n(57919),A=n(80397);let E=class extends s.A{constructor(e){super(e),this.error=null,this._getStableEffectiveUnits=(0,u.f)(()=>{var e,t;const n=(0,A.DM)(this._activeComputations.map(e=>e.result.rawResult)),r=this.analysis.displayUnits,i=(0,C.c)(this.view);return{distance:(0,g.Vs)(n.maxDistance,"meters",null!==(e=r.distance)&&void 0!==e?e:i),elevation:(0,g.jE)(n.maxElevation,"meters",null!==(t=r.elevation)&&void 0!==t?t:i)}},p.gh),this._updateTask=null,this._queue=null,this._currentTileCache=null,this._parametersPerComputation=new Map,this._getStableUpdateParameters=(0,u.f)(()=>{var e;return{stationary:null===(e=this.view.stationary)||void 0===e||e,activeComputations:this._activeComputations,generationParameters:this._generationParameters}},p.gh),this._getStableGenerationParameters=(0,u.f)(()=>{const{view:e,analysis:t}=this;return null!==e&&void 0!==e&&e.ready&&this._queue?{view:e,geometry:t.geometry,geometryIsValid:t.valid,elevationInfo:this.elevationInfo,queue:this._queue,cache:this._tileCache,options:this._options,slicePlane:"3d"===e.type?e.slice.plane:null}:null},p.gh),this._getStableElevationInfo=(0,u.f)(()=>{var e;return null!==(e=this.analysis.elevationInfo)&&void 0!==e?e:k},v.CM),this._getStableOptions=(0,u.f)(()=>{var e;const{densificationMaxSamples:t,defaultDemResolution:n,maxTotalSamples:r}=(0,S.zj)();let i=null!==(e=this._minDemResolution)&&void 0!==e?e:n;return i=parseFloat(i.toFixed(2)),{samplingDistance:i,densificationMaxSamples:Math.round(t/this._activeComputations.length),maxTotalSamples:r}},p.gh),this._updateThrottled=(0,m.n)(e=>this._update(e),(0,S.zj)().updateThrottleMillis)}initialize(){this._computationsCollection=(0,d.L)(()=>this.analysis.profiles,e=>this.computationFactory.create({controller:this,profile:e,onInvalidate:e=>this._invalidateComputation(e)}),{recycleItems:!0}),this.addHandles([this._computationsCollection.on("change",()=>{this._parametersPerComputation.clear(),this._updateThrottled(this._updateParameters)}),(0,y.wB)(()=>this._updateParameters,e=>this._updateThrottled(e),y.pc),this._updateThrottled]);const e="3d"===this.view.type?this.view.resourceController:void 0;this._queue=(0,P.LD)(null===e||void 0===e?void 0:e.scheduler),null===e||void 0===e||e.addUpdatingObject(this)}destroy(){var e;this._abortUpdate(),this._parametersPerComputation.clear(),null!==(e=this._computationsCollection)&&void 0!==e&&e.destroy(),this._queue=(0,v.pR)(this._queue),this._currentTileCache=(0,v.pR)(this._currentTileCache)}get effectiveDisplayUnits(){return this._getStableEffectiveUnits()}get progress(){let e=0,t=0;for(const n of this._activeComputations)e++,t+=n.progress;return(0,P.xi)(e>0?t/e:0)}get updating(){var e;const{progress:t}=this,n=!(null===(e=this._queue)||void 0===e||!e.updating),r=this._updateThrottled.hasPendingUpdates(),i=null!=this._updateTask&&!this._updateTask.finished;return n||r||i||t>0&&t<1}get results(){return this._computations.map(e=>e.result)}get statistics(){return(0,A.ch)(this._activeComputations.map(e=>e.result.statistics))}get hoveredPoints(){return this._computations.map(e=>e.hoveredPoint)}onElevationChange(e){const{view:t}=this;return"3d"===(null===t||void 0===t?void 0:t.type)?(0,y.on)(()=>t.elevationProvider,"elevation-change",e,{onListenerAdd:e,onListenerRemove:e}):(0,c.hA)()}get _tileCache(){this._currentTileCache=(0,v.pR)(this._currentTileCache);const e=this.view;if("3d"===(null===e||void 0===e?void 0:e.type)){var t;const n=null===(t=e.basemapTerrain)||void 0===t?void 0:t.elevationQueryCache;if(null!=n)return n}return null==this._currentTileCache&&(this._currentTileCache=new _.E(new h.q(20971520))),this._currentTileCache}get _computations(){var e,t;return null!==(e=null===(t=this._computationsCollection)||void 0===t?void 0:t.toArray())&&void 0!==e?e:[]}get _activeComputations(){return this._computations.filter(e=>e.profile.enabled&&e.available)}get _minDemResolution(){const e=this._minDemResolutions;return e.length>0?(0,a.jk)(e):null}get _minDemResolutions(){const e=[];for(const{minDemResolution:t}of this._activeComputations)null!=t&&e.push(t);return e}get _updateParameters(){return this._getStableUpdateParameters()}get _generationParameters(){return this._getStableGenerationParameters()}get elevationInfo(){return this._getStableElevationInfo()}get _options(){return this._getStableOptions()}_update(e){let{stationary:t,activeComputations:n,generationParameters:o}=e;this._abortUpdate(),t&&(null!=o?this._updateTask=(0,l.UT)(async e=>{this.error=null;const t=n.filter(e=>!this._isComputationValid(e,o));try{if(!o.geometryIsValid)throw new Z.ON;const n=(0,P.uK)((0,r.A)((0,r.A)({},o),{},{providers:t}),{signal:e});let h=!1;var s,a=!1,l=!1;try{for(var u,c=(0,i.A)(n);a=!(u=await c.next()).done;a=!1){const n=u.value;(0,f.Te)(e),h||(this._clearInvalidResults(o),h=!0);for(let e=0;e<t.length;e++)t[e].setResult(n[e])}}catch(p){l=!0,s=p}finally{try{a&&null!=c.return&&await c.return()}finally{if(l)throw s}}for(const e of t)this._parametersPerComputation.set(e,o)}catch(h){(0,f.QP)(h),this._abortUpdate(),this.error=h instanceof R.A?h:new Z.Bk,t.forEach(e=>{e.clearResult()})}}):this._clearResults())}_abortUpdate(){this._updateTask=(0,v.DC)(this._updateTask)}_isComputationValid(e,t){return this._parametersPerComputation.has(e)&&this._parametersPerComputation.get(e)===t}_invalidateComputation(e){this._parametersPerComputation.delete(e),this._updateThrottled(this._updateParameters)}_clearInvalidResults(e){for(const t of this._computations)this._isComputationValid(t,e)||(t.clearResult(),this._parametersPerComputation.delete(t))}_clearResults(){for(const e of this._computations)e.clearResult(),this._parametersPerComputation.delete(e)}};(0,o.Cg)([(0,x.MZ)({constructOnly:!0})],E.prototype,"analysis",void 0),(0,o.Cg)([(0,x.MZ)({constructOnly:!0})],E.prototype,"analysisViewData",void 0),(0,o.Cg)([(0,x.MZ)({constructOnly:!0})],E.prototype,"computationFactory",void 0),(0,o.Cg)([(0,x.MZ)({constructOnly:!0})],E.prototype,"view",void 0),(0,o.Cg)([(0,x.MZ)()],E.prototype,"error",void 0),(0,o.Cg)([(0,x.MZ)({readOnly:!0})],E.prototype,"effectiveDisplayUnits",null),(0,o.Cg)([(0,x.MZ)()],E.prototype,"progress",null),(0,o.Cg)([(0,x.MZ)()],E.prototype,"updating",null),(0,o.Cg)([(0,x.MZ)()],E.prototype,"results",null),(0,o.Cg)([(0,x.MZ)()],E.prototype,"statistics",null),(0,o.Cg)([(0,x.MZ)()],E.prototype,"hoveredPoints",null),(0,o.Cg)([(0,x.MZ)()],E.prototype,"_updateTask",void 0),(0,o.Cg)([(0,x.MZ)()],E.prototype,"_queue",void 0),(0,o.Cg)([(0,x.MZ)()],E.prototype,"_tileCache",null),(0,o.Cg)([(0,x.MZ)()],E.prototype,"_computationsCollection",void 0),(0,o.Cg)([(0,x.MZ)()],E.prototype,"_computations",null),(0,o.Cg)([(0,x.MZ)()],E.prototype,"_activeComputations",null),(0,o.Cg)([(0,x.MZ)({readOnly:!0})],E.prototype,"_minDemResolution",null),(0,o.Cg)([(0,x.MZ)()],E.prototype,"_minDemResolutions",null),(0,o.Cg)([(0,x.MZ)()],E.prototype,"_updateParameters",null),(0,o.Cg)([(0,x.MZ)()],E.prototype,"_generationParameters",null),(0,o.Cg)([(0,x.MZ)()],E.prototype,"elevationInfo",null),(0,o.Cg)([(0,x.MZ)()],E.prototype,"_options",null),E=(0,o.Cg)([(0,w.$)("esri.views.analysis.ElevationProfile.ElevationProfileController")],E);const k=new b.A((0,r.A)({},M.qt))},45564:(e,t,n)=>{n.d(t,{WG:()=>o,zj:()=>i});n(54901);let r={noDataValue:-5e5,defaultQueryOptions:()=>({noDataValue:r.noDataValue,demResolution:"auto",maximumAutoTileRequests:150,ignoreInvisibleLayers:!0,signal:null}),updateThrottleMillis:100,delayAfterPreviewMillis:500,defaultDemResolution:(0,n(31633).oU)(10,"centimeters","meters"),densificationMaxSamples:3e3,largeChartSamples:1e4,maxTotalSamples:1e5,maxChartRatio:300,minSlopeSampleDistance:10,formatPrecision:1,profileLinesUpdateThrottleMillis:100,hoveredPointsStyle:{size:14,borderStyle:"solid",borderWidth:3,borderColor:"#ffffff",boxShadow:"0px 0px 0px 5px rgba(255,255,255,0.2)"}};function i(){return r}const o={progress:1,hasZ:!1,samples:[],statistics:null,spatialReference:null}},47453:(e,t,n)=>{n.d(t,{Bk:()=>a,ON:()=>o,Zz:()=>i,oU:()=>s});var r=n(27631);class i extends r.A{constructor(){super("too-complex","The input geometry has too many points.")}}class o extends r.A{constructor(){super("invalid-geometry","The input geometry is invalid.")}}class s extends r.A{constructor(){super("elevation-query-error","Error querying elevation from provider.")}}class a extends r.A{constructor(){super("unknown","Unknown error.")}}},48384:(e,t,n)=>{n.d(t,{zV:()=>V,zd:()=>U,eq:()=>A,N6:()=>k,LZ:()=>E,_T:()=>G,GF:()=>T});var r,i=n(18690),o=n(53084),s=n(31633),a=n(20664),l=n(9392),u=n(6326),c=n(46053),p=(n(81806),n(76460),n(47249),n(87990)),h=n(34111),d=n(19247),v=n(65215),f=n(13312),y=n(7137),m=n(45417),g=n(85996);let x=r=class extends v.A{constructor(e){super(e),this.center=null,this.geodesic=!1,this.numberOfPoints=60,this.radius=1e3,this.radiusUnit="meters"}initialize(){var e;const t=this.center,n=this.numberOfPoints;if(this.hasZ=null!==(e=null===t||void 0===t?void 0:t.hasZ)&&void 0!==e&&e,0!==this.rings.length||!t)return;const r=(0,s.oU)(this.radius,this.radiusUnit,"meters"),i=t.spatialReference;let o,a="geographic";if(i.isWebMercator?a="webMercator":(null!=(i.wkid&&g.A[i.wkid])||(i.wkt2||i.wkt)&&(0,s.x1)(i.wkt2||i.wkt))&&(a="projected"),this.geodesic){let e;switch(a){case"webMercator":e=(0,m.ci)(t);break;case"projected":console.error("Creating a geodesic circle requires the center to be specified in web mercator or geographic coordinate system");break;case"geographic":e=t}o=this._createGeodesicCircle(e,r,n),"webMercator"===a&&(o=(0,m.Gh)(o))}else{let e;"webMercator"===a||"projected"===a?e=r/(0,s.Ao)(t.spatialReference):"geographic"===a&&(e=(0,s.vl)(r,"meters",(0,h.tO)(t.spatialReference).radius)),o=this._createPlanarCircle(t,e,n)}this.spatialReference=o.spatialReference,this.addRing(o.rings[0])}clone(){const{center:e,numberOfPoints:t,radius:n,radiusUnit:i,geodesic:o}=this;return new r({center:null===e||void 0===e?void 0:e.clone(),numberOfPoints:t,radius:n,radiusUnit:i,geodesic:o})}_createGeodesicCircle(e,t,n){const r=[],i=[e.x,e.y];for(let s=0;s<360;s+=360/n){var o;const n=this.hasZ?[0,0,null!==(o=e.z)&&void 0!==o?o:0]:[0,0];(0,y.vN)(n,i,s,t,f.A.WGS84),r.push(n)}return r.push(r[0]),new v.A({rings:[r]})}_createPlanarCircle(e,t,n){const r=[],i=2*Math.PI/n;for(let s=0;s<n;++s){var o;const n=i*s,a=[e.x+Math.cos(-n)*t,e.y+Math.sin(-n)*t];this.hasZ&&a.push(null!==(o=e.z)&&void 0!==o?o:0),r.push(a)}return r.push(r[0]),new v.A({spatialReference:e.spatialReference,rings:[r]})}};(0,u.Cg)([(0,c.MZ)({type:d.A})],x.prototype,"center",void 0),(0,u.Cg)([(0,c.MZ)()],x.prototype,"geodesic",void 0),(0,u.Cg)([(0,c.MZ)()],x.prototype,"numberOfPoints",void 0),(0,u.Cg)([(0,c.MZ)()],x.prototype,"radius",void 0),(0,u.Cg)([(0,c.MZ)()],x.prototype,"radiusUnit",void 0),x=r=(0,u.Cg)([(0,p.$)("esri.geometry.Circle")],x);const w=x;var _=n(66388),M=n(23701),C=n(1736),b=n(78496),S=n(5262),R=n(80963),Z=n(42151);function P(e,t){const n=new d.A({x:e[0],y:e[1],spatialReference:t});return e.length>2&&(n.z=e[2]),n}function A(e,t){return new _.A({points:e,spatialReference:t})}function E(e,t,n){const r=new M.A({paths:e,spatialReference:t});return n&&(0,S._7)(r),r}function k(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const s=(0,o.o8)(e);s.forEach(e=>{const t=e[0],n=e[e.length-1];(0,i.aI)(t,n)&&1!==e.length||e.push(e[0])});let a=new v.A({rings:s,spatialReference:t});return a.rings.forEach(e=>{(0,S.$3)(e)||e.reverse()}),n&&(0,S._7)(a),r&&!(0,b.i)(a)&&(0,R.fn)(t)&&(a=(0,b.e)(a)||a),a}function T(e,t,n){const r=t.mapToLocalMultiple(e),o=[],s={x:r[0].x,y:r[0].y},a=r[1].x,l=r[1].y,u=Math.round(a-s.x),c=Math.round(l-s.y),p=Math.max(Math.abs(u),Math.abs(c));if(n){const e={x:s.x+p,y:s.y+p},t={x:s.x-p,y:s.y-p};o.push((0,Z.E5)(e.x,t.y),(0,Z.E5)(t.x,t.y),(0,Z.E5)(t.x,e.y),(0,Z.E5)(e.x,e.y))}else{const e={x:u>0?s.x+p:s.x-p,y:c>0?s.y+p:s.y-p};o.push((0,Z.E5)(s.x,s.y),(0,Z.E5)(e.x,s.y),(0,Z.E5)(e.x,e.y),(0,Z.E5)(s.x,e.y))}return z(k([o.map(e=>t.localToMap(e)).filter(i.Ru)],t.spatialReference,t.doUnnormalization,!0),o,t)}function G(e,t,n){let r=t.mapToLocalMultiple(e);if(1===r.length){const e=48,t=r[0];r=[(0,Z.E5)(t.x-e,t.y+e),(0,Z.E5)(t.x+e,t.y-e),(0,Z.E5)(t.x+e,t.y-e),(0,Z.E5)(t.x-e,t.y+e)]}const o=[],s={x:r[0].x,y:r[0].y},a={x:r[1].x,y:r[1].y};if(n){const e=Math.round(a.x-s.x),t=Math.round(a.y-s.y);o.push((0,Z.E5)(s.x-e,s.y-t),(0,Z.E5)(a.x,s.y-t),(0,Z.E5)(a.x,a.y),(0,Z.E5)(s.x-e,a.y))}else o.push((0,Z.E5)(s.x,s.y),(0,Z.E5)(a.x,s.y),(0,Z.E5)(a.x,a.y),(0,Z.E5)(s.x,a.y));return z(k([o.map(e=>t.localToMap(e)).filter(i.Ru)],t.spatialReference,t.doUnnormalization,!0),o,t)}function z(e,t,n){const r=D(t[3],t[2],n),i=D(t[1],t[2],n),o=D(t[0],t[1],n),s=D(t[0],t[3],n);return{geometry:e,midpoints:null!=r&&null!=i&&null!=o&&null!=s?{top:r,right:i,bottom:o,left:s}:null}}function D(e,t,n){O[0]=e.x,O[1]=e.y,O[2]=0,L[0]=t.x,L[1]=t.y,L[2]=0,(0,a.l)(O,O,L,.5),I.x=O[0],I.y=L[1],I.z=L[2];const r=n.localToMap(I);return null!=r?P(r,n.spatialReference):null}const I=(0,Z.E5)(0,0,0),O=(0,l.vt)(),L=(0,l.vt)();function V(e,t,n,r){const i=t.mapToLocalMultiple(e);let o=null,a=null;if(n)o=i[0],a=i[1];else{const e=i[0],t=i[1],n=Math.round(t.x-e.x),r=Math.round(t.y-e.y),s=Math.max(Math.abs(n),Math.abs(r));o=(0,Z.E5)(n>0?e.x+s/2:e.x-s/2,r>0?e.y+s/2:e.y-s/2),a=(0,Z.E5)(Math.abs(n)>Math.abs(r)?o.x-s/2:o.x,Math.abs(n)>Math.abs(r)?o.y:o.y-s/2)}const l=t.localToMap(o),u=t.localToMap(a);if(null==l||null==u)return null;t.doUnnormalization&&(0,S.JM)([[l,u]],t.spatialReference);const c=P(l,t.spatialReference),p=P(u,t.spatialReference),h=(0,s.GA)(t.spatialReference);let d=0;if((0,R.fn)(t.spatialReference))d=h*(0,C.e)(c,p);else{const e=o.x-a.x,t=o.y-a.y;d=h*Math.sqrt(e*e+t*t)*(r||1)}const v=new w({center:c,radius:d,radiusUnit:"meters",spatialReference:t.spatialReference});return{geometry:k(v.rings,v.spatialReference,!1),center:c,edge:p}}function U(e,t,n){const r=t.mapToLocalMultiple(e),o=r[0],s=r[1],a=Math.round(s.x-o.x),l=Math.round(s.y-o.y),u=(0,Z.E5)(n?o.x:o.x+a/2,n?o.y:o.y+l/2),c=n?a:a/2,p=n?l:l/2,h=[],d=2*Math.PI/60;function v(e){const t=Math.cos(e),n=Math.sin(e);return(0,Z.E5)(c*t+u.x,p*n+u.y)}for(let i=0;i<60;i++)h.push(v(i*d));h.push(h[0]);const{spatialReference:f,doUnnormalization:y}=t,m=k([h.map(e=>t.localToMap(e)).filter(i.Ru)],f,y,!1),g=t.localToMap(v(Math.PI/2)),x=t.localToMap(v(0)),w=t.localToMap(v(-Math.PI/2)),_=t.localToMap(v(Math.PI));return{geometry:m,midpoints:null!=g&&null!=x&&null!=w&&null!=_?{top:P(g,f),right:P(x,f),bottom:P(w,f),left:P(_,f)}:null}}},49636:(e,t,n)=>{n.d(t,{s:()=>u});var r=n(6326),i=n(68134),o=n(46053),s=(n(81806),n(76460),n(47249),n(87990)),a=n(40615),l=n(61607);let u=class extends a.Q{constructor(){super(...arguments),this.type="query",this.numSamplesForPreview=50,this.numSamplesPerChunk=500}get minDemResolution(){return(0,l.e)(this.profile.source)}get available(){const{source:e}=this.profile;return!!e&&(null==e.visible||e.visible)&&(null==e.layers||e.layers.some(e=>e.visible))}initialize(){this.addHandles((0,i.wB)(()=>this.profile.source,()=>this.onInvalidate(this),i.OH))}queryElevation(e,t){if(!this.profile.source)throw new Error("No source configured for the elevation profile line");return this.profile.source.queryElevation(e,t)}};(0,r.Cg)([(0,o.MZ)({readOnly:!0})],u.prototype,"minDemResolution",null),(0,r.Cg)([(0,o.MZ)()],u.prototype,"available",null),u=(0,r.Cg)([(0,s.$)("esri.views.analysis.ElevationProfile.ElevationProfileLineQueryComputation")],u)},49853:(e,t,n)=>{n.d(t,{a:()=>u});var r=n(6326),i=n(54099),o=n(54901),s=n(91291),a=n(46053),l=(n(81806),n(76460),n(47249),n(87990));let u=class extends((0,s.g)(i.nJ)){constructor(){super(...arguments),this.parent=null,this._userInteractive=!1,this._interactiveViewModelCount=0}get interactive(){return this._interactiveViewModelCount>0||this._userInteractive}set interactive(e){this._userInteractive=e}get updating(){return!1}get visible(){var e,t;return null===(e=(null===(t=this.parent)||void 0===t?void 0:t.visible)&&!this.parent.suspended)||void 0===e||e}set visible(e){this._overrideIfSome("visible",e)}forceInteractive(){return this._interactiveViewModelCount++,(0,o.hA)(()=>this._interactiveViewModelCount--)}};(0,r.Cg)([(0,a.MZ)({constructOnly:!0})],u.prototype,"parent",void 0),(0,r.Cg)([(0,a.MZ)({constructOnly:!0})],u.prototype,"view",void 0),(0,r.Cg)([(0,a.MZ)({type:Boolean})],u.prototype,"interactive",null),(0,r.Cg)([(0,a.MZ)()],u.prototype,"_userInteractive",void 0),(0,r.Cg)([(0,a.MZ)({readOnly:!0})],u.prototype,"updating",null),(0,r.Cg)([(0,a.MZ)()],u.prototype,"visible",null),(0,r.Cg)([(0,a.MZ)()],u.prototype,"_interactiveViewModelCount",void 0),u=(0,r.Cg)([(0,l.$)("esri.views.analysis.AnalysisView")],u)},50360:(e,t,n)=>{n.d(t,{Pg:()=>l,fz:()=>u,g7:()=>s,zo:()=>a});var r=n(68707),i=(n(97799),n(63331),n(56175));n(91523);const o=new i.D;function s(e,t,n){return o.execute(e,t,n,null)}function a(e,t,n){const i=o.executeMany(new r.S(e),t,n,null);return Array.from(i)}function l(e,t,n){return o.isSimpleAsFeature(e,t,n,null,null)}function u(){return o.supportsCurves()}},55964:(e,t,n)=>{n.d(t,{Ai:()=>v,Rg:()=>_,VJ:()=>k,_W:()=>C,lM:()=>w,yK:()=>x});var r=n(15941),i=n(50346),o=n(31633),s=n(19555),a=n(20664),l=n(23701),u=n(56611),c=n(13312),p=n(7137),h=n(12482),d=n(47453);async function v(e,t,r,s,a,l,h){let v,m,g;const x=e.spatialReference,w=x.isGeographic||x.isWebMercator;let _=0;if(!w){const{execute:t}=await n.e(89227).then(n.bind(n,89227));(0,i.Te)(h),_=t(e,{unit:"meters"}),(0,i.Te)(h)}const M=1/(0,o.GA)(s);if(w){await(0,u.initializeProjection)([{source:x,dest:s},{source:x,dest:c.A.WGS84}],h);const n=function(e){return(0,p.TT)(e.spatialReference)?e:(0,u.project)(e,c.A.WGS84)}(e);v=(0,p.l1)([n],"meters")[0];const i=f(v,a);if(T(e,v,i)>l)throw new d.Zz;const o=y(n,t,r);({densifiedPath:m,distances:g}=function(e,t,n){const{hasZ:r}=e;return b(e,t,n,S,r?P:Z)}(o,i,M)),m=(0,u.project)(m,s)}else{await(0,u.initializeProjection)([{source:x,dest:s}],h),v=_;const n=f(v,a);if(T(e,v,n)>l)throw new d.Zz;const o=y(e,t,r);({densifiedPath:m,distances:g}=function(e,t,n){const{hasZ:r}=e;return b(e,t,n,R,r?E:A)}(o,n,M)),(0,i.Te)(h),m=(0,u.project)(m,s)}return{densifiedPath:m,pathLength:v*M,distances:g}}function f(e,t){const n=e/t.densificationMaxSamples;return Math.max(t.samplingDistance,n)}function y(e,t,n){if(null==t)return m(e);const r=e.spatialReference,i=t.mode,o=(0,h.Ze)(t,r);let s=null;switch(n.type){case"2d":s=function(e,t,n){let{hasZ:r}=e;return"absolute-height"===t?r?e=>{let[t,r,i]=e;return[t,r,i+n]}:e=>{let[t,r]=e;return[t,r,n]}:null}(e,i,o);break;case"3d":s=function(e,t,n,r){let{spatialReference:i,hasZ:o}=e,{elevationProvider:s}=r;const a=(e,t,n,r)=>{var o;return null!==(o=null===s||void 0===s?void 0:s.getElevation(e,t,n,i,r))&&void 0!==o?o:0};switch(t){case"on-the-ground":return e=>{let[t,n]=e;return[t,n,a(t,n,0,"ground")]};case"absolute-height":return o?e=>{let[t,r,i]=e;return[t,r,i+n]}:e=>{let[t,r]=e;return[t,r,n]};case"relative-to-ground":return o?e=>{let[t,r,i]=e;return[t,r,i+a(t,r,i,"ground")+n]}:e=>{let[t,r]=e;return[t,r,a(t,r,0,"ground")+n]};case"relative-to-scene":return o?e=>{let[t,r,i]=e;return[t,r,i+a(t,r,i,"scene")+n]}:e=>{let[t,r]=e;return[t,r,a(t,r,0,"scene")+n]};default:return null}}(e,i,o,n)}return null==s?m(e):new l.A({hasZ:!0,hasM:!1,spatialReference:r,paths:g(e.paths,s)})}function m(e){return e.hasZ?new l.A({hasZ:!1,hasM:!1,spatialReference:e.spatialReference,paths:g(e.paths,e=>{let[t,n]=e;return[t,n]})}):e}function g(e,t){const n=e.length,r=new Array(n);for(let i=0;i<n;++i){const n=e[i],o=n.length,s=new Array(n.length);r[i]=s;for(let e=0;e<o;++e)s[e]=t(n[e])}return r}function x(e){return _(e)&&e.paths.some(e=>e.length>1)}function w(e){return function(e){return M(e)&&_(null===e||void 0===e?void 0:e.geometry)}(e)&&x(e.geometry)}function _(e){return!M(e)&&null!=e&&"polyline"===e.type}function M(e){return null!=e&&"geometry"in e}function C(e){const t=null===e||void 0===e?void 0:e.layer;return null!=t&&"graphics"===t.type&&t.internal}function b(e,t,n,i,s){const{spatialReference:a,hasZ:u}=e,c={from:null,to:null,distance:0,azimuth:0,reverseAzimuth:0,spatialReference:a,metersPerSR:(0,o.GA)(a)},p=[],h=[];let d=0;for(let o=0;o<e.paths.length;++o){const a=e.paths[o],l=new Array,u=new Array;let v=0;for(let e=1;e<a.length;++e){const o=a[e-1],p=a[e],h=i(c,o,p);let f;for(f=v;f<h.distance&&!(0,r.Io)(f,h.distance);f+=t)l.push(s(h,f)),u.push((d+f)*n);v=f-h.distance,d+=h.distance,l.push(p),u.push(d*n)}p[o]=l,h[o]=u}return{densifiedPath:new l.A({spatialReference:a,hasZ:u,paths:p}),distances:h}}function S(e,t,n){return e.distance=0,(0,p._3)(e,t,n,e.spatialReference),e.from=t,e.to=n,e}function R(e,t,n){return e.from=t,e.to=n,e.distance=(0,s.Io)(n,t)*e.metersPerSR,e}function Z(e,t){let{from:n,azimuth:r,spatialReference:i}=e;return(0,p.vN)([0,0],n,r,t,i)}function P(e,t){let{from:n,to:i,azimuth:o,distance:s,spatialReference:a}=e;const l=t/s,u=[0,0,(0,r.Cc)(n[2],i[2],l)];return(0,p.vN)(u,n,o,t,a),u}function A(e,t){let{from:n,to:r,distance:i}=e;return(0,s.Cc)([0,0],n,r,t/i)}function E(e,t){let{from:n,to:r,distance:i}=e;return(0,a.l)([0,0,0],n,r,t/i)}function k(e){return e.paths.reduce((e,t)=>e+t.length,0)}function T(e,t,n){return k(e)+Math.floor(t/n)+Math.max(0,e.paths.reduce(e=>1+e,0)-1)}},55980:(e,t,n)=>{n.d(t,{T:()=>i});var r=n(48384);function i(e,t){null!==e&&void 0!==e||(e=[]);const n=e.length-1,i=[];let o=[];for(let r=0;r<=n;r++){const{x:t,y:s,z:a}=e[r];null!=a&&o.push([t,s,a]),r!==n&&null!=a||!o.length||(i.push(o),o=[])}return(0,r.LZ)(i,t,!0)}},56218:(e,t,n)=>{n.d(t,{A:()=>i});var r=n(27106);function i(e){return new r.A(e,0)}},57919:(e,t,n)=>{n.d(t,{qX:()=>E,LD:()=>b,uK:()=>w,xi:()=>k});var r=n(89379),i=n(56218),o=n(10600),s=n(18690),a=n(15941),l=n(50346),u=n(66388),c=n(5262),p=n(80963),h=n(45564),d=n(47453),v=n(55964),f=n(80397);function y(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(e>=t)return n;if(n.push(e),t-e<2)return n;const r=t-1;n.push(r);const i=m(e+1,r);for(;;){const e=i.next();if(e.done)break;n.push(e.value)}return n}function*m(e,t){if(e>=t)return;const n=e+Math.floor((t-e)/2);yield n;const r=m(e,n),i=m(n+1,t);for(;;){const e=r.next(),t=i.next();if(e.done&&t.done)break;e.done||(yield e.value),t.done||(yield t.value)}}var g=n(27243),x=n(59752);function w(e,t){return _.apply(this,arguments)}function _(){return _=(0,o.A)(function*(e,t){var n;const{view:o,geometry:s,elevationInfo:a,providers:u,options:c}=e,p=o.spatialReference;if(!p||null==s||!(0,v.yK)(s))throw new d.ON;const f=u.length;if(0===f)return null;const y=Math.round(c.maxTotalSamples/f);if((0,v.VJ)(s)>y)throw new d.Zz;const m=yield(0,i.A)((0,v.Ai)(s,a,o,p,c,y,t));(0,l.Te)(t);let g=0;const x=new Array(f),w=new Array(f);for(let i=0;i<f;i++){const n=R(m);x[i]=n,g+=n.samples.length;const o=(0,r.A)((0,r.A)({},e),{},{provider:u[i],result:n,densificationResult:m});w[i]=M(o,t)[Symbol.iterator]()}if(g>c.maxTotalSamples)throw new d.Zz;const _=yield(0,i.A)(Promise.all(w.map(e=>{const t=e.next();return!0===t.done?Promise.resolve(null):t.value})));(0,l.Te)(t);for(let r=0;r<f;r++)x[r]=_[r];yield x,yield(0,i.A)((0,l.Pl)(null!==(n=e.delayAfterPreview)&&void 0!==n?n:(0,h.zj)().delayAfterPreviewMillis,null,t.signal)),(0,l.Te)(t);const C=[];try{let e;do{e=!1;for(let t=0;t<f;t++){const n=w[t].next();!1===n.done&&(C.push({resultPromise:n.value,index:t}),e=!0)}}while(e)}finally{w.forEach(e=>{var t;return null===(t=e.return)||void 0===t?void 0:t.call(e)})}for(const{resultPromise:r,index:h}of C)x[h]=yield(0,i.A)(r),(0,l.Te)(t),yield x;for(const r of x)null!=r&&(r.progress=1);yield x}),_.apply(this,arguments)}function*M(e,t){const{densificationResult:n}=e,i=(0,r.A)((0,r.A)({},e),{},{abortOptions:t,densificationResult:n}),o=y(0,i.result.samples.length),a=o.slice(0,i.provider.numSamplesForPreview);yield C(i,a,!0);const l=(0,s.Ho)(o,i.provider.numSamplesPerChunk);for(const r of l)yield C(i,r,!1)}async function C(e,t,n){let{densificationResult:i,result:o,provider:s,queue:a,abortOptions:c,cache:p}=e;const{densifiedPath:d,pathLength:v}=i,f=o.spatialReference,{samples:y}=o,m=[];for(let r=0;r<t.length;r++){const e=y[t[r]];m[r]=[...e.coordinate]}try{return await a.push({geometry:new u.A({spatialReference:f,points:m,hasZ:d.hasZ}),provider:s,indices:t,preview:n,result:o,parameters:(0,r.A)((0,r.A)({},(0,h.zj)().defaultQueryOptions()),{},{minDemResolution:n?Math.round(v/s.numSamplesForPreview):Math.round(v/y.length),cache:p})},c),(0,r.A)({},o)}catch(g){return(0,l.zf)(g)?null:h.WG}}function b(e){return new g.F({priority:x.W6.ELEVATION_PROFILE,concurrency:1,scheduler:e,process:async e=>{(0,l.Te)(e.parameters);try{await async function(e){let{geometry:t,provider:n,indices:r,preview:i,result:o,parameters:s}=e;if(0===r.length)return;const a=(await async function(e,t,n){try{return await e.queryElevation(t,n)}catch(i){throw new d.oU}}(n,t,s)).geometry,{hasZ:l,points:u}=a,c=s.noDataValue,{samples:p}=o;for(let h=0;h<r.length;h++){const e=p[r[h]];if(e.isHole)continue;const t=l?u[h][2]:null;null===t||t===c?e.sampledZ=null:(o.hasZ=!0,e.sampledZ=t),e.sampled=!0}(function(e){const t=e.length-1;let n=0;for(let r=1;r<=t;r++)(e[r].sampled||r===t)&&(S(e,n,r),n=r)})(p),o.progress=i?0:o.progress+r.length/p.length,o.statistics=(0,f.mW)(o.samples,o.spatialReference)}(e)}catch(t){(0,l.jH)(t)}}})}function S(e,t,n){if(n-t===1)return;const r=e[t],i=r.sampledZ,o=e[n],s=o.sampledZ;if(null==i||null==s){for(let r=t+1;r<n;r++)e[r].sampledZ=null;return}const l=r.distance,u=o.distance-l;for(let c=t+1;c<n;c++){const t=e[c],n=(t.distance-l)/u;t.sampledZ=(0,a.Cc)(i,s,n)}}function R(e){let{densifiedPath:t,distances:n}=e;const r=t.spatialReference,i=(0,p.Vp)(r),o=t.paths,s=o.length,a=[];let l=null,u=0;for(let p=0;p<s;p++){const e=o[p],t=e.length,r=n[p];for(let n=0;n<t;n++){const t=e[n],o=r[n];i&&(t[0]=(0,c.N6)(t[0],i.valid[0],i.valid[1])),l&&0===n&&Z(a,l,t,u,o),a.push(P(t,o)),l=t,u=o}}return{progress:0,samples:a,hasZ:!1,statistics:null,spatialReference:r}}function Z(e,t,n,r,i){e.push(A(t,r)),e.push(A(n,i))}function P(e,t){return{coordinate:e,distance:t,sampledZ:null,sampled:!1,isHole:!1}}function A(e,t){return{coordinate:e,distance:t,sampledZ:null,sampled:!0,isHole:!0}}function E(e,t,n){if(!e||0===e.length)return;const r=e.length-1,i=e[0];if(t<=n(i))return i;const o=e[r];if(t>=n(o))return o;let s=0,a=0,l=r;for(;s<l;){a=s+Math.floor((l-s)/2);const i=e[a],o=n(i);if(o===t)return i;if(t<o){if(a>0){const r=e[a-1],s=n(r);if(t>s)return t-s>=o-t?i:r}l=a}else{if(a<r){const r=e[a+1],s=n(r);if(t<s)return t-o>=s-t?r:i}s=a+1}}return e[a]}function k(e){return e>.999999?1:e}},61607:(e,t,n)=>{n.d(t,{W:()=>a,e:()=>s});var r=n(18690),i=n(31633),o=n(97153);function s(e){var t;if(null==e)return null;if((0,o.Q)(e))return a(e);const n=e.tileInfo;if(null==n)return null;const r=null===(t=n.lods)||void 0===t?void 0:t.at(-1);return null==r?null:r.resolution*(0,i.GA)(n.spatialReference)}function a(e){var t;if(null==e)return null;const n=e.layers.items.map(l).filter(r.Ru);return null!==(t=(0,r.jk)(n))&&void 0!==t?t:null}function l(e){return e&&"tileInfo"in e?s(e):null}},62068:(e,t,n)=>{n.d(t,{o:()=>d});var r=n(6326),i=n(80674),o=n(53084),s=n(30726),a=n(68134),l=n(46053),u=(n(81806),n(76460),n(87990)),c=n(62078),p=n(80635),h=n(40615);let d=class extends h.Q{constructor(){super(...arguments),this.type="input",this.numSamplesForPreview=50,this.numSamplesPerChunk=500,this._getStableElevationDependencies=(0,i.f)(()=>{const{view:e}=this.controller;if(!e)return null;const t=this._getStableElevationInfo();return{view:e,stationary:!this._requiresElevationAlignment||e.stationary,elevationInfo:t,visibleLayerIds:this._getStableLayerIds(),spatialReference:this._getStableSpatialReference()}},o.gh),this._getStableElevationInfo=(0,i.f)(()=>this.controller.elevationInfo,s.CM),this._getStableSpatialReference=(0,i.f)(()=>{var e;return null===(e=this.controller.view)||void 0===e?void 0:e.spatialReference},s.CM),this._getStableLayerIds=(0,i.f)(()=>{const{view:e}=this.controller;return"3d"!==e.type?[]:(0,p.Y)(e)},o.gh)}initialize(){const e=()=>this.onInvalidate(this);this.addHandles([(0,a.wB)(()=>this._queryElevationDependencies,e,a.OH),this.controller.onElevationChange(e)])}async queryElevation(e,t){let{noDataValue:n,signal:r}=t;const i=this._queryElevationDependencies;if(null==i)throw new Error("".concat(this.declaredClass,": no dependencies"));const{view:o,spatialReference:s}=i;if(this._requiresElevationAlignment&&"3d"===o.type&&s){const t=await c.q.fromGeometry(e).project(s,r);if(!t)return{geometry:e,noDataValue:n};const i=o.elevationProvider;return t.coordinates.forEach(e=>{var t;e.z=null!==(t=i.getElevation(e.x,e.y,0,s,"ground"))&&void 0!==t?t:0}),{geometry:t.export(),noDataValue:n}}return{geometry:e,noDataValue:n}}get _requiresElevationAlignment(){var e;return"on-the-ground"===(null===(e=this.controller.elevationInfo)||void 0===e?void 0:e.mode)&&"3d"===this.controller.view.type}get _queryElevationDependencies(){return this._getStableElevationDependencies()}};(0,r.Cg)([(0,l.MZ)()],d.prototype,"_queryElevationDependencies",null),d=(0,r.Cg)([(0,u.$)("esri.views.analysis.ElevationProfile.ElevationProfileLineInputComputation")],d)},71143:(e,t,n)=>{n.d(t,{R:()=>R});var r=n(89379),i=n(6326),o=n(39356),s=n(91967),a=n(98773),l=n(19276),u=(n(81806),n(54901)),c=n(30726),p=n(50346),h=n(68134),d=n(46053),v=(n(76460),n(47249),n(87990)),f=n(19451),y=n(63733),m=n(12482),g=n(89465),x=n(7246),w=n(731),_=n(2144),M=n(55964),C=n(57308),b=n(81335),S=n(18279);let R=class extends s.A{constructor(e){super(e),this._sketchViewModels=new l.A,this._updatingHandles=new f.U,this._operationManager=new _.b}initialize(){const{view:e}=this;this._graphicsLayer=new y.A({listMode:"hide",internal:!0}),this.addHandles([(0,h.wB)(()=>({map:e.map,internalGraphicsLayer:this._graphicsLayer,state:this.state,geometryVisualizationVisible:this._analysis.viewOptions.geometryVisualizationVisible,visible:this.analysisViewData.visible}),e=>{let{map:t,internalGraphicsLayer:n,state:r,geometryVisualizationVisible:i,visible:o}=e;!function(e,t){t&&(t.removeFromParent(),null===e||void 0===e||e.add(t))}(t,n);const s=this.sketchGraphic;switch(s&&(s.visible=o),r){case"idle":case"reshaping-disabled":s&&!i&&(s.visible=!1),this._operationManager.stop(),this._ensureUpdatedSketchGraphic();break;case"reshaping":(0,p.QZ)(this._startReshape());break;case"awaiting-sketch":this.analysisViewData.interactive=!0}},h.pc),(0,h.wB)(()=>this._analysis.elevationInfo,e=>{this._graphicsLayer.elevationInfo=e},h.pc)])}destroy(){var e;this._operationManager.destroy(),this._sketchViewModels.drain(e=>(0,c.pR)(e));const t=this._graphicsLayer;null!==(e=this.view.map)&&void 0!==e&&e.remove(t),t.destroy()}get sketchGraphic(){return this._get("sketchGraphic")}set sketchGraphic(e){e!==this._get("sketchGraphic")&&(this._set("sketchGraphic",e),this._updateAnalysisFromSketchGraphic())}get state(){const{visible:e,interactive:t}=this.analysisViewData;if(!e)return"idle";switch(this._operationManager.currentOperationType){case"place":return this._sketching?"sketching":"awaiting-sketch";case"pick-feature":return"picking";default:return this._analysis.geometry?t?"reshaping":"reshaping-disabled":"idle"}}get updating(){return this._sketchViewModels.some(e=>e.updating)||this._updatingHandles.updating}get _sketching(){return this._sketchViewModels.some(e=>e.createGraphic===this.sketchGraphic)}get _analysis(){return this.analysisViewData.analysis}get _lineSymbol(){return function(e){if("2d"===e){const e={type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",width:1.5};return new g.A({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[(0,r.A)((0,r.A)({},e),{},{effects:[{type:"CIMGeometricEffectDashes",dashTemplate:[5,4],lineDashEnding:"FullGap",controlPointEnding:"NoConstraint"}],color:[0,0,0,255]}),(0,r.A)((0,r.A)({},e),{},{color:[255,255,255,255]})]}}})}return new x.A({color:[0,0,0,0]})}(this.view.type)}place(e){return this._operationManager.start("place",async t=>{const n=this._createSketchViewModel(),r=this._analysis.clone();this._ensureUpdatedSketchGraphic();const i=this.sketchGraphic,o=this._analysis.elevationInfo,s=(0,u.hA)(()=>{this.sketchGraphic===i&&(this._graphicsLayer.elevationInfo=o)}),a=n.on("create",e=>{switch(e.state){case"start":this._graphicsLayer.removeAll(),this.sketchGraphic=e.graphic,this._analysis.elevationInfo=this._graphicsLayer.elevationInfo;break;case"active":this._updateAnalysisFromSketchGraphic();break;case"complete":this.sketchGraphic&&(this._updateAnalysisFromSketchGraphic(),this._addSketchGraphic(this.sketchGraphic)),t.stop();break;case"cancel":t.stop()}});t.handles.push(a,(0,u.hA)(()=>(a.remove(),n.destroy(),this._sketchViewModels.remove(n),this._updateAnalysisFromSketchGraphic(),this._analysis.valid?(0,p.G4)(e)||r.equals(this._analysis)?t.reject():void t.resolve({}):(this._clear(),t.reject()))),s),this._graphicsLayer.elevationInfo=Z,await this._updatingHandles.addPromise((0,p.QZ)(n.create("polyline")))},e)}async pickFeature(e){return this._operationManager.start("pick-feature",async e=>{const{view:t}=this;t.closePopup();let n=null;e.handles.push(t.on("immediate-click",i=>{i.defer(async()=>{var o;null!==(o=n)&&void 0!==o&&o.abort(),n=(0,a.UT)(async n=>{const{results:o}=await t.hitTest(i);(0,p.Te)(n);let s=null;for(const e of o)if("graphic"===e.type&&(0,M.lM)(e.graphic)&&!(0,M._W)(e.graphic)){s=e.graphic;break}s?(i.preventDefault(),i.stopPropagation(),this.sketchGraphic=null,this._analysis.geometry=s.geometry,this._analysis.elevationInfo=new w.A((0,r.A)({},(0,m.bh)(s))),e.resolve({feature:s}),e.stop()):e.reject()}),await n.promise})},C.oj.TOOL),t.on("key-down",t=>{(0,b.$X)(t)&&(e.reject(),e.stop())},C.oj.TOOL),t.acquireCursor("crosshair","high"),(0,u.hA)(()=>{var t;null!==(t=n)&&void 0!==t&&t.abort(),e.reject()})),t.focus()},e)}_startReshape(){const e=this._createSketchViewModel();return this._sketchViewModels.add(e),this._operationManager.start("reshape",async t=>{const n=()=>{const t=this._ensureUpdatedSketchGraphic();return t?this._updatingHandles.addPromise(e.update(t,{tool:"reshape"})):Promise.resolve()};if(!this._ensureUpdatedSketchGraphic())return;const r=e.on("update",e=>{this._updateAnalysisFromSketchGraphic(),"complete"===e.state&&("reshaping"===this.state?(0,p.QZ)(n()):t.resolve())});t.handles.push(r,(0,u.hA)(()=>{r.remove(),this._sketchViewModels.remove(e),e.destroy(),t.resolve()})),await n()})}_createSketchViewModel(){return new S.A({layer:this._graphicsLayer,view:this.view,defaultCreateOptions:{mode:"click",hasZ:!0},updateOnGraphicClick:!1,defaultUpdateOptions:{enableMoveAllGraphics:!1,enableRotation:!1,enableScaling:!1,enableZ:!1,highlightOptions:{enabled:!1},multipleSelectionEnabled:!1,reshapeOptions:{shapeOperation:"none"},toggleToolOnClick:!1,tool:"reshape"},polylineSymbol:this._lineSymbol,activeLineSymbol:this._lineSymbol})}_ensureUpdatedSketchGraphic(){var e;const{geometry:t}=this._analysis;if(!t)return this.sketchGraphic=null,this._graphicsLayer.removeAll(),null;const n=null!==(e=this.sketchGraphic)&&void 0!==e?e:this.sketchGraphic=new o.A({symbol:this._lineSymbol,geometry:t});return n.geometry=t,this._addSketchGraphic(n),n}_addSketchGraphic(e){const{graphics:t}=this._graphicsLayer;t.includes(e)||t.add(e),1!==t.length&&t.removeMany(t.filter(t=>t!==e))}_clear(){this.sketchGraphic=null,this._analysis.clear()}_updateAnalysisFromSketchGraphic(){var e;let t=null===(e=this.sketchGraphic)||void 0===e?void 0:e.geometry;(0,M.Rg)(t)||(t=null);const n=this._analysis;n.geometry!==t&&(n.geometry=t)}};(0,i.Cg)([(0,d.MZ)({constructOnly:!0})],R.prototype,"analysisViewData",void 0),(0,i.Cg)([(0,d.MZ)({constructOnly:!0})],R.prototype,"view",void 0),(0,i.Cg)([(0,d.MZ)()],R.prototype,"sketchGraphic",null),(0,i.Cg)([(0,d.MZ)({nonNullable:!0})],R.prototype,"state",null),(0,i.Cg)([(0,d.MZ)()],R.prototype,"updating",null),(0,i.Cg)([(0,d.MZ)()],R.prototype,"_sketching",null),(0,i.Cg)([(0,d.MZ)()],R.prototype,"_analysis",null),(0,i.Cg)([(0,d.MZ)()],R.prototype,"_lineSymbol",null),R=(0,i.Cg)([(0,v.$)("esri.views.analysis.ElevationProfile.ElevationProfileTool")],R);const Z=new w.A({mode:"on-the-ground",offset:0})},73520:(e,t,n)=>{n.d(t,{V:()=>o});var r=n(54901),i=n(68134);function o(e){return(0,r.vE)([(0,i.wB)(()=>{const{analysis:t,sketchGraphic:n,toolState:r,visible:i}=e.analysisViewData,{geometryVisualizationVisible:o}=t.viewOptions;return{geometryVisualizationVisible:o,geometry:t.geometry,sketchGraphic:n,toolState:r,visible:i}},t=>{let{geometryVisualizationVisible:n,sketchGraphic:r,toolState:i,visible:o}=t;if(e.remove(),o)return n&&null!=r&&"reshaping"!==i&&"sketching"!==i?e.show(r):void 0},i.pc)])}},78496:(e,t,n)=>{n.d(t,{a:()=>s,b:()=>l,e:()=>o,i:()=>a,s:()=>u});var r=n(50360),i=n(58067);function o(e){const t=(0,i.getSpatialReference)(e);return(0,i.toGeometry)((0,r.g7)((0,i.fromGeometry)(e),(0,i.fromSpatialReference)(t),!1),t)}function s(e){const t=e.map(i.fromGeometry),n=(0,i.getSpatialReference)(e);return(0,r.zo)(t,(0,i.fromSpatialReference)(n),!1).map(e=>(0,i.toGeometry)(e,n))}function a(e){return(0,r.Pg)((0,i.fromGeometry)(e),(0,i.fromSpatialReference)((0,i.getSpatialReference)(e)),!1)}const l=(0,r.fz)(),u=Object.freeze(Object.defineProperty({__proto__:null,execute:o,executeMany:s,isSimple:a,supportsCurves:l},Symbol.toStringTag,{value:"Module"}))},79468:(e,t,n)=>{n.d(t,{n:()=>i});var r=n(75540);function i(e,t,n,i){let o=null,s=1e3;"number"==typeof t?(s=t,i=n):(o=null!==t&&void 0!==t?t:null,s=n);const a=(0,r.v)(0);let l;const u=()=>{a.value=0,e.apply(i,l)},c=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];o&&o.apply(i,t),l=t,s?a.value||(a.value=setTimeout(u,s)):u()};return c.remove=()=>{a.value&&(clearTimeout(a.value),a.value=0)},c.forceUpdate=()=>{a.value&&(clearTimeout(a.value),u())},c.hasPendingUpdates=()=>!!a.value,c}},80397:(e,t,n)=>{n.d(t,{DM:()=>l,ch:()=>a,mW:()=>s});var r=n(18690),i=n(31633),o=n(45564);function s(e,t){const n=e.length;if(0===n)return null;const r=e[0],s=r.sampledZ;let a=s,l=s,p=0,d=0,v=null,f=null,y=null!=s?s:0,m=0,g=0,x=null!=s?1:0,w=0,_=0;const M=(0,i.GA)(t),C=(0,i.G9)(t),b=(0,o.zj)().minSlopeSampleDistance/M,S=2*b,R=new h,Z=new h,P=()=>{E(),R.copy(Z),Z.reset()},A=(e,t)=>{P(),e>0&&e-R.start<=S&&(e=R.start+b),Z.restart(e,t)},E=()=>{if(R.isHole||Z.isHole)return;const e=Z.avgElevation-R.avgElevation,t=Z.start-R.start,n=e*C,r=t*M,o=(0,i.oU)(Math.atan2(n,r),"radians","degrees");o>0?(m+=o,v=c(v,o),w++):o<0&&(g-=o,f=c(f,-o),_++)};null!=r.sampledZ&&A(r.distance,r.sampledZ);for(let i=1;i<n;++i){const t=e[i-1],n=e[i],r=n.sampledZ;if(null==r){Z.isHole||P();continue}x++,y+=r,a=u(a,r),l=c(l,r),Z.isHole||n.distance-Z.start>=b?A(n.distance,r):Z.insert(r);const o=t.sampledZ;if(null!=o){const e=r-o;e>0?p+=e:e<0&&(d-=e)}}return P(),0===x?null:{maxDistance:e[n-1].distance,minElevation:a,maxElevation:l,avgElevation:0===x?null:y/x,elevationGain:p,elevationLoss:d,maxPositiveSlope:v,maxNegativeSlope:f,avgPositiveSlope:0===w?null:m/w,avgNegativeSlope:0===_?null:g/_}}function a(e){const t=e.filter(r.Ru),n=t.length;if(0===n)return null;const i=t[0];if(1===n)return i;let o=i.maxDistance,s=i.minElevation,a=i.maxElevation,l=i.maxPositiveSlope,p=i.maxNegativeSlope;for(let r=1;r<t.length;++r){const e=t[r];o=c(o,e.maxDistance),s=u(s,e.minElevation),a=c(a,e.maxElevation),l=c(l,e.maxPositiveSlope),p=c(p,e.maxNegativeSlope)}return{maxDistance:o,minElevation:s,maxElevation:a,avgElevation:null,elevationGain:null,elevationLoss:null,maxPositiveSlope:l,maxNegativeSlope:p,avgPositiveSlope:null,avgNegativeSlope:null}}function l(e){let t=null,n=null,r=null;for(const o of e){if(null==o)continue;const{statistics:e,spatialReference:s}=o;if(null==e)continue;const a=(0,i.GA)(s);t=c(t,p(e.maxDistance,a));const l=(0,i.G9)(s);r=u(r,p(e.minElevation,l)),n=c(n,p(e.maxElevation,l))}return{minDistance:0,maxDistance:null!==t&&void 0!==t?t:0,minElevation:null!==r&&void 0!==r?r:0,maxElevation:null!==n&&void 0!==n?n:0}}function u(e,t){return null==t?e:null!=e?Math.min(e,t):t}function c(e,t){return null==t?e:null!=e?Math.max(e,t):t}function p(e,t){return null!=e&&null!=t?e*t:null}class h{constructor(){this._start=0,this._totalElevation=0,this._sampleCount=0}get avgElevation(){return this._totalElevation/this._sampleCount}get isHole(){return 0===this._sampleCount}get start(){return this._start}copy(e){this._start=e._start,this._sampleCount=e._sampleCount,this._totalElevation=e._totalElevation}reset(){this._start=0,this._sampleCount=0,this._totalElevation=0}restart(e,t){this._start=e,this._sampleCount=1,this._totalElevation=t}insert(e){++this._sampleCount,this._totalElevation+=e}}},80635:(e,t,n)=>{function r(e){var t,n;return null!==(t=null===e||void 0===e||null===(n=e.map)||void 0===n||null===(n=n.allLayers)||void 0===n?void 0:n.toArray().filter(e=>("graphics"!==e.type||!e.internal)&&e.visible).map(e=>e.uid))&&void 0!==t?t:[]}n.d(t,{Y:()=>r})},80674:(e,t,n)=>{function r(e,t){let n,r=!1;return function(){for(var i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];const a=e.apply(this,o);return r&&void 0!==n&&null!==t&&void 0!==t&&t(n,a)?n:(r=!0,n=a,a)}}n.d(t,{f:()=>r})},82185:(e,t,n)=>{n.d(t,{R:()=>h});var r=n(6326),i=n(80674),o=n(53084),s=n(68134),a=n(31633),l=n(46053),u=(n(81806),n(76460),n(87990)),c=n(40615),p=n(61607);let h=class extends c.Q{constructor(){super(...arguments),this.type="ground",this.numSamplesForPreview=50,this.numSamplesPerChunk=1e3,this._getStableQueryElevationDependencies=(0,i.f)(()=>({ground:this._ground,groundLayers:this._getStableGroundLayers()}),o.gh),this._getStableGroundLayers=(0,i.f)(()=>{var e;return null===(e=this._ground)||void 0===e||null===(e=e.layers)||void 0===e?void 0:e.toArray()},o.gh)}get minDemResolution(){return(0,p.W)(this._ground)}get available(){var e;return!0===(null===(e=this._ground)||void 0===e?void 0:e.layers.some(e=>e.visible))}initialize(){this.addHandles([(0,s.wB)(()=>this._queryElevationDependencies,()=>this.onInvalidate(this))])}async queryElevation(e,t){const n=this._queryElevationDependencies;if(null==n)throw new Error("".concat(this.declaredClass,": no dependencies"));const{ground:r}=n;if(null==r)throw new Error("No ground configured in the view");const i=await r.queryElevation(e,t),o=(0,a.G9)(e.spatialReference),s=(0,a.G9)(r.layers.at(0).spatialReference);if(o!==s){const e=i.geometry;e.points=e.points.map(e=>{let[n,r,i]=e;return[n,r,i===t.noDataValue?i:i*s/o]})}return i}get _queryElevationDependencies(){return this._getStableQueryElevationDependencies()}get _ground(){var e;return null===(e=this.controller.view)||void 0===e||null===(e=e.map)||void 0===e?void 0:e.ground}};(0,r.Cg)([(0,l.MZ)()],h.prototype,"minDemResolution",null),(0,r.Cg)([(0,l.MZ)()],h.prototype,"available",null),(0,r.Cg)([(0,l.MZ)()],h.prototype,"_queryElevationDependencies",null),(0,r.Cg)([(0,l.MZ)()],h.prototype,"_ground",null),h=(0,r.Cg)([(0,u.$)("esri.views.analysis.ElevationProfile.ElevationProfileLineGroundComputation")],h)},94656:(e,t,n)=>{n.d(t,{n:()=>d});var r=n(6326),i=n(91967),o=n(19276),s=n(68134),a=n(46053),l=(n(81806),n(76460),n(47249),n(87990)),u=n(69539),c=n(56611),p=n(45564);let h=class extends i.A{constructor(e){super(e),this.position=null,this.color=new u.A("#ffffff"),this.element=function(){const e=document.createElement("div"),{size:t,borderStyle:n,borderColor:r,borderWidth:i,boxShadow:o}=(0,p.zj)().hoveredPointsStyle,{style:s}=e;return s.display="block",s.position="absolute",s.top="0",s.left="0",s.contain="strict",s.boxSizing="border-box",s.width="".concat(t,"px"),s.height="".concat(t,"px"),s.marginTop="-".concat(t/2,"px"),s.marginLeft="-".concat(t/2,"px"),s.border="".concat(n," ").concat(i,"px ").concat(r),s.borderRadius="".concat(t,"px"),s.boxShadow=o,e}()}initialize(){var e;this.addHandles([(0,s.wB)(()=>this._screenLocation,e=>{e&&(this.element.style.transform="translate(".concat(e.x,"px, ").concat(e.y,"px)"))},s.pc),(0,s.wB)(()=>this.color.toCss(),e=>{this.element.style.background=e},s.pc)]),null===(e=this.view.surface)||void 0===e||e.appendChild(this.element)}destroy(){this.element.remove()}get _screenLocation(){const{position:e,view:t}=this;"3d"===t.type?(t.commitProperty("size"),t.commitProperty("camera")):t.commitProperty("center");const n=null===t||void 0===t?void 0:t.spatialReference,r=n?(0,c.projectOrLoad)(e,n).geometry:null;return r&&null!==t&&void 0!==t&&t.ready?t.toScreen(r):null}};(0,r.Cg)([(0,a.MZ)()],h.prototype,"position",void 0),(0,r.Cg)([(0,a.MZ)({type:u.A})],h.prototype,"color",void 0),(0,r.Cg)([(0,a.MZ)()],h.prototype,"view",void 0),(0,r.Cg)([(0,a.MZ)()],h.prototype,"_screenLocation",null),h=(0,r.Cg)([(0,l.$)("esri.views.analysis.ElevationProfile.ElevationProfileHoveredPointVisualization")],h);let d=class extends i.A{constructor(e){super(e),this._hoveredPoints=new o.A}initialize(){const{analysisViewData:e}=this,{analysis:t}=e;this.addHandles([(0,s.wB)(()=>{const{hoveredPoints:n,visible:r,updating:i}=e;return r?i?null:n.map((e,n)=>{const r=t.profiles.at(n);return!0===(null===r||void 0===r?void 0:r.viewOptions.hoveredPointVisible)&&null!=e?{hoveredPoint:e,color:r.color}:null}).filter(e=>!!e):[]},e=>this._update(e),s.pc),(0,s.wB)(()=>t.geometry,()=>this._update([]),s.pc)])}destroy(){this._hoveredPoints.drain(e=>e.destroy())}get updating(){return!1}_update(e){if(!e)return;const{view:t,_hoveredPoints:n}=this,r=e.length;for(;n.length>r;){var i;null===(i=n.pop())||void 0===i||i.destroy()}for(;n.length<r;){const e=new h({view:t});n.push(e)}for(let o=0;o<r;++o){const t=e[o],i=n.at(r-1-o);i.position=t.hoveredPoint,i.color=t.color}}};(0,r.Cg)([(0,a.MZ)()],d.prototype,"view",void 0),(0,r.Cg)([(0,a.MZ)()],d.prototype,"analysisViewData",void 0),(0,r.Cg)([(0,a.MZ)()],d.prototype,"_hoveredPoints",void 0),(0,r.Cg)([(0,a.MZ)()],d.prototype,"updating",null),d=(0,r.Cg)([(0,l.$)("esri.views.analysis.ElevationProfile.ElevationProfileHoveredPointsVisualization")],d)}}]);
//# sourceMappingURL=75472.10743601.chunk.js.map