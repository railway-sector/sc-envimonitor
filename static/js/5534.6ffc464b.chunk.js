"use strict";(self.webpackChunksc_envimonitor=self.webpackChunksc_envimonitor||[]).push([[5534],{5534:(e,t,r)=>{r.r(t),r.d(t,{default:()=>yt});var o=r(35143),i=r(86560),s=r(39356),n=r(16868),l=r(19276),a=r(50076),u=r(76460),p=r(77717),d=r(48611),c=r(50346),y=r(68134),v=r(31633),m=r(90534),f=r(46053),h=(r(81806),r(47249),r(28379)),w=r(85842),g=r(17707),_=r(37888),A=r(76797),b=r(66388),S=r(9956),M=r(13312),T=r(80963),B=r(25515),Z=r(65624),N=r(11270),P=r(94729),R=r(5682),I=r(13096),j=r(42553),O=r(76940),D=r(671);let C=class extends j.A{constructor(e){super(e),this.break=new O.A({color:[255,255,255],size:12,outline:{color:[0,122,194],width:3}}),this.first=new O.A({color:[0,255,0],size:20,outline:{color:[255,255,255],width:4}}),this.unlocated=new O.A({color:[255,0,0],size:12,outline:{color:[255,255,255],width:3}}),this.last=new O.A({color:[255,0,0],size:20,outline:{color:[255,255,255],width:4}}),this.middle=new O.A({color:[51,51,51],size:12,outline:{color:[0,122,194],width:3}}),this.waypoint=new O.A({color:[255,255,255],size:12,outline:{color:[0,122,194],width:3}})}};(0,o._)([(0,f.MZ)({types:D.wC})],C.prototype,"break",void 0),(0,o._)([(0,f.MZ)({types:D.wC})],C.prototype,"first",void 0),(0,o._)([(0,f.MZ)({types:D.wC})],C.prototype,"unlocated",void 0),(0,o._)([(0,f.MZ)({types:D.wC})],C.prototype,"last",void 0),(0,o._)([(0,f.MZ)({types:D.wC})],C.prototype,"middle",void 0),(0,o._)([(0,f.MZ)({types:D.wC})],C.prototype,"waypoint",void 0),C=(0,o._)([(0,w.$)("esri.layers.support.RouteStopSymbols")],C);var L=r(86875),k=r(7246);let J=class extends j.A{constructor(e){super(e),this.directionLines=new k.A({color:[0,122,194],width:6}),this.directionPoints=new O.A({color:[255,255,255],size:6,outline:{color:[0,122,194],width:2}}),this.pointBarriers=new O.A({style:"x",size:10,outline:{color:[255,0,0],width:3}}),this.polygonBarriers=new L.A({color:[255,170,0,.6],outline:{width:7.5,color:[255,0,0,.6]}}),this.polylineBarriers=new k.A({width:7.5,color:[255,85,0,.7]}),this.routeInfo=new k.A({width:8,color:[20,89,127]}),this.stops=new C}};(0,o._)([(0,f.MZ)({types:D.Y7})],J.prototype,"directionLines",void 0),(0,o._)([(0,f.MZ)({types:D.wC})],J.prototype,"directionPoints",void 0),(0,o._)([(0,f.MZ)({types:D.wC})],J.prototype,"pointBarriers",void 0),(0,o._)([(0,f.MZ)({types:D.Ac})],J.prototype,"polygonBarriers",void 0),(0,o._)([(0,f.MZ)({types:D.Y7})],J.prototype,"polylineBarriers",void 0),(0,o._)([(0,f.MZ)({types:D.Y7})],J.prototype,"routeInfo",void 0),(0,o._)([(0,f.MZ)({type:C})],J.prototype,"stops",void 0),J=(0,o._)([(0,w.$)("esri.layers.support.RouteSymbols")],J);var x=r(65308),E=r(70652),F=r(72945),U=r(86616),G=r(3825),W=r(54994),$=r(6409),q=r(73103);let K=class extends j.A{constructor(e){super(e),this.dataType=null,this.name=null,this.parameterNames=null,this.restrictionUsageParameterName=null,this.timeNeutralAttributeName=null,this.trafficSupport=null,this.units=null,this.usageType=null}};(0,o._)([(0,f.MZ)({type:String})],K.prototype,"dataType",void 0),(0,o._)([(0,$.e)(q.et,{ignoreUnknown:!1})],K.prototype,"name",void 0),(0,o._)([(0,f.MZ)({type:[String]})],K.prototype,"parameterNames",void 0),(0,o._)([(0,f.MZ)({type:String})],K.prototype,"restrictionUsageParameterName",void 0),(0,o._)([(0,$.e)(q.Mm,{ignoreUnknown:!1})],K.prototype,"timeNeutralAttributeName",void 0),(0,o._)([(0,f.MZ)({type:String})],K.prototype,"trafficSupport",void 0),(0,o._)([(0,$.e)(q.dn)],K.prototype,"units",void 0),(0,o._)([(0,$.e)(q.WU)],K.prototype,"usageType",void 0),K=(0,o._)([(0,w.$)("esri.rest.support.NetworkAttribute")],K);const V=K;let z=class extends j.A{constructor(e){super(e),this.buildTime=null,this.name=null,this.networkAttributes=null,this.networkSources=null,this.state=null}};(0,o._)([(0,f.MZ)({type:Number})],z.prototype,"buildTime",void 0),(0,o._)([(0,f.MZ)({type:String})],z.prototype,"name",void 0),(0,o._)([(0,f.MZ)({type:[V]})],z.prototype,"networkAttributes",void 0),(0,o._)([(0,f.MZ)()],z.prototype,"networkSources",void 0),(0,o._)([(0,f.MZ)({type:String})],z.prototype,"state",void 0),z=(0,o._)([(0,w.$)("esri.rest.support.NetworkDataset")],z);const Y=z;var H=r(41344);let X=class extends j.A{constructor(e){super(e),this.accumulateAttributeNames=null,this.attributeParameterValues=null,this.currentVersion=null,this.defaultTravelMode=null,this.directionsLanguage=null,this.directionsLengthUnits=null,this.directionsSupportedLanguages=null,this.directionsTimeAttribute=null,this.hasZ=null,this.impedance=null,this.networkDataset=null,this.supportedTravelModes=null}readAccumulateAttributes(e){return null==e?null:e.map(e=>q.et.fromJSON(e))}writeAccumulateAttributes(e,t,r){(null===e||void 0===e?void 0:e.length)&&(t[r]=e.map(e=>q.et.toJSON(e)))}get capabilities(){var e;return{supportsNow:(null!==(e=this.currentVersion)&&void 0!==e?e:10)>=10.81}}readDefaultTravelMode(e,t){var r,o,i;const s=null!==(r=null===(o=t.supportedTravelModes)||void 0===o?void 0:o.find(e=>{let{id:r}=e;return r===t.defaultTravelMode}))&&void 0!==r?r:null===(i=t.supportedTravelModes)||void 0===i?void 0:i.find(e=>{let{itemId:r}=e;return r===t.defaultTravelMode});return s?H.A.fromJSON(s):null}};(0,o._)([(0,f.MZ)()],X.prototype,"accumulateAttributeNames",void 0),(0,o._)([(0,h.w)("accumulateAttributeNames")],X.prototype,"readAccumulateAttributes",null),(0,o._)([(0,g.K)("accumulateAttributeNames")],X.prototype,"writeAccumulateAttributes",null),(0,o._)([(0,f.MZ)()],X.prototype,"attributeParameterValues",void 0),(0,o._)([(0,f.MZ)()],X.prototype,"capabilities",null),(0,o._)([(0,f.MZ)()],X.prototype,"currentVersion",void 0),(0,o._)([(0,f.MZ)()],X.prototype,"defaultTravelMode",void 0),(0,o._)([(0,h.w)("defaultTravelMode",["defaultTravelMode","supportedTravelModes"])],X.prototype,"readDefaultTravelMode",null),(0,o._)([(0,f.MZ)()],X.prototype,"directionsLanguage",void 0),(0,o._)([(0,$.e)(q.Z7)],X.prototype,"directionsLengthUnits",void 0),(0,o._)([(0,f.MZ)()],X.prototype,"directionsSupportedLanguages",void 0),(0,o._)([(0,$.e)(q.Mm,{ignoreUnknown:!1})],X.prototype,"directionsTimeAttribute",void 0),(0,o._)([(0,f.MZ)()],X.prototype,"hasZ",void 0),(0,o._)([(0,$.e)(q.et,{ignoreUnknown:!1})],X.prototype,"impedance",void 0),(0,o._)([(0,f.MZ)({type:Y})],X.prototype,"networkDataset",void 0),(0,o._)([(0,f.MZ)({type:[H.A]})],X.prototype,"supportedTravelModes",void 0),X=(0,o._)([(0,w.$)("esri.rest.support.NetworkServiceDescription")],X);function Q(e,t,r,o){o[r]=[t.length,t.length+e.length],e.forEach(e=>{t.push(e.geometry)})}function ee(e,t){for(let r=0;r<t.length;r++){const o=e[t[r]];if(o&&o.length)for(const e of o)e.z=void 0}u.A.getLogger("esri.rest.networkService").warnOnce("The remote Network Analysis service is powered by a network dataset which is not Z-aware.\nZ-coordinates of the input geometry are ignored.")}async function te(e,t,r){if(!e)throw new a.A("network-service:missing-url","Url to Network service is missing");const o=(0,W.jV)({f:"json",token:t},r),{data:i}=await(0,G.A)(e,o),s=i.currentVersion>=10.4?async function(e,t,r){try{const o=(0,W.jV)({f:"json",token:t},r),i=(0,m.UC)(e)+"/retrieveTravelModes",{data:{supportedTravelModes:s,defaultTravelMode:n}}=await(0,G.A)(i,o);return{supportedTravelModes:s,defaultTravelMode:n}}catch(Y){throw new a.A("network-service:retrieveTravelModes","Could not get to the NAServer's retrieveTravelModes.",{error:Y})}}(e,t,r):async function(e,t){var r;const o=(0,W.jV)({f:"json"},t),{data:i}=await(0,G.A)(e.replace(/\/rest\/.*$/i,"/info"),o);if(null===i||void 0===i||!i.owningSystemUrl)return{supportedTravelModes:[],defaultTravelMode:null};const{owningSystemUrl:s}=i,n=(0,m.UC)(s)+"/sharing/rest/portals/self",{data:l}=await(0,G.A)(n,o),a=(0,d.wc)("helperServices.routingUtilities.url",l);if(!a)return{supportedTravelModes:[],defaultTravelMode:null};const u=(0,W.Dl)(s),p=/\/solve$/i.test(u.path)?"Route":/\/solveclosestfacility$/i.test(u.path)?"ClosestFacility":"ServiceAreas",c=(0,W.jV)({f:"json",serviceName:p},t),y=(0,m.UC)(a)+"/GetTravelModes/execute",v=await(0,G.A)(y,c),f=[];let h=null;if(null!==v&&void 0!==v&&null!==(r=v.data)&&void 0!==r&&null!==(r=r.results)&&void 0!==r&&r.length){const e=v.data.results;for(const t of e)if("supportedTravelModes"===t.paramName){var w;if(null!==(w=t.value)&&void 0!==w&&w.features)for(const{attributes:e}of t.value.features)if(e){const t=JSON.parse(e.TravelMode);f.push(t)}}else"defaultTravelMode"===t.paramName&&(h=t.value)}return{supportedTravelModes:f,defaultTravelMode:h}}(e,r),{defaultTravelMode:n,supportedTravelModes:l}=await s;return i.defaultTravelMode=n,i.supportedTravelModes=l,X.fromJSON(i)}var re=r(89379),oe=r(17879),ie=r(1438),se=r(86236),ne=r(77725),le=r(18690),ae=r(45802),ue=r(64693);const pe=new ae.J({0:"informative",1:"process-definition",2:"process-start",3:"process-stop",50:"warning",100:"error",101:"empty",200:"abort"});let de=class extends ue.A{constructor(e){super(e),this.type=null}};(0,o._)([(0,f.MZ)({type:String,json:{read:pe.read,write:pe.write}})],de.prototype,"type",void 0),de=(0,o._)([(0,w.$)("esri.rest.support.NAMessage")],de);const ce=de;var ye=r(23701),ve=r(19247);let me=class extends j.A{constructor(e){super(e)}};(0,o._)([(0,f.MZ)({json:{read:{source:"string"}}})],me.prototype,"text",void 0),(0,o._)([(0,$.e)(q.Ec,{name:"stringType"})],me.prototype,"type",void 0),me=(0,o._)([(0,w.$)("esri.rest.support.DirectionsString")],me);const fe=me;let he=class extends j.A{constructor(e){super(e),this.arriveTime=null,this.arriveTimeOffset=null,this.geometry=null,this.strings=null}readArriveTimeOffset(e,t){return(0,se.Zn)(t.ETA,t.arriveTimeUTC)}readGeometry(e,t){return ve.A.fromJSON(t.point)}};(0,o._)([(0,f.MZ)({type:Date,json:{read:{source:"arriveTimeUTC"}}})],he.prototype,"arriveTime",void 0),(0,o._)([(0,f.MZ)()],he.prototype,"arriveTimeOffset",void 0),(0,o._)([(0,h.w)("arriveTimeOffset",["arriveTimeUTC","ETA"])],he.prototype,"readArriveTimeOffset",null),(0,o._)([(0,f.MZ)({type:ve.A})],he.prototype,"geometry",void 0),(0,o._)([(0,h.w)("geometry",["point"])],he.prototype,"readGeometry",null),(0,o._)([(0,f.MZ)({type:[fe]})],he.prototype,"strings",void 0),he=(0,o._)([(0,w.$)("esri.rest.support.DirectionsEvent")],he);const we=he;let ge=class extends s.A{constructor(e){super(e),this.events=null,this.geometry=null,this.strings=null}readGeometry(e,t){const r=function(e){if(null==e||""===e)return null;let t=0,r=0,o=0,i=0;const s=[];let n,l,a,u,p,d,c,y,v=0,m=0,f=0;if(p=e.match(/((\+|-)[^+\-|]+|\|)/g),p||(p=[]),0===parseInt(p[v],32)){v=2;const e=parseInt(p[v],32);v++,d=parseInt(p[v],32),v++,1&e&&(m=p.indexOf("|")+1,c=parseInt(p[m],32),m++),2&e&&(f=p.indexOf("|",m)+1,y=parseInt(p[f],32),f++)}else d=parseInt(p[v],32),v++;for(;v<p.length&&"|"!==p[v];){n=parseInt(p[v],32)+t,v++,t=n,l=parseInt(p[v],32)+r,v++,r=l;const e=[n/d,l/d];m&&(u=parseInt(p[m],32)+o,m++,o=u,e.push(u/c)),f&&(a=parseInt(p[f],32)+i,f++,i=a,e.push(a/y)),s.push(e)}return{paths:[s],hasZ:m>0,hasM:f>0}}(t.compressedGeometry);return null!=r?ye.A.fromJSON(r):null}};(0,o._)([(0,f.MZ)({type:[we]})],ge.prototype,"events",void 0),(0,o._)([(0,f.MZ)({type:ye.A})],ge.prototype,"geometry",void 0),(0,o._)([(0,h.w)("geometry",["compressedGeometry"])],ge.prototype,"readGeometry",null),(0,o._)([(0,f.MZ)({type:[fe]})],ge.prototype,"strings",void 0),ge=(0,o._)([(0,w.$)("esri.rest.support.DirectionsFeature")],ge);const _e=ge;let Ae=class extends ne.A{constructor(e){super(e),this.extent=null,this.features=[],this.geometryType="polyline",this.routeId=null,this.routeName=null,this.totalDriveTime=null,this.totalLength=null,this.totalTime=null}readFeatures(e,t){var r;if(!e)return[];const o=null!==(r=t.summary.envelope.spatialReference)&&void 0!==r?r:t.spatialReference,i=o&&M.A.fromJSON(o);return e.map(e=>{const t=_e.fromJSON(e);if(null!=t.geometry&&(t.geometry.spatialReference=i),null!=t.events)for(const r of t.events)null!=r.geometry&&(r.geometry.spatialReference=i);return t})}get mergedGeometry(){return this.features?function(e,t){if(0===e.length)return new ye.A({spatialReference:t});const r=[];for(const n of e)for(const e of n.paths)r.push(...e);const o=[];r.forEach((e,t)=>{0!==t&&e[0]===r[t-1][0]&&e[1]===r[t-1][1]||o.push(e)});const{hasM:i,hasZ:s}=e[0];return new ye.A({hasM:i,hasZ:s,paths:[o],spatialReference:t})}(this.features.map(e=>{let{geometry:t}=e;return t}),this.extent.spatialReference):null}get strings(){return this.features.flatMap(e=>{let{strings:t}=e;return t}).filter(le.Ru)}};(0,o._)([(0,f.MZ)({type:A.A,json:{read:{source:"summary.envelope"}}})],Ae.prototype,"extent",void 0),(0,o._)([(0,f.MZ)({nonNullable:!0})],Ae.prototype,"features",void 0),(0,o._)([(0,h.w)("features")],Ae.prototype,"readFeatures",null),(0,o._)([(0,f.MZ)()],Ae.prototype,"geometryType",void 0),(0,o._)([(0,f.MZ)({readOnly:!0})],Ae.prototype,"mergedGeometry",null),(0,o._)([(0,f.MZ)()],Ae.prototype,"routeId",void 0),(0,o._)([(0,f.MZ)()],Ae.prototype,"routeName",void 0),(0,o._)([(0,f.MZ)({value:null,readOnly:!0})],Ae.prototype,"strings",null),(0,o._)([(0,f.MZ)({json:{read:{source:"summary.totalDriveTime"}}})],Ae.prototype,"totalDriveTime",void 0),(0,o._)([(0,f.MZ)({json:{read:{source:"summary.totalLength"}}})],Ae.prototype,"totalLength",void 0),(0,o._)([(0,f.MZ)({json:{read:{source:"summary.totalTime"}}})],Ae.prototype,"totalTime",void 0),Ae=(0,o._)([(0,w.$)("esri.rest.support.DirectionsFeatureSet")],Ae);const be=Ae;let Se=class extends j.A{constructor(e){super(e),this.directionLines=null,this.directionPoints=null,this.directions=null,this.route=null,this.routeName=null,this.stops=null,this.traversedEdges=null,this.traversedJunctions=null,this.traversedTurns=null}};(0,o._)([(0,f.MZ)({type:ne.A,json:{write:!0}})],Se.prototype,"directionLines",void 0),(0,o._)([(0,f.MZ)({type:ne.A,json:{write:!0}})],Se.prototype,"directionPoints",void 0),(0,o._)([(0,f.MZ)({type:be,json:{write:!0}})],Se.prototype,"directions",void 0),(0,o._)([(0,f.MZ)({type:s.A,json:{write:!0}})],Se.prototype,"route",void 0),(0,o._)([(0,f.MZ)({type:String,json:{write:!0}})],Se.prototype,"routeName",void 0),(0,o._)([(0,f.MZ)({type:[s.A],json:{write:!0}})],Se.prototype,"stops",void 0),(0,o._)([(0,f.MZ)({type:ne.A,json:{write:!0}})],Se.prototype,"traversedEdges",void 0),(0,o._)([(0,f.MZ)({type:ne.A,json:{write:!0}})],Se.prototype,"traversedJunctions",void 0),(0,o._)([(0,f.MZ)({type:ne.A,json:{write:!0}})],Se.prototype,"traversedTurns",void 0),Se=(0,o._)([(0,w.$)("esri.rest.support.RouteResult")],Se);const Me=Se;function Te(e){return e?ne.A.fromJSON(e).features.filter(le.Ru):[]}let Be=class extends j.A{constructor(e){super(e),this.checksum=null,this.messages=null,this.pointBarriers=null,this.polylineBarriers=null,this.polygonBarriers=null,this.routeResults=null}readPointBarriers(e,t){return Te(t.barriers)}readPolylineBarriers(e){return Te(e)}readPolygonBarriers(e){return Te(e)}};function Ze(e){return e instanceof ne.A}async function Ne(e,t,r){const o=[],i=[],s={},n={},l=(0,W.Dl)(e),{path:a}=l;Ze(t.stops)&&Q(t.stops.features,i,"stops.features",s),Ze(t.pointBarriers)&&Q(t.pointBarriers.features,i,"pointBarriers.features",s),Ze(t.polylineBarriers)&&Q(t.polylineBarriers.features,i,"polylineBarriers.features",s),Ze(t.polygonBarriers)&&Q(t.polygonBarriers.features,i,"polygonBarriers.features",s);const u=await(0,ie.el)(i);for(const v in s){const e=s[v];o.push(v),n[v]=u.slice(e[0],e[1])}if(function(e,t){for(let r=0;r<t.length;r++){const o=e[t[r]];if(o&&o.length)for(const e of o)if(null!=e&&e.hasZ)return!0}return!1}(n,o)){let e=null;try{e=await te(a,t.apiKey,r)}catch(y){}e&&!e.hasZ&&ee(n,o)}for(const v in n)n[v].forEach((e,r)=>{(0,oe.Jt)(t,v)[r].geometry=e});const p=(0,re.A)((0,re.A)({},r),{},{query:(0,re.A)((0,re.A)((0,re.A)({},l.query),(0,se.r9)(t)),{},{f:"json"})}),d=a.endsWith("/solve")?a:"".concat(a,"/solve"),{data:c}=await(0,G.A)(d,p);return function(e){var t;const{barriers:r,checksum:o,directionLines:i,directionPoints:s,directions:n,messages:l,polygonBarriers:a,polylineBarriers:u,routes:p,stops:d,traversedEdges:c,traversedJunctions:y,traversedTurns:v}=e,m=e=>{const t=h.find(t=>t.routeName===e);if(null!=t)return t;const r={routeId:h.length+1,routeName:e};return h.push(r),r},f=e=>{const t=h.find(t=>t.routeId===e);if(null!=t)return t;const r={routeId:e,routeName:null};return h.push(r),r},h=[];null!==p&&void 0!==p&&p.features.forEach((e,t)=>{var r;e.geometry.spatialReference=null!==(r=p.spatialReference)&&void 0!==r?r:void 0;const o=e.attributes.Name,i=t+1;h.push({routeId:i,routeName:o,route:e})}),null===n||void 0===n||n.forEach(e=>{const{routeName:t}=e;m(t).directions=e});const w=null!==(t=null===d||void 0===d?void 0:d.features.every(e=>null==e.attributes.RouteName))&&void 0!==t&&t&&h.length>0?h[0].routeName:null;return null!==d&&void 0!==d&&d.features.forEach(e=>{var t,r,o,i;e.geometry&&(null!==(r=(t=e.geometry).spatialReference)&&void 0!==r||(t.spatialReference=null!==(o=d.spatialReference)&&void 0!==o?o:void 0));const s=null!==w&&void 0!==w?w:e.attributes.RouteName,n=m(s);null!==(i=n.stops)&&void 0!==i||(n.stops=[]),n.stops.push(e)}),null!==i&&void 0!==i&&i.features.forEach(e=>{var t;const r=e.attributes.RouteID,o=f(r),{geometryType:s,spatialReference:n}=i;null!==(t=o.directionLines)&&void 0!==t||(o.directionLines={features:[],geometryType:s,spatialReference:n}),o.directionLines.features.push(e)}),null!==s&&void 0!==s&&s.features.forEach(e=>{var t;const r=e.attributes.RouteID,o=f(r),{geometryType:i,spatialReference:n}=s;null!==(t=o.directionPoints)&&void 0!==t||(o.directionPoints={features:[],geometryType:i,spatialReference:n}),o.directionPoints.features.push(e)}),null!==c&&void 0!==c&&c.features.forEach(e=>{var t;const r=e.attributes.RouteID,o=f(r),{geometryType:i,spatialReference:s}=c;null!==(t=o.traversedEdges)&&void 0!==t||(o.traversedEdges={features:[],geometryType:i,spatialReference:s}),o.traversedEdges.features.push(e)}),null!==y&&void 0!==y&&y.features.forEach(e=>{var t;const r=e.attributes.RouteID,o=f(r),{geometryType:i,spatialReference:s}=y;null!==(t=o.traversedJunctions)&&void 0!==t||(o.traversedJunctions={features:[],geometryType:i,spatialReference:s}),o.traversedJunctions.features.push(e)}),null!==v&&void 0!==v&&v.features.forEach(e=>{var t;const r=e.attributes.RouteID,o=f(r);null!==(t=o.traversedTurns)&&void 0!==t||(o.traversedTurns={features:[]}),o.traversedTurns.features.push(e)}),Be.fromJSON({barriers:r,checksum:o,messages:l,polygonBarriers:a,polylineBarriers:u,routeResults:h})}(c)}(0,o._)([(0,f.MZ)({type:String})],Be.prototype,"checksum",void 0),(0,o._)([(0,f.MZ)({type:[ce]})],Be.prototype,"messages",void 0),(0,o._)([(0,f.MZ)({type:[s.A]})],Be.prototype,"pointBarriers",void 0),(0,o._)([(0,h.w)("pointBarriers",["barriers"])],Be.prototype,"readPointBarriers",null),(0,o._)([(0,f.MZ)({type:[s.A]})],Be.prototype,"polylineBarriers",void 0),(0,o._)([(0,h.w)("polylineBarriers")],Be.prototype,"readPolylineBarriers",null),(0,o._)([(0,f.MZ)({type:[s.A]})],Be.prototype,"polygonBarriers",void 0),(0,o._)([(0,h.w)("polygonBarriers")],Be.prototype,"readPolygonBarriers",null),(0,o._)([(0,f.MZ)({type:[Me]})],Be.prototype,"routeResults",void 0),Be=(0,o._)([(0,w.$)("esri.rest.support.RouteSolveResult")],Be);var Pe=r(58380),Re=r(75258),Ie=r(57562),je=r(26170),Oe=r(95808),De=r(65146),Ce=r(69098),Le=r(40565),ke=r(29067),Je=r(19902),xe=r(31608);let Ee=class extends(Ce.A.ClonableMixin(j.A)){constructor(e){super(e),this.doNotLocateOnRestrictedElements=null,this.geometry=null,this.geometryType=null,this.name=null,this.spatialRelationship=null,this.type="layer",this.where=null}};var Fe,Ue;(0,o._)([(0,f.MZ)({type:Boolean,json:{write:!0}})],Ee.prototype,"doNotLocateOnRestrictedElements",void 0),(0,o._)([(0,f.MZ)({types:xe.yR,json:{read:Je.rS,write:!0}})],Ee.prototype,"geometry",void 0),(0,o._)([(0,$.e)(q.Vj)],Ee.prototype,"geometryType",void 0),(0,o._)([(0,f.MZ)({type:String,json:{name:"layerName",write:!0}})],Ee.prototype,"name",void 0),(0,o._)([(0,$.e)(q.vS,{name:"spatialRel"})],Ee.prototype,"spatialRelationship",void 0),(0,o._)([(0,f.MZ)({type:String,json:{write:!0}})],Ee.prototype,"type",void 0),(0,o._)([(0,f.MZ)({type:String,json:{write:!0}})],Ee.prototype,"where",void 0),Ee=(0,o._)([(0,w.$)("esri.rest.support.DataLayer")],Ee);let Ge=(Fe=class extends ne.A{constructor(e){super(e),this.doNotLocateOnRestrictedElements=null}clone(){return new Ue((0,re.A)({doNotLocateOnRestrictedElements:this.doNotLocateOnRestrictedElements},this.cloneProperties()))}},Ue=Fe,Fe);(0,o._)([(0,f.MZ)({type:Boolean,json:{write:!0}})],Ge.prototype,"doNotLocateOnRestrictedElements",void 0),Ge=Ue=(0,o._)([(0,w.$)("esri.rest.support.NetworkFeatureSet")],Ge);let We=class extends(Ce.A.ClonableMixin(j.A)){constructor(e){super(e),this.doNotLocateOnRestrictedElements=null,this.url=null}};var $e,qe;(0,o._)([(0,f.MZ)({type:Boolean,json:{write:!0}})],We.prototype,"doNotLocateOnRestrictedElements",void 0),(0,o._)([(0,f.MZ)({type:String,json:{write:!0}})],We.prototype,"url",void 0),We=(0,o._)([(0,w.$)("esri.rest.support.NetworkUrl")],We);let Ke=($e=class extends(Ce.A.ClonableMixin(j.A)){constructor(e){super(e),this.accumulateAttributes=null,this.apiKey=null,this.attributeParameterValues=null,this.checksum=null,this.directionsLanguage=null,this.directionsLengthUnits=null,this.directionsOutputType=null,this.directionsStyleName=null,this.directionsTimeAttribute=null,this.findBestSequence=null,this.geometryPrecision=null,this.geometryPrecisionM=null,this.geometryPrecisionZ=null,this.ignoreInvalidLocations=null,this.impedanceAttribute=null,this.outputGeometryPrecision=null,this.outputGeometryPrecisionUnits=null,this.outputLines="true-shape",this.outSpatialReference=null,this.overrides=null,this.pointBarriers=null,this.polygonBarriers=null,this.polylineBarriers=null,this.preserveFirstStop=null,this.preserveLastStop=null,this.preserveObjectID=null,this.restrictionAttributes=null,this.restrictUTurns=null,this.returnBarriers=!1,this.returnDirections=!1,this.returnPolygonBarriers=!1,this.returnPolylineBarriers=!1,this.returnRoutes=!0,this.returnStops=!1,this.returnTraversedEdges=null,this.returnTraversedJunctions=null,this.returnTraversedTurns=null,this.returnZ=!0,this.startTime=null,this.startTimeIsUTC=!0,this.stops=null,this.timeWindowsAreUTC=null,this.travelMode=null,this.useHierarchy=null,this.useTimeWindows=null}static from(e){return(0,Le.PZ)(qe,e)}readAccumulateAttributes(e){return null==e?null:e.map(e=>q.et.fromJSON(e))}writeAccumulateAttributes(e,t,r){(null===e||void 0===e?void 0:e.length)&&(t[r]=e.map(e=>q.et.toJSON(e)))}writePointBarriers(e,t,r){Ve(e,t,r)}writePolygonBarrier(e,t,r){Ve(e,t,r)}writePolylineBarrier(e,t,r){Ve(e,t,r)}readRestrictionAttributes(e){return null==e?null:e.map(e=>q.OC.fromJSON(e))}writeRestrictionAttributes(e,t,r){(null===e||void 0===e?void 0:e.length)&&(t[r]=e.map(e=>q.OC.toJSON(e)))}readStartTime(e,t){const{startTime:r}=t;return null==r?null:"now"===r?"now":new Date(r)}writeStartTime(e,t){null!=e&&(t.startTime="now"===e?"now":e.getTime())}readStops(e,t){return function(e){return function(e){return e&&"type"in e}(e)?Ee.fromJSON(e):function(e){return e&&"url"in e}(e)?We.fromJSON(e):function(e){return e&&"features"in e&&"doNotLocateOnRestrictedElements"in e}(e)?Ge.fromJSON(e):function(e){return e&&"features"in e}(e)?ne.A.fromJSON(e):null}(t.stops)}writeStops(e,t,r){Ve(e,t,r)}},qe=$e,$e);function Ve(e,t,r){null!=e&&(t[r]=l.A.isCollection(e)?{features:e.toArray().map(e=>e.toJSON())}:e.toJSON())}(0,o._)([(0,f.MZ)({type:[String],json:{name:"accumulateAttributeNames",write:!0}})],Ke.prototype,"accumulateAttributes",void 0),(0,o._)([(0,h.w)("accumulateAttributes")],Ke.prototype,"readAccumulateAttributes",null),(0,o._)([(0,g.K)("accumulateAttributes")],Ke.prototype,"writeAccumulateAttributes",null),(0,o._)([(0,f.MZ)(ke.K)],Ke.prototype,"apiKey",void 0),(0,o._)([(0,f.MZ)({json:{write:!0}})],Ke.prototype,"attributeParameterValues",void 0),(0,o._)([(0,f.MZ)({type:String,json:{write:!0}})],Ke.prototype,"checksum",void 0),(0,o._)([(0,f.MZ)({type:String,json:{write:!0}})],Ke.prototype,"directionsLanguage",void 0),(0,o._)([(0,$.e)(q.Z7)],Ke.prototype,"directionsLengthUnits",void 0),(0,o._)([(0,$.e)(q.aJ)],Ke.prototype,"directionsOutputType",void 0),(0,o._)([(0,$.e)(q.$n)],Ke.prototype,"directionsStyleName",void 0),(0,o._)([(0,$.e)(q.Mm,{name:"directionsTimeAttributeName",ignoreUnknown:!1})],Ke.prototype,"directionsTimeAttribute",void 0),(0,o._)([(0,f.MZ)({type:Boolean,json:{write:!0}})],Ke.prototype,"findBestSequence",void 0),(0,o._)([(0,f.MZ)({type:Number,json:{write:!0}})],Ke.prototype,"geometryPrecision",void 0),(0,o._)([(0,f.MZ)({type:Number,json:{write:!0}})],Ke.prototype,"geometryPrecisionM",void 0),(0,o._)([(0,f.MZ)({type:Number,json:{write:!0}})],Ke.prototype,"geometryPrecisionZ",void 0),(0,o._)([(0,f.MZ)({type:Boolean,json:{write:!0}})],Ke.prototype,"ignoreInvalidLocations",void 0),(0,o._)([(0,$.e)(q.et,{name:"impedanceAttributeName",ignoreUnknown:!1})],Ke.prototype,"impedanceAttribute",void 0),(0,o._)([(0,f.MZ)({type:Number,json:{write:!0}})],Ke.prototype,"outputGeometryPrecision",void 0),(0,o._)([(0,$.e)(q.hY)],Ke.prototype,"outputGeometryPrecisionUnits",void 0),(0,o._)([(0,$.e)(q.Sr)],Ke.prototype,"outputLines",void 0),(0,o._)([(0,f.MZ)({type:M.A,json:{name:"outSR",write:!0}})],Ke.prototype,"outSpatialReference",void 0),(0,o._)([(0,f.MZ)({json:{write:!0}})],Ke.prototype,"overrides",void 0),(0,o._)([(0,f.MZ)({json:{name:"barriers",write:!0}})],Ke.prototype,"pointBarriers",void 0),(0,o._)([(0,g.K)("pointBarriers")],Ke.prototype,"writePointBarriers",null),(0,o._)([(0,f.MZ)({json:{write:!0}})],Ke.prototype,"polygonBarriers",void 0),(0,o._)([(0,g.K)("polygonBarriers")],Ke.prototype,"writePolygonBarrier",null),(0,o._)([(0,f.MZ)({json:{write:!0}})],Ke.prototype,"polylineBarriers",void 0),(0,o._)([(0,g.K)("polylineBarriers")],Ke.prototype,"writePolylineBarrier",null),(0,o._)([(0,f.MZ)({type:Boolean,json:{write:!0}})],Ke.prototype,"preserveFirstStop",void 0),(0,o._)([(0,f.MZ)({type:Boolean,json:{write:!0}})],Ke.prototype,"preserveLastStop",void 0),(0,o._)([(0,f.MZ)({type:Boolean,json:{write:!0}})],Ke.prototype,"preserveObjectID",void 0),(0,o._)([(0,f.MZ)({type:[String],json:{name:"restrictionAttributeNames",write:!0}})],Ke.prototype,"restrictionAttributes",void 0),(0,o._)([(0,h.w)("restrictionAttributes")],Ke.prototype,"readRestrictionAttributes",null),(0,o._)([(0,g.K)("restrictionAttributes")],Ke.prototype,"writeRestrictionAttributes",null),(0,o._)([(0,$.e)(q.hE)],Ke.prototype,"restrictUTurns",void 0),(0,o._)([(0,f.MZ)({type:Boolean,json:{write:!0}})],Ke.prototype,"returnBarriers",void 0),(0,o._)([(0,f.MZ)({type:Boolean,json:{write:!0}})],Ke.prototype,"returnDirections",void 0),(0,o._)([(0,f.MZ)({type:Boolean,json:{write:!0}})],Ke.prototype,"returnPolygonBarriers",void 0),(0,o._)([(0,f.MZ)({type:Boolean,json:{write:!0}})],Ke.prototype,"returnPolylineBarriers",void 0),(0,o._)([(0,f.MZ)({type:Boolean,json:{write:!0}})],Ke.prototype,"returnRoutes",void 0),(0,o._)([(0,f.MZ)({type:Boolean,json:{write:!0}})],Ke.prototype,"returnStops",void 0),(0,o._)([(0,f.MZ)({type:Boolean,json:{write:!0}})],Ke.prototype,"returnTraversedEdges",void 0),(0,o._)([(0,f.MZ)({type:Boolean,json:{write:!0}})],Ke.prototype,"returnTraversedJunctions",void 0),(0,o._)([(0,f.MZ)({type:Boolean,json:{write:!0}})],Ke.prototype,"returnTraversedTurns",void 0),(0,o._)([(0,f.MZ)({type:Boolean,json:{write:!0}})],Ke.prototype,"returnZ",void 0),(0,o._)([(0,f.MZ)({json:{write:!0}})],Ke.prototype,"startTime",void 0),(0,o._)([(0,h.w)("startTime")],Ke.prototype,"readStartTime",null),(0,o._)([(0,g.K)("startTime")],Ke.prototype,"writeStartTime",null),(0,o._)([(0,f.MZ)({type:Boolean,json:{write:!0}})],Ke.prototype,"startTimeIsUTC",void 0),(0,o._)([(0,f.MZ)({json:{write:!0}})],Ke.prototype,"stops",void 0),(0,o._)([(0,h.w)("stops")],Ke.prototype,"readStops",null),(0,o._)([(0,g.K)("stops")],Ke.prototype,"writeStops",null),(0,o._)([(0,f.MZ)({type:Boolean,json:{write:!0}})],Ke.prototype,"timeWindowsAreUTC",void 0),(0,o._)([(0,f.MZ)({type:H.A,json:{write:!0}})],Ke.prototype,"travelMode",void 0),(0,o._)([(0,f.MZ)({type:Boolean,json:{write:!0}})],Ke.prototype,"useHierarchy",void 0),(0,o._)([(0,f.MZ)({type:Boolean,json:{write:!0}})],Ke.prototype,"useTimeWindows",void 0),Ke=qe=(0,o._)([(0,w.$)("esri.rest.support.RouteParameters")],Ke);var ze=r(36315),Ye=r(75747);function He(e){if(!e.length)return;const t=e.toArray(),r=t.map(e=>{let{objectId:t}=e;return t}).filter(e=>null!=e);let o=Math.max(...r,0);for(const i of t)null==i.objectId&&(i.objectId=++o)}function Xe(e,t){return!!e.length&&e.length===t.length&&Qe(e)&&Qe(t)}function Qe(e){return e.every(e=>{let{objectId:t}=e;return null!=t})}function et(e){return e.length?e:null}function tt(e){switch(e){case"esriGeometryPoint":return{type:"esriSMS",style:"esriSMSCircle",size:12,color:[0,0,0,0],outline:tt("esriGeometryPolyline")};case"esriGeometryPolyline":return{type:"esriSLS",style:"esriSLSSolid",width:1,color:[0,0,0,0]};case"esriGeometryPolygon":return{type:"esriSFS",style:"esriSFSNull",outline:tt("esriGeometryPolyline")}}}function rt(e){return"layers"in e}async function ot(e){const t=M.A.WGS84;return await(0,S.initializeProjection)(e.spatialReference,t),(0,S.project)(e,t)}function it(e,t){switch(t){case"seconds":return e/60;case"hours":return 60*e;case"days":return 60*e*24;default:return e}}function st(e,t){return"decimal-degrees"===t||"points"===t||"unknown"===t?e:(0,v.oU)(e,t,"meters")}const nt=l.A.ofType(Pe.A),lt=l.A.ofType(Re.A),at=l.A.ofType(Ie.A),ut=l.A.ofType(je.A),pt=l.A.ofType(Oe.A),dt=l.A.ofType(Ye.A);let ct=class extends((0,Z.dM)((0,R.j)((0,N.q)((0,P.A)((0,p.P)(B.A)))))){constructor(e){super(e),this._cachedServiceDescription=null,this._featureCollection=null,this._type="Feature Collection",this.checksum=null,this.defaultSymbols=new J,this.directionLines=null,this.directionPoints=null,this.featureCollectionType="route",this.legendEnabled=!1,this.maxScale=0,this.minScale=0,this.pointBarriers=new at,this.polygonBarriers=new ut,this.polylineBarriers=new pt,this.routeInfo=null,this.spatialReference=M.A.WGS84,this.stops=new dt,this.type="route";const t=()=>{this._setStopSymbol(this.stops)};this.addHandles((0,y.on)(()=>this.stops,"change",t,{sync:!0,onListenerAdd:t}))}writeFeatureCollectionWebmap(e,t,r,o){const i=[this._writePolygonBarriers(),this._writePolylineBarriers(),this._writePointBarriers(),this._writeRouteInfo(),this._writeDirectionLines(),this._writeDirectionPoints(),this._writeStops()].filter(e=>!!e),s=i.map((e,t)=>t),n="web-map"===o.origin?"featureCollection.layers":"layers";(0,d.sM)(n,i,t),t.opacity=this.opacity,t.visibility=this.visible,t.visibleLayers=s}readDirectionLines(e,t){return this._getNetworkFeatures(t,"DirectionLines",e=>Pe.A.fromGraphic(e))}readDirectionPoints(e,t){return this._getNetworkFeatures(t,"DirectionPoints",e=>Re.A.fromGraphic(e))}get fullExtent(){var e,t;const r=new A.A({xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:M.A.WGS84});if(null!=(null===(e=this.routeInfo)||void 0===e?void 0:e.geometry))return null!==(t=this.routeInfo.geometry.extent)&&void 0!==t?t:r;if(null==this.stops)return r;const o=this.stops.filter(e=>null!=e.geometry);if(o.length<2)return r;const{spatialReference:i}=o.at(0).geometry;if(null==i)return r;const s=o.toArray().map(e=>{const t=e.geometry;return[t.x,t.y]});return new b.A({points:s,spatialReference:i}).extent}readMaxScale(e,t){var r,o;const i=rt(t)?t.layers:null===(r=t.featureCollection)||void 0===r?void 0:r.layers,s=null===i||void 0===i?void 0:i.find(e=>null!=e.layerDefinition.maxScale);return null!==(o=null===s||void 0===s?void 0:s.layerDefinition.maxScale)&&void 0!==o?o:0}readMinScale(e,t){var r,o;const i=rt(t)?t.layers:null===(r=t.featureCollection)||void 0===r?void 0:r.layers,s=null===i||void 0===i?void 0:i.find(e=>null!=e.layerDefinition.minScale);return null!==(o=null===s||void 0===s?void 0:s.layerDefinition.minScale)&&void 0!==o?o:0}readPointBarriers(e,t){return this._getNetworkFeatures(t,"Barriers",e=>Ie.A.fromGraphic(e))}readPolygonBarriers(e,t){return this._getNetworkFeatures(t,"PolygonBarriers",e=>je.A.fromGraphic(e))}readPolylineBarriers(e,t){return this._getNetworkFeatures(t,"PolylineBarriers",e=>Oe.A.fromGraphic(e))}readRouteInfo(e,t){var r;return null!==(r=this._getNetworkFeatures(t,"RouteInfo",e=>De.A.fromGraphic(e)).at(0))&&void 0!==r?r:null}readSpatialReference(e,t){var r,o,i,s,n,l;const a=rt(t)?t.layers:null===(r=t.featureCollection)||void 0===r?void 0:r.layers;if(null===a||void 0===a||!a.length)return M.A.WGS84;const{layerDefinition:u,featureSet:p}=a[0],d=p.features[0],c=null!==(o=null!==(i=null!==(s=null!==(n=null===d||void 0===d||null===(l=d.geometry)||void 0===l?void 0:l.spatialReference)&&void 0!==n?n:p.spatialReference)&&void 0!==s?s:u.spatialReference)&&void 0!==i?i:u.extent.spatialReference)&&void 0!==o?o:T.KK;return M.A.fromJSON(c)}readStops(e,t){return this._getNetworkFeatures(t,"Stops",e=>Ye.A.fromGraphic(e),e=>this._setStopSymbol(e))}get title(){var e,t;return null!==(e=null===(t=this.routeInfo)||void 0===t?void 0:t.name)&&void 0!==e?e:"Route"}set title(e){this._overrideIfSome("title",e)}get url(){return i.A.routeServiceUrl}set url(e){null!=e?this._set("url",(0,I.Jf)(e,u.A.getLogger(this))):this._set("url",i.A.routeServiceUrl)}load(e){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Feature Collection"]},e)),Promise.resolve(this)}removeAll(){this.removeResult(),this.pointBarriers.removeAll(),this.polygonBarriers.removeAll(),this.polylineBarriers.removeAll(),this.stops.removeAll()}removeResult(){null!=this.directionLines&&(this.directionLines.removeAll(),this._set("directionLines",null)),null!=this.directionPoints&&(this.directionPoints.removeAll(),this._set("directionPoints",null)),null!=this.routeInfo&&this._set("routeInfo",null)}async save(){await this.load();const{fullExtent:e,portalItem:t}=this;if(!t)throw new a.A("routelayer:portal-item-not-set","save() requires to the layer to have a portal item");if(!t.id)throw new a.A("routelayer:portal-item-not-saved","Please use saveAs() first to save the routelayer");if("Feature Collection"!==t.type)throw new a.A("routelayer:portal-item-wrong-type",'Portal item needs to have type "Feature Collection"');if(!this.routeInfo)throw new a.A("routelayer:route-unsolved","save() requires a solved route");const{portal:r}=t;await r.signIn(),r.user||await t.reload();const{itemUrl:o,itemControl:i}=t;if("admin"!==i&&"update"!==i)throw new a.A("routelayer:insufficient-permissions","To save this layer, you need to be the owner or an administrator of your organization");const s={messages:[],origin:"portal-item",portal:r,url:o?(0,m.An)(o):void 0,writtenProperties:[]},n=this.write(void 0,s);return t.extent=await ot(e),t.title=this.title,await t.update({data:n}),t}async saveAs(e){var t,r,o;let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(await this.load(),null==this.routeInfo)throw new a.A("routelayer:route-unsolved","saveAs() requires a solved route");const s=E.default.from(e).clone();null!==(t=s.extent)&&void 0!==t||(s.extent=await ot(this.fullExtent)),s.id=null,null!==(r=s.portal)&&void 0!==r||(s.portal=x.A.getDefault()),null!==(o=s.title)&&void 0!==o||(s.title=this.title),s.type="Feature Collection",s.typeKeywords=["Data","Feature Collection",F.mm.MULTI_LAYER,"Route Layer"];const{portal:n}=s,l={messages:[],origin:"portal-item",portal:n,url:null,writtenProperties:[]};await n.signIn();const u=null===i||void 0===i?void 0:i.folder,p=this.write(void 0,l);return await n.user.addItem({item:s,folder:u,data:p}),this.portalItem=s,(0,_.v)(l),l.portalItem=s,s}async solve(e,t){var r,o,i,s,n,u,p;He(this.stops),He(this.pointBarriers),He(this.polylineBarriers),He(this.polygonBarriers);const d=null!==(r=null===e||void 0===e?void 0:e.stops)&&void 0!==r?r:this.stops,y=null!==(o=null===e||void 0===e?void 0:e.pointBarriers)&&void 0!==o?o:et(this.pointBarriers),v=null!==(i=null===e||void 0===e?void 0:e.polylineBarriers)&&void 0!==i?i:et(this.polylineBarriers),m=null!==(s=null===e||void 0===e?void 0:e.polygonBarriers)&&void 0!==s?s:et(this.polygonBarriers);if(null==d)throw new a.A("routelayer:undefined-stops","the route layer must have stops defined in the route parameters.");if((function(e){return"esri.rest.support.FeatureSet"===e.declaredClass}(d)||function(e){return"esri.rest.support.NetworkFeatureSet"===e.declaredClass}(d))&&d.features.length<2||l.A.isCollection(d)&&d.length<2)throw new a.A("routelayer:insufficent-stops","the route layer must have two or more stops to solve a route.");if(l.A.isCollection(d))for(const l of d)l.routeName=null;const f=null===e||void 0===e?void 0:e.apiKey,{checksum:h,url:w}=this,g=await this._getServiceDescription(w,f,t),_=null!==(n=null===e||void 0===e?void 0:e.travelMode)&&void 0!==n?n:g.defaultTravelMode,A=null!==(u=null===e||void 0===e?void 0:e.accumulateAttributes)&&void 0!==u?u:[];_&&(A.push(_.distanceAttributeName),_.timeAttributeName&&A.push(_.timeAttributeName));const b={accumulateAttributes:A,checksum:h,directionsOutputType:"featuresets",ignoreInvalidLocations:!0,pointBarriers:y,polylineBarriers:v,polygonBarriers:m,preserveObjectID:!0,returnBarriers:!!y,returnDirections:!0,returnPolygonBarriers:!!m,returnPolylineBarriers:!!v,returnRoutes:!0,returnStops:!0,stops:d},S=Ke.from(null!==e&&void 0!==e?e:{});let M;S.set(b);try{M=await Ne(w,S,t)}catch(B){throw(0,c.zf)(B)?B:new a.A("routelayer:failed-route-request","the routing request failed",{error:B})}const T=this._toRouteLayerSolution(M);return this._isOverridden("title")||(this.title=null!==(p=T.routeInfo.name)&&void 0!==p?p:"Route"),this._populatePortalFields(T,g,S),T}update(e){const{checksum:t,directionLines:r,directionPoints:o,pointBarriers:i,polygonBarriers:s,polylineBarriers:n,routeInfo:l,stops:a}=e;Xe(a,this.stops)?function(e,t){for(const r of e){const e=t.find(e=>e.objectId===r.objectId);e&&(e.arriveCurbApproach=r.arriveCurbApproach,e.arriveTime=r.arriveTime,e.arriveTimeOffset=r.arriveTimeOffset,e.cumulativeCosts=r.cumulativeCosts,e.cumulativeDistance=r.cumulativeDistance,e.cumulativeDuration=r.cumulativeDuration,e.curbApproach=r.curbApproach,e.departCurbApproach=r.departCurbApproach,e.departTime=r.departTime,e.departTimeOffset=r.departTimeOffset,e.distanceToNetworkInMeters=r.distanceToNetworkInMeters,e.geometry=r.geometry,e.lateDuration=r.lateDuration,e.name=r.name,e.navLatency=r.navLatency,e.posAlong=r.posAlong,e.routeName=r.routeName,e.serviceCosts=r.serviceCosts,e.serviceDistance=r.serviceDistance,e.serviceDuration=r.serviceDuration,e.sequence=r.sequence,e.sideOfEdge=r.sideOfEdge,e.snapX=r.snapX,e.snapY=r.snapY,e.snapZ=r.snapZ,e.sourceId=r.sourceId,e.sourceOid=r.sourceOid,e.status=r.status,e.symbol=r.symbol,e.timeWindowEnd=r.timeWindowEnd,e.timeWindowStart=r.timeWindowStart,e.violations=r.violations,e.waitDuration=r.waitDuration,e.wait=r.wait)}}(a,this.stops):this.set({stops:a}),Xe(i,this.pointBarriers)?function(e,t){for(const r of e){const e=t.find(e=>e.objectId===r.objectId);e&&(e.addedCost=r.addedCost,e.barrierType=r.barrierType,e.costs=r.costs,e.curbApproach=r.curbApproach,e.fullEdge=r.fullEdge,e.geometry=r.geometry,e.name=r.name,e.sideOfEdge=r.sideOfEdge,e.sourceId=r.sourceId,e.sourceOid=r.sourceOid,e.status=r.status,e.symbol=r.symbol)}}(i,this.pointBarriers):this.set({pointBarriers:i}),Xe(n,this.polylineBarriers)?function(e,t){for(const r of e){const e=t.find(e=>e.objectId===r.objectId);e&&(e.barrierType=r.barrierType,e.costs=r.costs,e.geometry=r.geometry,e.name=r.name,e.scaleFactor=r.scaleFactor,e.symbol=r.symbol)}}(n,this.polylineBarriers):this.set({polylineBarriers:n}),Xe(s,this.polygonBarriers)?function(e,t){for(const r of e){const e=t.find(e=>e.objectId===r.objectId);e&&(e.barrierType=r.barrierType,e.costs=r.costs,e.geometry=r.geometry,e.name=r.name,e.scaleFactor=r.scaleFactor,e.symbol=r.symbol)}}(s,this.polygonBarriers):this.set({polygonBarriers:s}),this.set({checksum:t}),this._set("directionLines",r),this._set("directionPoints",o),this._set("routeInfo",l),null!=l.geometry&&(this.spatialReference=l.geometry.spatialReference)}_getNetworkFeatures(e,t,r,o){var i,a,u,p;const d=rt(e)?e.layers:null===(i=e.featureCollection)||void 0===i?void 0:i.layers,c=null===d||void 0===d?void 0:d.find(e=>e.layerDefinition.name===t);if(null==c)return new l.A;const{layerDefinition:y,popupInfo:v,featureSet:m}=c,f=y.drawingInfo.renderer,{features:h}=m,w=null!==(a=null!==(u=null!==(p=m.spatialReference)&&void 0!==p?p:y.spatialReference)&&void 0!==u?u:y.extent.spatialReference)&&void 0!==a?a:T.KK,g=f&&(0,U.L)(f),_=M.A.fromJSON(w),A=h.map(e=>{var o,i,l;const a=s.A.fromJSON(e);null!=a.geometry&&null!=e.geometry&&null==e.geometry.spatialReference&&(a.geometry.spatialReference=_);const u=r(a);return null!==(o=u.symbol)&&void 0!==o||(u.symbol=null!==(i=null===g||void 0===g?void 0:g.getSymbol(a))&&void 0!==i?i:this._getNetworkSymbol(t)),null!==(l=u.popupTemplate)&&void 0!==l||(u.popupTemplate=v&&n.A.fromJSON(v)),u});return o&&A.some(e=>{let{symbol:t}=e;return!t})&&o(A),new l.A(A)}_getNetworkSymbol(e){switch(e){case"Barriers":return this.defaultSymbols.pointBarriers;case"DirectionPoints":return this.defaultSymbols.directionPoints;case"DirectionLines":return this.defaultSymbols.directionLines;case"PolylineBarriers":return this.defaultSymbols.polylineBarriers;case"PolygonBarriers":return this.defaultSymbols.polygonBarriers;case"RouteInfo":return this.defaultSymbols.routeInfo;case"Stops":return null}}async _getServiceDescription(e,t,r){if(null!=this._cachedServiceDescription&&this._cachedServiceDescription.url===e)return this._cachedServiceDescription.serviceDescription;const o=await te(e,t,r);return this._cachedServiceDescription={serviceDescription:o,url:e},o}_setStopSymbol(e){if(!e||!e.length||!this.defaultSymbols.stops||e.every(e=>{let{symbol:t}=e;return!!t}))return;const{first:t,last:r,middle:o,unlocated:i,waypoint:s,break:n}=this.defaultSymbols.stops,l=e.map(e=>{let{sequence:t}=e;return t}).filter(e=>null!=e),a=e.length===l.length;if(!this.routeInfo&&!a||1===e.length)return void e.forEach((i,s)=>{switch(s){case 0:i.symbol=t;break;case e.length-1:i.symbol=r;break;default:i.symbol=o}});const u=Math.min(...l),p=Math.max(...l);for(const d of e)d.sequence!==u?d.sequence!==p?this.routeInfo&&"ok"!==d.status&&"not-located-on-closest"!==d.status?d.symbol=i:"waypoint"!==d.locationType?"break"!==d.locationType?d.symbol=o:d.symbol=n:d.symbol=s:d.symbol=r:d.symbol=t}_toRouteLayerSolution(e){var t,r,o,i,s,n,l;const{checksum:a,routeResults:u}=e,p=null===(t=u[0].stops)||void 0===t?void 0:t.map(e=>Ye.A.fromJSON(e.toJSON()));this._setStopSymbol(p);const d=new dt(p),c=new ut(null===(r=e.polygonBarriers)||void 0===r?void 0:r.map(e=>{const t=je.A.fromJSON(e.toJSON());return t.symbol=this.defaultSymbols.polygonBarriers,t})),y=new pt(null===(o=e.polylineBarriers)||void 0===o?void 0:o.map(e=>{const t=Oe.A.fromJSON(e.toJSON());return t.symbol=this.defaultSymbols.polylineBarriers,t})),v=new at(null===(i=e.pointBarriers)||void 0===i?void 0:i.map(e=>{const t=Ie.A.fromJSON(e.toJSON());return t.symbol=this.defaultSymbols.pointBarriers,t})),m=null===(s=u[0].route)||void 0===s?void 0:s.toJSON(),f=De.A.fromJSON(m);f.symbol=this.defaultSymbols.routeInfo;const h=new lt(null===(n=u[0].directionPoints)||void 0===n?void 0:n.features.map(e=>{const t=Re.A.fromJSON(e.toJSON());return t.symbol=this.defaultSymbols.directionPoints,t}));return{checksum:a,directionLines:new nt(null===(l=u[0].directionLines)||void 0===l?void 0:l.features.map(e=>{const t=Pe.A.fromJSON(e.toJSON());return t.symbol=this.defaultSymbols.directionLines,t})),directionPoints:h,pointBarriers:v,polygonBarriers:c,polylineBarriers:y,routeInfo:f,stops:d}}_writeDirectionLines(){return this._writeNetworkFeatures(this.directionLines,this.defaultSymbols.directionLines,"esriGeometryPolyline",Pe.A.fields,"DirectionLines","Direction Lines")}_writeDirectionPoints(){return this._writeNetworkFeatures(this.directionPoints,this.defaultSymbols.directionPoints,"esriGeometryPoint",Re.A.fields,"DirectionPoints","Direction Points")}_writeNetworkFeatures(e,t,r,o,i,s){if(null===e||void 0===e||!e.length)return null;const n=this.spatialReference.toJSON(),{fullExtent:l,maxScale:a,minScale:u}=this;return{featureSet:{features:e.toArray().map(e=>function(e){const{attributes:t,geometry:r,popupTemplate:o,symbol:i}=e.toGraphic().toJSON();return{attributes:t,geometry:r,popupInfo:o,symbol:i}}(e)),geometryType:r,spatialReference:n},layerDefinition:{capabilities:"Query,Update,Editing",drawingInfo:{renderer:{type:"simple",symbol:null!=t?t.toJSON():tt(r)}},extent:l.toJSON(),fields:o,geometryType:r,hasM:!1,hasZ:!1,maxScale:a,minScale:u,name:i,objectIdField:"ObjectID",spatialReference:n,title:s,type:"Feature Layer",typeIdField:""}}}_writePointBarriers(){return this._writeNetworkFeatures(this.pointBarriers,this.defaultSymbols.pointBarriers,"esriGeometryPoint",Ie.A.fields,"Barriers","Point Barriers")}_writePolygonBarriers(){return this._writeNetworkFeatures(this.polygonBarriers,this.defaultSymbols.polygonBarriers,"esriGeometryPolygon",je.A.fields,"PolygonBarriers","Polygon Barriers")}_writePolylineBarriers(){return this._writeNetworkFeatures(this.polylineBarriers,this.defaultSymbols.polylineBarriers,"esriGeometryPolyline",Oe.A.fields,"PolylineBarriers","Line Barriers")}_writeRouteInfo(){return this._writeNetworkFeatures(null!=this.routeInfo?new l.A([this.routeInfo]):null,this.defaultSymbols.routeInfo,"esriGeometryPolyline",De.A.fields,"RouteInfo","Route Details")}_writeStops(){var e,t,r;const o=this._writeNetworkFeatures(this.stops,null,"esriGeometryPoint",Ye.A.fields,"Stops","Stops");if(null==o)return null;const{stops:i}=this.defaultSymbols,s=null===i||void 0===i||null===(e=i.first)||void 0===e?void 0:e.toJSON(),n=null===i||void 0===i||null===(t=i.middle)||void 0===t?void 0:t.toJSON(),l=null===i||void 0===i||null===(r=i.last)||void 0===r?void 0:r.toJSON();return o.layerDefinition.drawingInfo.renderer={type:"uniqueValue",field1:"Sequence",defaultSymbol:n,uniqueValueInfos:[{value:"1",symbol:s,label:"First Stop"},{value:"".concat(this.stops.length),symbol:l,label:"Last Stop"}]},o}_populatePortalFields(e,t,r){var o,i,s,n,l,p,d,c,y,v,m,f,h,w,g,_,A;const b=null===(o=t.networkDataset)||void 0===o?void 0:o.networkAttributes,S=null!==(i=null===b||void 0===b?void 0:b.filter(e=>{let{usageType:t}=e;return"cost"===t}))&&void 0!==i?i:[],M=null!==(s=r.travelMode)&&void 0!==s?s:t.defaultTravelMode;if(null==M)return void u.A.getLogger(this).warn("route-layer:missing-travel-mode","The routing service must have a default travel mode or one must be specified in the route parameter.");const{timeAttributeName:T,distanceAttributeName:B}=M,Z=S.find(e=>{let{name:t}=e;return t===T}),N=S.find(e=>{let{name:t}=e;return t===B}),P=null!==(n=null!==(l=null===(p=r.travelMode)||void 0===p?void 0:p.impedanceAttributeName)&&void 0!==l?l:r.impedanceAttribute)&&void 0!==n?n:t.impedance,R=null===Z||void 0===Z?void 0:Z.units,I=null===N||void 0===N?void 0:N.units;if(!R||!I)throw new a.A("routelayer:unknown-impedance-units","the units of either the distance or time impedance are unknown");const j=null!==(d=r.directionsLanguage)&&void 0!==d?d:t.directionsLanguage,O=null!==(c=null!==(y=r.accumulateAttributes)&&void 0!==y?y:t.accumulateAttributeNames)&&void 0!==c?c:[],D=new Set(S.filter(e=>{let{name:t}=e;return t===T||t===B||t===P||null!=t&&O.includes(t)}).map(e=>{let{name:t}=e;return t})),C=e=>{for(const t in e)D.has(t)||delete e[t]};for(const a of e.pointBarriers){var L;null!=a.costs&&(a.addedCost=null!==(L=a.costs[P])&&void 0!==L?L:0,C(a.costs))}for(const a of e.polygonBarriers){var k;null!=a.costs&&(a.scaleFactor=null!==(k=a.costs[P])&&void 0!==k?k:1,C(a.costs))}for(const a of e.polylineBarriers){var J;null!=a.costs&&(a.scaleFactor=null!==(J=a.costs[P])&&void 0!==J?J:1,C(a.costs))}const{routeInfo:x}=e,{findBestSequence:E,preserveFirstStop:F,preserveLastStop:U,startTimeIsUTC:G,timeWindowsAreUTC:W}=r;x.analysisSettings=new ze.A({accumulateAttributes:O,directionsLanguage:j,findBestSequence:E,preserveFirstStop:F,preserveLastStop:U,startTimeIsUTC:G,timeWindowsAreUTC:W,travelMode:M}),x.totalDuration=it(null!==(v=null===(m=x.totalCosts)||void 0===m?void 0:m[T])&&void 0!==v?v:0,R),x.totalDistance=st(null!==(f=null===(h=x.totalCosts)||void 0===h?void 0:h[B])&&void 0!==f?f:0,I),x.totalLateDuration=it(null!==(w=null===(g=x.totalViolations)||void 0===g?void 0:g[T])&&void 0!==w?w:0,R),x.totalWaitDuration=it(null!==(_=null===(A=x.totalWait)||void 0===A?void 0:A[T])&&void 0!==_?_:0,R),null!=x.totalCosts&&C(x.totalCosts),null!=x.totalViolations&&C(x.totalViolations),null!=x.totalWait&&C(x.totalWait);for(const a of e.stops){var $,q,K,V,z,Y;null!=a.serviceCosts&&(a.serviceDuration=it(null!==($=a.serviceCosts[T])&&void 0!==$?$:0,R),a.serviceDistance=st(null!==(q=a.serviceCosts[B])&&void 0!==q?q:0,I),C(a.serviceCosts)),null!=a.cumulativeCosts&&(a.cumulativeDuration=it(null!==(K=a.cumulativeCosts[T])&&void 0!==K?K:0,R),a.cumulativeDistance=st(null!==(V=a.cumulativeCosts[B])&&void 0!==V?V:0,I),C(a.cumulativeCosts)),null!=a.violations&&(a.lateDuration=it(null!==(z=a.violations[T])&&void 0!==z?z:0,R),C(a.violations)),null!=a.wait&&(a.waitDuration=it(null!==(Y=a.wait[T])&&void 0!==Y?Y:0,R),C(a.wait))}}};(0,o._)([(0,f.MZ)({readOnly:!0,json:{read:!1,origins:{"portal-item":{write:{allowNull:!0,ignoreOrigin:!0}},"web-map":{write:{overridePolicy(){return{allowNull:!0,ignoreOrigin:null==this.portalItem}}}}}}})],ct.prototype,"_featureCollection",void 0),(0,o._)([(0,g.K)(["web-map","portal-item"],"_featureCollection")],ct.prototype,"writeFeatureCollectionWebmap",null),(0,o._)([(0,f.MZ)({readOnly:!0,json:{read:!1,origins:{"web-map":{write:{target:"type",overridePolicy(){return{ignoreOrigin:null!=this.portalItem}}}}}}})],ct.prototype,"_type",void 0),(0,o._)([(0,f.MZ)({type:String})],ct.prototype,"checksum",void 0),(0,o._)([(0,f.MZ)({nonNullable:!0,type:J})],ct.prototype,"defaultSymbols",void 0),(0,o._)([(0,f.MZ)({readOnly:!0})],ct.prototype,"directionLines",void 0),(0,o._)([(0,h.w)(["web-map","portal-item"],"directionLines",["layers","featureCollection.layers"])],ct.prototype,"readDirectionLines",null),(0,o._)([(0,f.MZ)({readOnly:!0})],ct.prototype,"directionPoints",void 0),(0,o._)([(0,h.w)(["web-map","portal-item"],"directionPoints",["layers","featureCollection.layers"])],ct.prototype,"readDirectionPoints",null),(0,o._)([(0,f.MZ)({readOnly:!0,json:{read:!1,origins:{"web-map":{write:{ignoreOrigin:!0}}}}})],ct.prototype,"featureCollectionType",void 0),(0,o._)([(0,f.MZ)({readOnly:!0})],ct.prototype,"fullExtent",null),(0,o._)([(0,f.MZ)({json:{origins:{"web-map":{name:"featureCollection.showLegend"}},write:!0}})],ct.prototype,"legendEnabled",void 0),(0,o._)([(0,f.MZ)({type:["show","hide"]})],ct.prototype,"listMode",void 0),(0,o._)([(0,f.MZ)({type:Number,nonNullable:!0,json:{write:!1}})],ct.prototype,"maxScale",void 0),(0,o._)([(0,h.w)(["web-map","portal-item"],"maxScale",["layers","featureCollection.layers"])],ct.prototype,"readMaxScale",null),(0,o._)([(0,f.MZ)({type:Number,nonNullable:!0,json:{write:!1}})],ct.prototype,"minScale",void 0),(0,o._)([(0,h.w)(["web-map","portal-item"],"minScale",["layers","featureCollection.layers"])],ct.prototype,"readMinScale",null),(0,o._)([(0,f.MZ)({type:["ArcGISFeatureLayer"],value:"ArcGISFeatureLayer"})],ct.prototype,"operationalLayerType",void 0),(0,o._)([(0,f.MZ)({nonNullable:!0,type:l.A.ofType(Ie.A)})],ct.prototype,"pointBarriers",void 0),(0,o._)([(0,h.w)(["web-map","portal-item"],"pointBarriers",["layers","featureCollection.layers"])],ct.prototype,"readPointBarriers",null),(0,o._)([(0,f.MZ)({nonNullable:!0,type:l.A.ofType(je.A)})],ct.prototype,"polygonBarriers",void 0),(0,o._)([(0,h.w)(["web-map","portal-item"],"polygonBarriers",["layers","featureCollection.layers"])],ct.prototype,"readPolygonBarriers",null),(0,o._)([(0,f.MZ)({nonNullable:!0,type:l.A.ofType(Oe.A)})],ct.prototype,"polylineBarriers",void 0),(0,o._)([(0,h.w)(["web-map","portal-item"],"polylineBarriers",["layers","featureCollection.layers"])],ct.prototype,"readPolylineBarriers",null),(0,o._)([(0,f.MZ)({readOnly:!0})],ct.prototype,"routeInfo",void 0),(0,o._)([(0,h.w)(["web-map","portal-item"],"routeInfo",["layers","featureCollection.layers"])],ct.prototype,"readRouteInfo",null),(0,o._)([(0,f.MZ)({type:M.A})],ct.prototype,"spatialReference",void 0),(0,o._)([(0,h.w)(["web-map","portal-item"],"spatialReference",["layers","featureCollection.layers"])],ct.prototype,"readSpatialReference",null),(0,o._)([(0,f.MZ)({nonNullable:!0,type:l.A.ofType(Ye.A)})],ct.prototype,"stops",void 0),(0,o._)([(0,h.w)(["web-map","portal-item"],"stops",["layers","featureCollection.layers"])],ct.prototype,"readStops",null),(0,o._)([(0,f.MZ)()],ct.prototype,"title",null),(0,o._)([(0,f.MZ)({readOnly:!0,json:{read:!1}})],ct.prototype,"type",void 0),(0,o._)([(0,f.MZ)()],ct.prototype,"url",null),ct=(0,o._)([(0,w.$)("esri.layers.RouteLayer")],ct);const yt=ct},29067:(e,t,r)=>{r.d(t,{K:()=>o});const o={type:String,json:{read:{source:"token"},write:{target:"token"}}}},64693:(e,t,r)=>{r.d(t,{A:()=>p});var o=r(35143),i=r(45802),s=r(42553),n=r(46053),l=(r(81806),r(76460),r(47249),r(85842));const a=new i.J({esriJobMessageTypeInformative:"informative",esriJobMessageTypeProcessDefinition:"process-definition",esriJobMessageTypeProcessStart:"process-start",esriJobMessageTypeProcessStop:"process-stop",esriJobMessageTypeWarning:"warning",esriJobMessageTypeError:"error",esriJobMessageTypeEmpty:"empty",esriJobMessageTypeAbort:"abort"});let u=class extends s.A{constructor(e){super(e),this.description=null,this.type=null}};(0,o._)([(0,n.MZ)({type:String,json:{write:!0}})],u.prototype,"description",void 0),(0,o._)([(0,n.MZ)({type:String,json:{read:a.read,write:a.write}})],u.prototype,"type",void 0),u=(0,o._)([(0,l.$)("esri.rest.support.GPMessage")],u);const p=u}}]);
//# sourceMappingURL=5534.6ffc464b.chunk.js.map