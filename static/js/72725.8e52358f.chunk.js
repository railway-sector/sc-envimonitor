"use strict";(self.webpackChunksc_envimonitor=self.webpackChunksc_envimonitor||[]).push([[72725],{2522:(e,t,r)=>{r.d(t,{P:()=>n});var s=r(6326),i=(r(76460),r(81806),r(47249),r(50076),r(87990)),o=r(49853);let n=class extends o.a{};n=(0,s.Cg)([(0,i.$)("esri.views.3d.analysis.AnalysisView3D")],n)},10294:(e,t,r)=>{r.d(t,{S:()=>l});var s=r(15941),i=r(31633),o=r(20664),n=r(13927);function l(e,t,r){const l=function(e,t,r,s){const l=(e=>!Array.isArray(e[0]))(t)?(e,r)=>t[3*e+r]:(e,r)=>t[e][r],a=s?(0,i.GA)(s)/(0,i.G9)(s):1;return(0,n.lU)(e,(e,t)=>(0,o.j)(e,l(t,0)*a,l(t,1)*a,l(t,2)),r)}(a,e,t,r)?(0,n.Qj)(a):[0,0,1];return Math.abs(l[2])>Math.cos((0,s.kU)(80))?2:Math.abs(l[1])>Math.abs(l[0])?1:0}const a=(0,n.vt)()},14835:(e,t,r)=>{r.d(t,{w:()=>E});var s=r(53986),i=r(6326),o=r(69539),n=r(91967),l=r(59784),a=r(46053),c=(r(81806),r(76460),r(47249),r(87990)),h=r(35925);const u=["colors"],d=["colors"],p=["colors"],_=["colors"],v=["colors"],g=["colors"],y=.3;function f(e,t){t&&Object.assign(e,t)}class m{constructor(e){this.height=90,this.coneHeight=40,this.coneWidth=23,this.width=3,this.renderOccluded=16,this.color=e.accent}}class w{constructor(e){let{colors:t}=e,r=(0,s.A)(e,u);this.size=11,this.outlineSize=1,this.collisionPadding=9,this.color=t.accent,this.outlineColor=t.outline,this.renderOccluded=16,this.hoverOutlineColor=t.selectedOutline,f(this,r)}applyColor(e){this._apply(this.color,e)}applyOutline(e){this._apply(this.outlineColor,e)}applyHoverOutline(e){this._apply(this.hoverOutlineColor,e)}_apply(e,t){t.setParameters({color:(0,l.QP)(e),renderOccluded:this.renderOccluded})}}class C{constructor(e){let{colors:t}=e,r=(0,s.A)(e,d);this.size=40,this.height=.2,this.offset=.25,this.collisionPadding=2,this.renderOccluded=2,this.minSquaredEdgeLength=900,this.color=(0,l._L)(t.accent,.5),this.hoverColor=t.accent,f(this,r)}applyColor(e){this._apply(this.color,e)}applyHover(e){this._apply(this.hoverColor,e)}_apply(e,t){t.setParameters({color:(0,l.QP)(e),renderOccluded:this.renderOccluded})}}class R{constructor(e){this.vertex=new w({colors:e,color:e.accent,outlineColor:e.outline}),this.edge=new w({colors:e,color:(0,l.Vl)((0,l._L)(e.accent,2/3),.5),outlineColor:(0,l._L)(e.outline,.5),size:8,collisionPadding:8}),this.selected=new w({colors:e,color:e.selected,outlineColor:e.outline}),this.edgeOffset=new C({colors:e})}}class b{constructor(e){let{colors:t}=e,r=(0,s.A)(e,p);this.width=1.5,this.stipplePattern=(0,h.wk)(3.3),this.falloff=0,this.innerWidth=1.5,this.renderOccluded=4,this.color=t.selected,this.stippleOffColor=t.outline,this.innerColor=t.selected,f(this,r)}apply(e){e.color=(0,l.QP)(this.color),e.width=this.width,e.stipplePattern=this.stipplePattern,e.stippleOffColor=(0,l.QP)(this.stippleOffColor),e.falloff=this.falloff,e.innerWidth=this.innerWidth,e.innerColor=(0,l.QP)(this.innerColor),e.renderOccluded=this.renderOccluded}}class O{constructor(e){let{colors:t}=e,r=(0,s.A)(e,_);this.size=4,this.outlineSize=1,this.shape="square",this.color=t.selected,this.outlineColor=t.outline,f(this,r)}apply(e){e.color=(0,l.QP)(this.color),e.size=this.size,e.outlineSize=this.outlineSize,e.outlineColor=(0,l.QP)(this.outlineColor),e.primitive=this.shape}}class D{constructor(e){let{colors:t}=e,r=(0,s.A)(e,v);this.innerWidth=1,this.glowWidth=8,this.glowFalloff=8,this.globalAlpha=y,this.globalAlphaContrastBoost=1.5,this.radius=3,this.innerColor=t.selected,this.glowColor=t.accent,this.heightFillColor=t.accent,f(this,r)}apply(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const r={glowColor:o.A.toUnitRGB(this.glowColor),glowFalloff:this.glowFalloff,glowWidth:this.glowWidth,innerColor:o.A.toUnitRGB(this.innerColor),innerWidth:this.innerWidth,globalAlpha:this.globalAlpha*t*this.glowColor.a,globalAlphaContrastBoost:this.globalAlphaContrastBoost,intersectsLineRadius:this.radius};"style"in e?e.style=r:e.laserlineStyle=r}}class A{constructor(e){this.outline=new b({colors:e,color:e.stippleOff,renderOccluded:8,stippleOffColor:e.stippleOn,innerWidth:0}),this.staged=new b({colors:e,color:e.stippleOn,renderOccluded:8,innerColor:e.stagedSolid,stippleOffColor:e.stippleOff}),this.shadowStyle=new D({colors:e,globalAlpha:y,glowColor:e.accent,glowFalloff:8,glowWidth:8,innerColor:e.selected,innerWidth:1})}}class M{constructor(e){this.outline=new O({colors:e,color:e.selected,outlineColor:e.outline,outlineSize:1,shape:"circle",size:4}),this.shadowStyle=new D({colors:e,globalAlpha:y,glowColor:e.accent,glowFalloff:1.5,glowWidth:6,innerColor:e.selected,innerWidth:1,radius:2})}}class P extends b{constructor(e){let{colors:t}=e,r=(0,s.A)(e,g);super({colors:t}),this.extensionType=2,f(this,r)}}class G{constructor(e){this.laserlineAlphaMultiplier=1.5,this.heightPlaneAngleCutoff=20,this.lineObjects=new A(e),this.pointObjects=new M(e),this.heightPlane=new D({colors:e,globalAlpha:y,glowColor:e.accent,glowFalloff:8,glowWidth:8,innerColor:e.selected,innerWidth:1}),this.heightBox=new D({colors:e,globalAlpha:y,glowColor:e.accent,glowFalloff:8,glowWidth:8,innerColor:e.selected,innerWidth:0,heightFillColor:e.accent}),this.zVerticalLine=new P({colors:e,color:(0,l._L)(e.accent,.5),falloff:2,innerColor:(0,l._L)(e.selected,0),renderOccluded:4,stipplePattern:null,width:5,extensionType:2})}}let E=class extends n.A{constructor(e){super(e)}get colors(){const e=this.getTheme().accentColor,t=e.a;return{accent:e,contrast:(0,l.bJ)(e),selected:o.A.fromArray([255,255,255,t]),selectedOutline:o.A.fromArray([255,255,255,t]),staged:o.A.fromArray([12,207,255,t]),stagedSolid:o.A.fromArray([12,207,255,1]),outline:o.A.fromArray([0,0,0,.5*t]),stippleOn:o.A.fromArray([255,255,255,1]),stippleOff:o.A.fromArray([0,0,0,.5])}}get visualElements(){return new G(this.colors)}get manipulators(){return new R(this.colors)}get zManipulator(){return new m(this.colors)}};(0,i.Cg)([(0,a.MZ)()],E.prototype,"colors",null),(0,i.Cg)([(0,a.MZ)()],E.prototype,"visualElements",null),(0,i.Cg)([(0,a.MZ)()],E.prototype,"manipulators",null),(0,i.Cg)([(0,a.MZ)()],E.prototype,"zManipulator",null),(0,i.Cg)([(0,a.MZ)()],E.prototype,"getTheme",void 0),E=(0,i.Cg)([(0,c.$)("esri.views.3d.interactive.editingTools.settings")],E)},29889:(e,t,r)=>{r.d(t,{A:()=>c,C:()=>a});var s=r(45308),i=r(44815),o=r(99785),n=r(67425),l=r(1599);function a(e,t,r,s){const l="polygon"===e.type?1:0,a="polygon"===e.type?e.rings:e.paths,{position:c,outlines:u}=(0,o.oR)(a,!!e.hasZ,l,e.spatialReference),d=(0,i.jh)(c.length),p=(0,n.au)(c,e.spatialReference,0,d,0,c,0,c.length/3,t,r,s),_=null!=p;return{lines:_?h(u,c,d):[],projectionSuccess:_,sampledElevation:p}}function c(e,t){const r="polygon"===e.type?1:0,i="polygon"===e.type?e.rings:e.paths,{position:n,outlines:a}=(0,o.oR)(i,!1,r),c=(0,s.projectBuffer)(n,e.spatialReference,0,n,t,0);for(let s=2;s<n.length;s+=3)n[s]=l.bi;return{lines:c?h(a,n):[],projectionSuccess:c}}function h(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const s=new Array;for(const{index:o,count:n}of e){if(n<=1)continue;const e=3*o,l=3*n;s.push({position:(0,i.l5)(t,3*o,3*n),mapPositions:null!=r?(0,i.l5)(r,e,l):void 0})}return s}},35925:(e,t,r)=>{r.d(t,{Xq:()=>l,wk:()=>n});const s={dash:[4,3],dot:[1,3],"long-dash":[8,3],"short-dash":[4,1],"short-dot":[1,1]},i={dash:s.dash,"dash-dot":[...s.dash,...s.dot],dot:s.dot,"long-dash":s["long-dash"],"long-dash-dot":[...s["long-dash"],...s.dot],"long-dash-dot-dot":[...s["long-dash"],...s.dot,...s.dot],none:null,"short-dash":s["short-dash"],"short-dash-dot":[...s["short-dash"],...s["short-dot"]],"short-dash-dot-dot":[...s["short-dash"],...s["short-dot"],...s["short-dot"]],"short-dot":s["short-dot"],solid:null},o=8;function n(e){return{pattern:[e,e],pixelRatio:2}}function l(e){return"style"===(null===e||void 0===e?void 0:e.type)?function(e){return null!=e?function(e,t){return null==e?e:{pattern:e.slice(),pixelRatio:t}}(i[e],o):null}(e.style):null}},72725:(e,t,r)=>{r.r(t),r.d(t,{default:()=>$});var s=r(6326),i=r(46053),o=(r(81806),r(76460),r(47249),r(87990)),n=r(2522),l=r(80674),a=r(85361),c=r(53084),h=r(30726),u=r(68134),d=r(31633),p=r(20664),_=r(9392),v=r(34111),g=r(95925),y=r(62078),f=r(88220),m=r(96342),w=r(92690),C=r(80635),R=r(40615);let b=class extends R.Q{constructor(){super(...arguments),this.type="scene",this.numSamplesForPreview=50,this.numSamplesPerChunk=25,this._getStableElevationDependencies=(0,l.f)(()=>{var e;const t=this._view;return t?{view:t,stationary:t.stationary,geometry:null===(e=this.controller)||void 0===e?void 0:e.analysis.geometry,visibleLayerIds:this._getStableLayerIds(),maxIntersectionDistance:this._maxIntersectionDistance,intersectOptions:this._intersectOptions,spatialReference:this._getStableSpatialReference()}:null},c.gh),this._getStableSpatialReference=(0,l.f)(()=>{var e;return null===(e=this._view)||void 0===e?void 0:e.spatialReference},h.CM),this._getStableLayerIds=(0,l.f)(()=>(0,C.Y)(this._view),c.gh),this._getStablePointCloudLayers=(0,l.f)(()=>{const e=this._view;return e?e.allLayerViews.toArray().filter(e=>{var t;return"point-cloud"===(null===(t=e.layer)||void 0===t?void 0:t.type)}).map(e=>e.layer):[]},c.gh),this._vecA=(0,_.vt)(),this._vecB=(0,_.vt)(),this._ray=(0,g.vt)()}get minDemResolution(){var e;const t=this._view;if(!t)return null;const r=null===(e=t.pointsOfInterest)||void 0===e||null===(e=e.focus)||void 0===e?void 0:e.worldUnitsPerContentPixel;return null==r?null:r*(0,d.G9)(t.spatialReference)}initialize(){const e=()=>this.onInvalidate(this);return this.addHandles([(0,u.wB)(()=>this._queryElevationDependencies,e,u.OH),this.controller.onElevationChange(e)])}async queryElevation(e,t){let{noDataValue:r,signal:s}=t;const i=this._queryElevationDependencies;if(null==i)throw new Error("".concat(this.declaredClass,": no dependencies"));const o=this._intersector;if(null==o)throw new Error("".concat(this.declaredClass,": no view"));const{intersectOptions:n,view:l,spatialReference:a}=i,c=l.renderCoordsHelper,h=l.sceneIntersectionHelper,u=this._vecA,d=this._vecA,_=this._vecB,v=this._ray;if(!a)return{geometry:e,noDataValue:r};const f=await y.q.fromGeometry(e).project(a,s);if(!f)return{geometry:e,noDataValue:r};const m=f.coordinates,w=m.length;for(let y=0;y<w;++y){var C;const e=m[y];(0,p.j)(_,e.x,e.y,null!==(C=e.z)&&void 0!==C?C:0),c.toRenderCoords(_,a,_),c.setAltitude(u,2e5,_);const t=(0,g.Cr)(u,_,v);h.computeIntersection(t,o,!0,n);const s=O(i,o.results.all);s?(s.getIntersectionPoint(d),c.fromRenderCoords(d,d,a),e.z=d[2]):e.z=r}return{geometry:f.export(),noDataValue:r}}get _queryElevationDependencies(){return this._getStableElevationDependencies()}get _intersectOptions(){const e=this._view;if(!e||e.destroyed)return{};const{include:t,exclude:r}=this.profile;return(0,f.ZD)(e,{include:t,exclude:[...this._pointCloudLayers,...(0,a.xZ)(r)?r:r?[r]:[]]})}get _pointCloudLayers(){return this._getStablePointCloudLayers()}get _view(){const e=this.controller.view;return"3d"===e.type?e:null}get _maxIntersectionDistance(){const e=this._view;return null!==e&&void 0!==e&&e.renderCoordsHelper?(0,v.tO)(e.spatialReference).radius/e.renderCoordsHelper.unitInMeters:Number.POSITIVE_INFINITY}get _intersector(){const e=this._view;if(!e)return null;const t=new m.n(e.state.viewingMode),r=t.options;return r.hud=!1,r.invisibleTerrain=!1,r.backfacesTerrain=!1,r.selectionMode=!1,r.store=2,t}};function O(e,t){let{intersectOptions:r,maxIntersectionDistance:s,view:i}=e;const o=r.graphics,n=!((null===o||void 0===o||!o.include)&&(null===o||void 0===o||!o.exclude));for(const l of t)if(l.withinDistance(s)){if(n){const e=(0,w.Gy)(l,i);if(null!=e&&!(0,f.tW)(o,e))continue}return l}return null}(0,s.Cg)([(0,i.MZ)({readOnly:!0})],b.prototype,"minDemResolution",null),(0,s.Cg)([(0,i.MZ)()],b.prototype,"_queryElevationDependencies",null),(0,s.Cg)([(0,i.MZ)()],b.prototype,"_intersectOptions",null),(0,s.Cg)([(0,i.MZ)()],b.prototype,"_pointCloudLayers",null),(0,s.Cg)([(0,i.MZ)()],b.prototype,"_view",null),(0,s.Cg)([(0,i.MZ)()],b.prototype,"_maxIntersectionDistance",null),(0,s.Cg)([(0,i.MZ)()],b.prototype,"_intersector",null),b=(0,s.Cg)([(0,o.$)("esri.views.3d.analysis.ElevationProfile.ElevationProfileLineSceneComputation")],b);var D=r(91967),A=r(43927),M=r(54901),P=r(12482),G=r(14835),E=r(73074),V=r(73520);let x=class extends D.A{constructor(e){super(e),this._visualElementHandle=null}initialize(){this._settings=new G.w({getTheme:()=>this.view.effectiveTheme}),this.addHandles((0,V.V)({analysisViewData:this.analysisViewData,remove:()=>this._remove(),show:e=>this._show(e)}))}destroy(){this._remove()}get updating(){return!1}_remove(){this._visualElementHandle=(0,h.xt)(this._visualElementHandle)}_show(e){this._remove();const{view:t}=this,r=new E.P({view:t,geometry:this.analysisViewData.analysis.geometry,attached:!1,renderOccluded:8,isDecoration:!0}),s=[(0,u.wB)(()=>this.analysisViewData.analysis.elevationInfo,e=>{r.elevationInfo=e,r.isDraped="on-the-ground"===(0,P.wF)(!0,e)},u.pc),(0,u.wB)(()=>this.analysisViewData.analysis.geometry,e=>{r.geometry=e}),t.maskOccludee(e),(0,M.DQ)(r)];this._settings.visualElements.lineObjects.outline.apply(r),r.attached=!0,this._visualElementHandle=(0,M.vE)(s)}};(0,s.Cg)([(0,i.MZ)({constructOnly:!0})],x.prototype,"view",void 0),(0,s.Cg)([(0,i.MZ)({constructOnly:!0})],x.prototype,"analysisViewData",void 0),(0,s.Cg)([(0,i.MZ)()],x.prototype,"updating",null),x=(0,s.Cg)([(0,o.$)("esri.views.3d.analysis.ElevationProfile.ElevationProfileGeometryVisualization3D")],x);var S=r(69539),Z=r(79468),j=r(55855),z=r(45564),F=r(55980);let I=class extends D.A{constructor(e){super(e),this._updateGeometryThrottled=(0,Z.n)(e=>{if(!e)return;const{samples:t,spatialReference:r}=e,s=null!=t&&t.length>0;this._visualElement.geometry=s?(0,F.T)(t,r):null},(0,z.zj)().profileLinesUpdateThrottleMillis)}initialize(){this._visualElement=new E.P({view:this.view,elevationInfo:P.qt,innerWidth:0,innerColor:(0,j.fA)(0,0,0,0),width:3,falloff:0,renderOccluded:16,isDecoration:!0}),this.addHandles([(0,u.wB)(()=>{var e;return{color:null===(e=this._result)||void 0===e?void 0:e.computation.profile.color,visible:this._effectiveVisible}},e=>{let{color:t,visible:r}=e;t&&(this._visualElement.color=(0,j.ci)(S.A.toUnitRGBA(t))),this._visualElement.visible=r},u.pc),(0,u.wB)(()=>this.analysisViewData.analysis.geometry,()=>{this._visualElement.geometry=null},u.pc),(0,u.wB)(()=>this._geometryUpdateParameters,e=>this._updateGeometryThrottled(e),u.pc),this._updateGeometryThrottled])}destroy(){this._visualElement.destroy()}get updating(){return this._updateGeometryThrottled.hasPendingUpdates()}get _result(){return this.getResult()}get _effectiveVisible(){const{analysisViewData:e,_result:t}=this;return e.visible&&null!=t&&t.available&&t.computation.profile.viewOptions.lineVisible}get _geometryUpdateParameters(){var e;return this._effectiveVisible&&1!==this.analysisViewData.progress?null:{samples:null===(e=this._result)||void 0===e?void 0:e.samples,spatialReference:this.view.spatialReference}}};(0,s.Cg)([(0,i.MZ)()],I.prototype,"view",void 0),(0,s.Cg)([(0,i.MZ)()],I.prototype,"analysisViewData",void 0),(0,s.Cg)([(0,i.MZ)()],I.prototype,"getResult",void 0),(0,s.Cg)([(0,i.MZ)()],I.prototype,"updating",null),(0,s.Cg)([(0,i.MZ)()],I.prototype,"_result",null),(0,s.Cg)([(0,i.MZ)()],I.prototype,"_effectiveVisible",null),(0,s.Cg)([(0,i.MZ)()],I.prototype,"_geometryUpdateParameters",null),I=(0,s.Cg)([(0,o.$)("esri.views.3d.analysis.ElevationProfile.ElevationProfileLineVisualization3D")],I);var W=r(94656);let T=class extends D.A{constructor(e){super(e)}initialize(){const{view:e,analysisViewData:t}=this;this._hoveredPointsVisualization=new W.n({view:e,analysisViewData:t}),this._geometryVisualization=new x({view:e,analysisViewData:t}),this._lineVisualizations=(0,A.L)(()=>this.analysisViewData.analysis.profiles,r=>new I({view:e,analysisViewData:t,getResult:()=>t.results.find(e=>e.computation.profile===r)}))}destroy(){this._geometryVisualization.destroy(),this._hoveredPointsVisualization.destroy(),this._lineVisualizations.destroy()}get updating(){return this._geometryVisualization.updating||this._lineVisualizations.some(e=>e.updating)}};(0,s.Cg)([(0,i.MZ)()],T.prototype,"view",void 0),(0,s.Cg)([(0,i.MZ)()],T.prototype,"analysisViewData",void 0),(0,s.Cg)([(0,i.MZ)()],T.prototype,"updating",null),T=(0,s.Cg)([(0,o.$)("esri.views.3d.analysis.ElevationProfile.ElevationProfileVisualization3D")],T);var k=r(43825),L=r(82185),H=r(62068),B=r(49636),U=r(71143);let q=class extends n.P{constructor(e){super(e),this.type="elevation-profile-view-3d",this.analysis=null,this.hoveredPosition=null}initialize(){const{analysis:e,view:t}=this;this._controller=new k.V({analysis:e,analysisViewData:this,view:t,computationFactory:{create:e=>{switch(e.profile.type){case"ground":return new L.R(e);case"input":return new H.o(e);case"query":return new B.s(e);case"scene":return new b(e)}}}}),this._visualization=new T({view:t,analysisViewData:this}),this._sketchTool=new U.R({view:t,analysisViewData:this})}destroy(){var e,t,r;null!==(e=this._controller)&&void 0!==e&&e.destroy(),null!==(t=this._visualization)&&void 0!==t&&t.destroy(),null===(r=this._sketchTool)||void 0===r||r.destroy()}get effectiveDisplayUnits(){var e,t;return null!==(e=null===(t=this._controller)||void 0===t?void 0:t.effectiveDisplayUnits)&&void 0!==e?e:{distance:"meters",elevation:"meters"}}get error(){var e;return null===(e=this._controller)||void 0===e?void 0:e.error}get hoveredPoints(){var e,t;return null!==(e=null===(t=this._controller)||void 0===t?void 0:t.hoveredPoints)&&void 0!==e?e:[]}get interactive(){return super.interactive}set interactive(e){super.interactive=e}get progress(){var e,t;return null!==(e=null===(t=this._controller)||void 0===t?void 0:t.progress)&&void 0!==e?e:0}get results(){var e,t;return null!==(e=null===(t=this._controller)||void 0===t?void 0:t.results)&&void 0!==e?e:[]}get statistics(){var e;return null===(e=this._controller)||void 0===e?void 0:e.statistics}get updating(){var e,t,r;return!0===(null===(e=this._controller)||void 0===e?void 0:e.updating)||!0===(null===(t=this._visualization)||void 0===t?void 0:t.updating)||!0===(null===(r=this._sketchTool)||void 0===r?void 0:r.updating)}get visible(){return super.visible}set visible(e){super.visible=e}get sketchGraphic(){var e;return null===(e=this._sketchTool)||void 0===e?void 0:e.sketchGraphic}get toolState(){var e,t;return null!==(e=null===(t=this._sketchTool)||void 0===t?void 0:t.state)&&void 0!==e?e:"idle"}place(e){return this._sketchTool.place(e)}pickFeature(e){return this._sketchTool.pickFeature(e)}};(0,s.Cg)([(0,i.MZ)({readOnly:!0})],q.prototype,"type",void 0),(0,s.Cg)([(0,i.MZ)({constructOnly:!0,nonNullable:!0})],q.prototype,"analysis",void 0),(0,s.Cg)([(0,i.MZ)({readOnly:!0})],q.prototype,"effectiveDisplayUnits",null),(0,s.Cg)([(0,i.MZ)({readOnly:!0})],q.prototype,"error",null),(0,s.Cg)([(0,i.MZ)()],q.prototype,"hoveredPosition",void 0),(0,s.Cg)([(0,i.MZ)()],q.prototype,"hoveredPoints",null),(0,s.Cg)([(0,i.MZ)({readOnly:!0})],q.prototype,"progress",null),(0,s.Cg)([(0,i.MZ)({readOnly:!0})],q.prototype,"results",null),(0,s.Cg)([(0,i.MZ)({readOnly:!0})],q.prototype,"statistics",null),(0,s.Cg)([(0,i.MZ)({readOnly:!0})],q.prototype,"updating",null),(0,s.Cg)([(0,i.MZ)()],q.prototype,"sketchGraphic",null),(0,s.Cg)([(0,i.MZ)()],q.prototype,"toolState",null),(0,s.Cg)([(0,i.MZ)()],q.prototype,"_controller",void 0),(0,s.Cg)([(0,i.MZ)()],q.prototype,"_visualization",void 0),(0,s.Cg)([(0,i.MZ)()],q.prototype,"_sketchTool",void 0),q=(0,s.Cg)([(0,o.$)("esri.views.3d.analysis.ElevationProfileAnalysisView3D")],q);const $=q},73074:(e,t,r)=>{r.d(t,{P:()=>C});var s=r(54099),i=r(20664),o=r(9392),n=r(43047),l=r(55855),a=r(45308),c=r(42294),h=r(44815),u=r(18117),d=r(12482),p=r(731),_=r(85746),v=r(1307),g=r(49296),y=r(70667),f=r(29889),m=r(442),w=r(52479);class C extends _.X{constructor(e){var t;super(e),this._attachmentOrigin=(0,u.TH)(0,0,0,null),this._attachmentOriginDirty=!0,this.events=new s.bk,this._geometry=null,this._width=1,this._color=(0,l.fA)(1,0,1,1),this._innerWidth=0,this._innerColor=(0,l.fA)(1,1,1,1),this._stipplePattern=null,this._stippleOffColor=null,this._falloff=0,this._elevationInfo=null,this._laserlineStyle=null,this._laserlineEnabled=!1,this._renderOccluded=8,this._attachmentOrigin.spatialReference=e.view.spatialReference,this._laserline=new v.o({view:e.view,isDecoration:e.isDecoration}),this.applyProperties(e),this.attached=null===(t=e.attached)||void 0===t||t}destroy(){this._laserline.destroy(),super.destroy()}createObject3DResourceFactory(e){return{view:e,createResources:e=>this._createObject3DResources(e),destroyResources:R,recreateGeometry:(e,t)=>{e.geometries.length=0,this._recreateGeometry(t,e.material,e.geometries)},forEachMaterial:(e,t)=>t(e.material)}}createDrapedResourceFactory(e){return{view:e,createResources:()=>this._createDrapedResources(),destroyResources:R,recreateGeometry:e=>{e.geometries=this._createRenderGeometriesDraped(e.material),this._attachmentOriginChanged()},forEachMaterial:(e,t)=>t(e.material)}}get _laserlineAttached(){return this.attached&&this.visible&&null!=this._laserlineStyle&&!this.isDraped&&this.laserlineEnabled}onAttachedChange(e){this._laserline.attached=this._laserlineAttached,e&&this._attachmentOriginChanged()}get isDecoration(){return this._isDecoration}set isDecoration(e){this._isDecoration=e,this._updateMaterial()}get geometry(){return this._geometry}set geometry(e){const t=this._isClosed;this._geometry=e,this.recreateGeometry(),t!==this._isClosed&&this._updateMaterial()}get width(){return this._width}set width(e){e!==this._width&&(this._width=e,this._updateMaterial())}get color(){return this._color}set color(e){(0,n.a)(e,this._color)||((0,n.d)(this._color,e),this._updateMaterial())}get innerWidth(){return this._innerWidth}set innerWidth(e){e!==this._innerWidth&&(this._innerWidth=e,this._updateMaterial())}get innerColor(){return this._innerColor}set innerColor(e){(0,n.a)(e,this._innerColor)||((0,n.d)(this._innerColor,e),this._updateMaterial())}get stipplePattern(){return this._stipplePattern}set stipplePattern(e){const t=null!=e!=(null!=this._stipplePattern);this._stipplePattern=e,t?this.recreate():this._updateMaterial()}get stippleOffColor(){return this._stippleOffColor}set stippleOffColor(e){e&&this._stippleOffColor&&(0,n.a)(e,this._stippleOffColor)||(this._stippleOffColor=e?(0,l.o8)(e):null,this._updateMaterial())}get falloff(){return this._falloff}set falloff(e){e!==this._falloff&&(this._falloff=e,this._updateMaterial())}get elevationInfo(){return this._elevationInfo}set elevationInfo(e){this._elevationInfo=e,this.recreateGeometry()}get laserlineStyle(){return this._laserlineStyle}set laserlineStyle(e){this._laserlineStyle=e,this._laserline.attached=this._laserlineAttached,null!=e&&(this._laserline.style=e)}get laserlineEnabled(){return this._laserlineEnabled}set laserlineEnabled(e){this._laserlineEnabled!==e&&(this._laserlineEnabled=e,this._laserline.attached=this._laserlineAttached)}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateMaterial())}get attachmentOrigin(){var e;if(!this._attachmentOriginDirty)return this._attachmentOrigin;const t=null===(e=this.object3dResources.resources)||void 0===e?void 0:e.geometries;if(!t||0===t.length)return null;(0,i.j)(O,0,0,0);let r=0;for(const s of t)s.computeAttachmentOrigin(b)&&((0,i.g)(O,O,b),r++);return 0===r?null:((0,i.h)(O,O,1/r),this.view.renderCoordsHelper.fromRenderCoords(O,this._attachmentOrigin),this._attachmentOriginDirty=!1,this._attachmentOrigin)}_updateMaterial(){var e,t;null!==(e=this.object3dResources.resources)&&void 0!==e&&e.material.setParameters(this._materialParameters),null===(t=this.drapedResources.resources)||void 0===t||t.material.setParameters(this._materialParameters)}get _isClosed(){return null!=this.geometry&&"polygon"===this.geometry.type}get _materialParameters(){return{width:this._width,color:this._color,stippleOffColor:this._stippleOffColor,stipplePattern:this._stipplePattern,stipplePreferContinuous:!1,isClosed:this._isClosed,falloff:this._falloff,innerColor:this._innerColor,innerWidth:this._innerWidth,join:"round",hasPolygonOffset:!0,renderOccluded:this._normalizedRenderOccluded,isDecoration:this.isDecoration}}get _normalizedRenderOccluded(){return this.isDraped&&8===this._renderOccluded?4:this._renderOccluded}_recreateGeometry(e,t,r){this._createRenderGeometries(t,r);for(const s of r)e.addGeometry(s);this._attachmentOriginChanged()}_attachmentOriginChanged(){this._attachmentOriginDirty=!0,this.events.emit("attachment-origin-changed")}_createObject3DResources(e){const t=new w.W(this._materialParameters,this.view.state.isGlobal),r=new Array;return this._recreateGeometry(e,t,r),{material:t,geometries:r}}_createDrapedResources(){const e=new w.W(this._materialParameters,this.view.state.isGlobal);return{material:e,geometries:this._createRenderGeometriesDraped(e)}}_createRenderGeometriesDraped(e){const{geometry:t,view:r}=this,s=r.basemapTerrain.spatialReference;return null==t||null==s?[]:(0,f.A)(t,s).lines.map(t=>{let{position:i}=t;const o={overlayInfo:{spatialReference:s,renderCoordsHelper:r.renderCoordsHelper},attributeData:{position:i},removeDuplicateStartEnd:this._isClosed};return new m.$((0,y.te)(e,o))})}calculateMapBounds(e){if(null==this.object3dResources.resources)return!1;const t=this.view.renderCoordsHelper;for(const r of this.object3dResources.resources.geometries){const s=r.attributes.get("position"),i=(0,h.jh)(s.data.length);(0,a.projectBuffer)(s.data,t.spatialReference,0,i,this.view.spatialReference,0),(0,c.Hq)(e,i)}return!0}_createRenderGeometries(e,t){var r;const s=this.geometry;if(null==s)return;const i=(0,f.C)(s,this.view.elevationProvider,this.view.renderCoordsHelper,g.F.fromElevationInfo(null!==(r=this.elevationInfo)&&void 0!==r?r:new p.A({mode:(0,d.w7)(s,null)}))),o=new Array;for(const{position:n,mapPositions:l}of i.lines){const r={mapPositions:l,attributeData:{position:n},removeDuplicateStartEnd:this._isClosed};t.push((0,y.te)(e,r)),o.push(n)}this._laserline.pathVerticalPlane=o}}function R(e){e.geometries=[]}const b=(0,o.vt)(),O=(0,o.vt)()},77176:(e,t,r)=>{r.d(t,{b:()=>o});var s=r(15941),i=r(38496);function o(e,t,r){var o;const h=Array.isArray(e),u=h?e.length/t:e.byteLength/(4*t),d=h?e:new Uint32Array(e,0,u*t),p=null!==(o=null===r||void 0===r?void 0:r.minReduction)&&void 0!==o?o:0,_=(null===r||void 0===r?void 0:r.originalIndices)||null,v=_?_.length:0,g=(null===r||void 0===r?void 0:r.componentOffsets)||null;let y=0;if(g)for(let s=0;s<g.length-1;s++){const e=g[s+1]-g[s];e>y&&(y=e)}else y=u;const f=Math.floor(1.1*y)+1;(null==c||c.length<2*f)&&(c=new Uint32Array((0,s.cU)(2*f)));for(let s=0;s<2*f;s++)c[s]=0;let m=0;const w=!!g&&!!_,C=w?v:u;let R=(0,i.my)(u);const b=new Uint32Array(v),O=1.96;let D=0!==p?Math.ceil(4*O*O/(p*p)*p*(1-p)):C,A=1,M=g?g[1]:C;for(let s=0;s<C;s++){if(s===D){const e=1-m/s;if(e+O*Math.sqrt(e*(1-e)/s)<p)return null;D*=2}if(s===M){for(let e=0;e<2*f;e++)c[e]=0;if(_)for(let e=g[A-1];e<g[A];e++)b[e]=R[_[e]];M=g[++A]}const e=w?_[s]:s,r=e*t,i=a(d,r,t);let o=i%f,l=m;for(;0!==c[2*o+1];){if(c[2*o]===i){const e=c[2*o+1]-1;if(n(d,r,e*t,t)){l=R[e];break}}o++,o>=f&&(o-=f)}l===m&&(c[2*o]=i,c[2*o+1]=e+1,m++),R[e]=l}if(0!==p&&1-m/u<p)return null;if(w){for(let e=g[A-1];e<b.length;e++)b[e]=R[_[e]];R=(0,i.uW)(b)}const P=h?new Array(m):new Uint32Array(m*t);m=0;for(let s=0;s<C;s++)R[s]===m&&(l(d,(w?_[s]:s)*t,P,m*t,t),m++);if(_&&!w){const e=new Uint32Array(v);for(let t=0;t<e.length;t++)e[t]=R[_[t]];R=(0,i.uW)(e)}return{buffer:Array.isArray(P)?P:P.buffer,indices:R,uniqueCount:m}}function n(e,t,r,s){for(let i=0;i<s;i++)if(e[t+i]!==e[r+i])return!1;return!0}function l(e,t,r,s,i){for(let o=0;o<i;o++)r[s+o]=e[t+o]}function a(e,t,r){let s=0;for(let i=0;i<r;i++)s=e[t+i]+s|0,s=s+(s<<11)+(s>>>2)|0;return s>>>0}let c=null},85746:(e,t,r)=>{r.d(t,{X:()=>v});var s=r(6326),i=r(91967),o=r(5632),n=r(46053),l=(r(81806),r(76460),r(47249),r(87990));class a{constructor(e){this._resourceFactory=e,this._resources=null,this._visible=!0,this._attached=!1,this._renderGroup=2}destroy(){this._destroyResources()}get resources(){var e;return null===(e=this._resources)||void 0===e?void 0:e.external}get visible(){return this._visible}set visible(e){e!==this._visible&&(this._visible=e,this._syncGeometriesToRenderer())}get attached(){return this._attached}set attached(e){e!==this._attached&&(this._attached=e,this._createOrDestroyResources())}get renderGroup(){return this._renderGroup}set renderGroup(e){var t;this._renderGroup=e;const r=null===(t=this._resources)||void 0===t?void 0:t.layerView;r&&(r.renderGroup=e)}recreate(){this.attached&&this._createResources()}recreateGeometry(){this._resourceFactory.recreateGeometry?null!=this._resources&&(this._ensureRenderGeometriesRemoved(),this._resourceFactory.recreateGeometry(this._resources.external),this._syncGeometriesToRenderer()):this.recreate()}forEachMaterial(e){this._resources&&this._resourceFactory.forEachMaterial(this._resources.external,e)}_createOrDestroyResources(){this._attached?null==this._resources&&this._createResources():this._destroyResources()}_createResources(){this._destroyResources();const e=this._resourceFactory.createResources(),t=new c({view:this._resourceFactory.view,renderGroup:this._renderGroup}),r=this._resourceFactory.view.overlayManager;this._resources={layerView:t,external:e,geometriesAdded:!1},r&&(this._resources.drapeSourceRenderer=r.registerGeometryDrapeSource(t)),this._syncGeometriesToRenderer()}_destroyResources(){if(null==this._resources)return;this._ensureRenderGeometriesRemoved();const e=this._resourceFactory.view.overlayManager;e&&e.unregisterDrapeSource(this._resources.layerView),this._resourceFactory.destroyResources(this._resources.external),this._resources=null}_syncGeometriesToRenderer(){this._visible?this._ensureRenderGeometriesAdded():this._ensureRenderGeometriesRemoved()}_ensureRenderGeometriesRemoved(){var e;null!=(null===(e=this._resources)||void 0===e?void 0:e.drapeSourceRenderer)&&this._resources.geometriesAdded&&(this._resources.drapeSourceRenderer.removeGeometries(this._resources.external.geometries,1),this._resources.geometriesAdded=!1)}_ensureRenderGeometriesAdded(){var e;null!=(null===(e=this._resources)||void 0===e?void 0:e.drapeSourceRenderer)&&(this._resources.geometriesAdded||(this._resources.drapeSourceRenderer.addGeometries(this._resources.external.geometries,1),this._resources.geometriesAdded=!0))}}let c=class extends((0,o.sA)(i.A)){constructor(e){super(e),this.drapeSourceType=1,this.updatePolicy=1,this.renderGroup=2}};(0,s.Cg)([(0,n.MZ)({constructOnly:!0})],c.prototype,"view",void 0),(0,s.Cg)([(0,n.MZ)({readOnly:!0})],c.prototype,"drapeSourceType",void 0),(0,s.Cg)([(0,n.MZ)()],c.prototype,"renderGroup",void 0),c=(0,s.Cg)([(0,l.$)("esri.views.3d.interactive.visualElements.DrapedVisualElementResources")],c);var h=r(69230),u=r(68134),d=r(37046),p=r(8918);class _{constructor(e){this._resourceFactory=e,this._resources=null,this._visible=!0,this._attached=!1}destroy(){this._destroyResources()}get object(){return null!=this._resources?this._resources.object:null}get resources(){return null!=this._resources?this._resources.external:null}get visible(){return this._visible}set visible(e){e!==this._visible&&(this._visible=e,this._syncVisible())}get attached(){return this._attached}set attached(e){e!==this._attached&&(this._attached=e,this._createOrDestroyResources())}recreate(){this.attached&&this._createResources()}recreateGeometry(){if(!this._resourceFactory.recreateGeometry)return void this.recreate();const e=this._resourceFactory.view.stage;if(null==this._resources||!e)return;const t=this._resources.object;t.removeAllGeometries(),this._resourceFactory.recreateGeometry(this._resources.external,t,this._resources.layer)}forEachMaterial(e){this._resources&&this._resourceFactory.forEachMaterial(this._resources.external,e)}_createOrDestroyResources(){this._attached?this._resources||this._createResources():this._destroyResources()}_createResources(){this._destroyResources();const e=this._resourceFactory,t=e.view,r=t.stage;if(!r)return;const s=new p.x(r,{pickable:!1,updatePolicy:1}),i=new d.B({castShadow:!1}),o=e.createResources(i,s);s.add(i);const n=e.cameraChanged,l=n?(0,u.wB)(()=>t.state.camera,e=>n(e),u.Vh):null;this._resources={layer:s,object:i,external:o,cameraHandle:l},this._syncVisible()}_destroyResources(){var e;null!=this._resources&&(this._resources.layer.destroy(),this._resources.object.dispose(),null!==(e=this._resources.cameraHandle)&&void 0!==e&&e.remove(),this._resourceFactory.destroyResources(this._resources.external),this._resources=null)}_syncVisible(){null!=this._resources&&(this._resources.object.visible=this._visible)}}class v extends h.B{constructor(e){var t;super(e),this._isDraped=!1,this.object3dResources=new _(this.createObject3DResourceFactory(e.view)),this.drapedResources=new a(this.createDrapedResourceFactory(e.view)),this.isDraped=null!==(t=e.isDraped)&&void 0!==t&&t}get isDraped(){return this._isDraped}set isDraped(e){e!==this._isDraped&&(this._isDraped=e,this.object3dResources.attached=this.attached&&!e,this.drapedResources.attached=this.attached&&e)}get renderGroup(){return this.drapedResources.renderGroup}set renderGroup(e){this.drapedResources.renderGroup=e}createResources(){this.object3dResources.attached=!this._isDraped,this.drapedResources.attached=this._isDraped}destroyResources(){this.object3dResources.attached=!1,this.drapedResources.attached=!1}recreate(){this.object3dResources.recreate(),this.drapedResources.recreate()}recreateGeometry(){this.object3dResources.recreateGeometry(),this.drapedResources.recreateGeometry()}destroy(){this.object3dResources.destroy(),this.drapedResources.destroy(),super.destroy()}updateVisibility(e){this.object3dResources.visible=e,this.drapedResources.visible=e}forEachMaterial(e){var t,r;null!==(t=this.object3dResources)&&void 0!==t&&t.forEachMaterial(e),null===(r=this.drapedResources)||void 0===r||r.forEachMaterial(e)}}},99785:(e,t,r)=>{r.d(t,{lO:()=>c,oR:()=>h});var s=r(38983),i=r(5262),o=r(44815),n=r(38496),l=r(10294),a=r(77176);function c(e){const t=h(e.rings,e.hasZ,1,e.spatialReference),r=new Array;let i=0,l=0;for(const a of t.polygons){const e=a.count,c=a.index,h=(0,o.l5)(t.position,3*c,3*e),u=a.holeIndices.map(e=>e-c),d=(0,n.uW)((0,s.e)(h,u,3));r.push({position:h,faces:d}),i+=h.length,l+=d.length}const c=function(e,t,r){if(1===e.length)return e[0];const s=(0,o.jh)(t),i=new Array(r);let l=0,a=0,c=0;for(const o of e){for(let e=0;e<o.position.length;e++)s[l++]=o.position[e];for(const e of o.faces)i[a++]=e+c;c=l/3}return{position:s,faces:(0,n.uW)(i)}}(r,i,l),u=Array.isArray(c.position)?(0,a.b)(c.position,3,{originalIndices:c.faces}):(0,a.b)(c.position.buffer,6,{originalIndices:c.faces});return c.position=(0,o.xm)(new Float64Array(u.buffer)),c.faces=u.indices,c}function h(e,t,r,s){const i=e.length,n=new Array(i),l=new Array(i),a=new Array(i);let c=0;for(let o=0;o<i;++o)c+=e[o].length;let h=0,p=0,_=0;const v=(0,o.jh)(3*c);let g=0;for(let o=i-1;o>=0;o--){const c=e[o],y=1===r&&d(c,t,s);if(y&&1!==i)n[h++]=c;else{let e=c.length;for(let t=0;t<h;++t)e+=n[t].length;const r={index:g,pathLengths:new Array(h+1),count:e,holeIndices:new Array(h)};r.pathLengths[0]=c.length,c.length>0&&(a[_++]={index:g,count:c.length}),g=y?u(c,c.length-1,-1,v,g,c.length,t):u(c,0,1,v,g,c.length,t);for(let s=0;s<h;++s){const e=n[s];r.holeIndices[s]=g,r.pathLengths[s+1]=e.length,e.length>0&&(a[_++]={index:g,count:e.length}),g=u(e,0,1,v,g,e.length,t)}h=0,r.count>0&&(l[p++]=r)}}for(let o=0;o<h;++o){const e=n[o];e.length>0&&(a[_++]={index:g,count:e.length}),g=u(e,0,1,v,g,e.length,t)}return l.length=p,a.length=_,{position:v,polygons:l,outlines:a}}function u(e,t,r,s,i,o,n){i*=3;for(let l=0;l<o;++l){const o=e[t];s[i++]=o[0],s[i++]=o[1],s[i++]=n&&o[2]?o[2]:0,t+=r}return i/3}function d(e,t,r){if(!t)return!(0,i.$3)(e);const s=e.length-1;switch((0,l.S)(e,s,r)){case 0:return!(0,i.$3)(e,1,2);case 1:return!(0,i.$3)(e,0,2);case 2:return!(0,i.$3)(e,0,1)}}}}]);
//# sourceMappingURL=72725.8e52358f.chunk.js.map