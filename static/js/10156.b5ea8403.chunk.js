"use strict";(self.webpackChunksc_envimonitor=self.webpackChunksc_envimonitor||[]).push([[10156],{10156:(t,e,o)=>{o.r(e),o.d(e,{assetMapFromAssetMapsJSON:()=>y,extractMesh:()=>m,meshFeatureSetFromJSON:()=>h});var r=o(39356),n=o(76460),s=o(87663),a=o(76797),i=o(47594),l=o(13312),u=o(57045),c=o(19463),p=o(77725),f=o(74159);const g=()=>n.A.getLogger("esri.rest.support.meshFeatureSet");function h(t,e,o){var n;const s=o.features;o.features=[],delete o.geometryType;const a=p.A.fromJSON(o);if(a.geometryType="mesh",!o.assetMaps)return a;const i=y(e,o.assetMaps),u=null!==(n=t.sourceSpatialReference)&&void 0!==n?n:l.A.WGS84,c=o.globalIdFieldName,{outFields:f}=t,g=null!=f&&f.length>0?(h=f.includes("*")?null:new Set(f),t=>{let{attributes:e}=t;if(!e)return{};if(!h)return e;for(const o in e)h.has(o)||delete e[o];return e}):()=>({});var h;for(const l of s){const t=m(l,c,u,e,i);a.features.push(new r.A({geometry:t,attributes:g(l)}))}return a}function m(t,e,o,r,n){const s=t.attributes[e],l=n.get(s);if(null==l||!t.geometry)return null;const c=(0,f.V)(t.attributes,o,r.transformFieldRoles),p=a.A.fromJSON(t.geometry);p.spatialReference=o;const g=(0,f.f)(t.attributes,r.transformFieldRoles),h=o.isGeographic?"local":"georeferenced",m=function(t){const e=Array.from(t.files.values()),o=new Array;for(const r of e){if(2!==r.status)return null;const t=new Array;for(const e of r.parts){if(!e)return null;t.push(new u.Bq(e.url,e.hash))}o.push(new u.Qp(r.name,r.mimeType,t))}return{type:"service",assets:o}}(l);return m?i.default.createWithExternalSource(c,m,{extent:p,transform:g,vertexSpace:h,unitConversionDisabled:!0}):i.default.createIncomplete(c,{extent:p,transform:g,vertexSpace:h})}function y(t,e){const o=new Map;for(const r of e){const e=r.parentGlobalId;if(null==e)continue;const n=r.assetName,a=r.assetType,i=r.assetHash,l=r.assetURL,u=r.conversionStatus,p=r.seqNo,f=(0,c.Fm)(a,t.supportedFormats);if(!f){g().error("mesh-feature-set:unknown-format","Service returned an asset of type ".concat(a,", but it does not list it as a supported type"));continue}const h=(0,s.tE)(o,e,()=>({files:new Map}));(0,s.tE)(h.files,n,()=>({name:n,type:a,mimeType:f,status:d(u),parts:[]})).parts[p]={hash:i,url:l}}return o}function d(t){switch(t){case"COMPLETED":case"SUBMITTED":return 2;case"INPROGRESS":return 1;default:return 0}}},32186:(t,e,o)=>{o.d(e,{A:()=>h});var r=o(6326),n=o(69098),s=o(42553),a=o(46053),i=(o(81806),o(76460),o(47249),o(87990)),l=o(34761),u=o(13191),c=o(60008),p=o(4336),f=o(9392),g=o(52896);let h=class extends((0,n.OU)(s.o)){constructor(t){super(t),this.translation=(0,f.vt)(),this.rotationAxis=(0,f.ci)(g.up),this.rotationAngle=0,this.scale=(0,f.fA)(1,1,1)}get rotation(){return(0,g.i4)(this.rotationAxis,this.rotationAngle)}set rotation(t){this.rotationAxis=(0,f.o8)((0,g.yo)(t)),this.rotationAngle=(0,g.g7)(t)}get localMatrix(){const t=(0,u.vt)();return(0,c.x8)(m,(0,g.yo)(this.rotation),(0,g.$I)(this.rotation)),(0,l.o1)(t,m,this.translation,this.scale),t}get localMatrixInverse(){return(0,l.B8)((0,u.vt)(),this.localMatrix)}equals(t){return this===t||null!=t&&(0,l.t2)(this.localMatrix,t.localMatrix)}};(0,r.Cg)([(0,a.MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],h.prototype,"translation",void 0),(0,r.Cg)([(0,a.MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],h.prototype,"rotationAxis",void 0),(0,r.Cg)([(0,a.MZ)({type:Number,nonNullable:!0,json:{write:!0}})],h.prototype,"rotationAngle",void 0),(0,r.Cg)([(0,a.MZ)({type:[Number],nonNullable:!0,json:{write:!0}})],h.prototype,"scale",void 0),(0,r.Cg)([(0,a.MZ)()],h.prototype,"rotation",null),(0,r.Cg)([(0,a.MZ)()],h.prototype,"localMatrix",null),(0,r.Cg)([(0,a.MZ)()],h.prototype,"localMatrixInverse",null),h=(0,r.Cg)([(0,i.$)("esri.geometry.support.MeshTransform")],h);const m=(0,p.vt)()},74159:(t,e,o)=>{o.d(e,{V:()=>s,f:()=>a});var r=o(19247),n=o(32186);function s(t,e){let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i;return new r.A({x:t[o.originX],y:t[o.originY],z:t[o.originZ],spatialReference:e})}function a(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i;return new n.A({translation:[t[e.translationX],-t[e.translationZ],t[e.translationY]],rotationAxis:[t[e.rotationX],-t[e.rotationZ],t[e.rotationY]],rotationAngle:t[e.rotationDeg],scale:[t[e.scaleX],t[e.scaleZ],t[e.scaleY]]})}const i={originX:"originX",originY:"originY",originZ:"originZ",translationX:"translationX",translationY:"translationY",translationZ:"translationZ",scaleX:"scaleX",scaleY:"scaleY",scaleZ:"scaleZ",rotationX:"rotationX",rotationY:"rotationY",rotationZ:"rotationZ",rotationDeg:"rotationDeg"}}}]);
//# sourceMappingURL=10156.b5ea8403.chunk.js.map